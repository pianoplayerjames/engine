import{jsx as e,jsxs as a,Fragment as ve}from"react/jsx-runtime";import xt,{useRef as ue,useState as N,useEffect as te,Suspense as Mt}from"react";import{Canvas as Tt}from"@react-three/fiber";import{Grid as Lt,OrbitControls as Pt,TransformControls as Et,Stats as At,GizmoHelper as Bt,GizmoViewport as Dt,Environment as Ot}from"@react-three/drei";import{useSnapshot as ke,proxy as Se,subscribe as vt}from"valtio";import*as nt from"three";const Z=Se({scene:null,renderer:null,environment:{preset:null,intensity:1,type:"color",environmentType:null},camera:{position:[3,3,3],rotation:[0,0,0],fov:60,near:.1,far:1e3,target:[0,0,0],aspect:16/9},lighting:{ambient:{intensity:.5,color:"#ffffff"},lights:new Map,shadowsEnabled:!0},settings:{shadows:!0,antialias:!0,alpha:!1,powerPreference:"high-performance",physicallyCorrectLights:!0,outputEncoding:"sRGB",toneMapping:"ACES",toneMappingExposure:1},effects:new Map,performance:{fps:0,frameTime:0,drawCalls:0,triangles:0,memory:0,lastUpdate:0}}),rt={setCamera:t=>{Object.assign(Z.camera,t)},setCameraPosition:(t,s,r)=>{Z.camera.position[0]=t,Z.camera.position[1]=s,Z.camera.position[2]=r},setCameraRotation:(t,s,r)=>{Z.camera.rotation[0]=t,Z.camera.rotation[1]=s,Z.camera.rotation[2]=r},setCameraTarget:(t,s,r)=>{Z.camera.target[0]=t,Z.camera.target[1]=s,Z.camera.target[2]=r},addLight:(t,s)=>{Z.lighting.lights.set(t,s)},removeLight:t=>{Z.lighting.lights.delete(t)},updateLight:(t,s)=>{const r=Z.lighting.lights.get(t);r&&Object.assign(r,s)},setAmbientLight:(t,s)=>{Z.lighting.ambient.intensity=t,Z.lighting.ambient.color=s},updateSettings:t=>{Object.assign(Z.settings,t)},setEnvironment:(t,s=1,r="hdr",n="preset")=>{Z.environment.preset=t,Z.environment.intensity=s,Z.environment.type=r,Z.environment.environmentType=n},setEnvironmentIntensity:t=>{Z.environment.intensity=t},clearEnvironment:()=>{Z.environment.preset=null,Z.environment.intensity=1,Z.environment.type="color",Z.environment.environmentType=null},addEffect:(t,s)=>{Z.effects.set(t,s)},removeEffect:t=>{Z.effects.delete(t)},updateEffect:(t,s)=>{const r=Z.effects.get(t);r&&Object.assign(r,s)},updatePerformance:t=>{Object.assign(Z.performance,{...t,lastUpdate:performance.now()})},resize:(t,s)=>{const{renderer:r}=Z;r&&r.setSize(t,s),Z.camera.aspect=t/s},setScene:t=>{Z.scene=t},setRenderer:t=>{Z.renderer=t},setShadowsEnabled:t=>{Z.lighting.shadowsEnabled=t,Z.settings.shadows=t},batchUpdateLights:t=>{t.forEach(({id:s,updates:r})=>{rt.updateLight(s,r)})},applyEnvironmentPreset:t=>{const r={sunset:{preset:"sunset",intensity:1.2,type:"hdr",environmentType:"preset"},studio:{preset:null,intensity:1,type:"color",environmentType:"room"},forest:{preset:"forest",intensity:.8,type:"hdr",environmentType:"preset"}}[t];r&&Object.assign(Z.environment,r)}};if(typeof window<"u"){let t=0,s=0;const r=()=>{const n=performance.now(),l=n-t;t=n,s++,s%60===0&&rt.updatePerformance({fps:Math.round(1e3/l),frameTime:l,drawCalls:0,triangles:0,memory:0}),requestAnimationFrame(r)};requestAnimationFrame(r)}const Ae=t=>{const s=ke(Z);return t?t(s):{...s,...rt}},yt="engine-ui-settings",st={panels:{rightPanelWidth:304,bottomPanelHeight:256,scenePropertiesHeight:300,assetsLibraryWidth:250,rightPropertiesMenuPosition:"right"},settings:{gridSettings:{enabled:!0,size:100,cellSize:1,cellThickness:1,cellColor:"#6B7280",sectionSize:10,sectionThickness:2,sectionColor:"#9CA3AF",position:[0,-1,0],fadeDistance:50,fadeStrength:.5,infiniteGrid:!0},viewportSettings:{backgroundColor:"#1a202c"}},bottomTabs:{selectedTab:"assets",tabOrder:["assets","scripts","animation","node-editor","timeline","console","materials","terrain","lighting","physics","audio","effects"]},toolbar:{selectedTool:"scene",tabOrder:["scene","light","effects","folder","star","wifi","cloud","monitor"],bottomTabOrder:["add","settings","fullscreen"]},topLeftMenu:{selectedItem:null}},wt=()=>{try{const t=localStorage.getItem(yt);if(t){const s=JSON.parse(t);return Ct(st,s)}}catch(t){console.warn("Failed to load UI settings from localStorage:",t)}return st},Nt=t=>{try{localStorage.setItem(yt,JSON.stringify(t))}catch(s){console.warn("Failed to save UI settings to localStorage:",s)}},fe=(t,s)=>{const r=wt(),n=Ft(r,t,s);return Nt(n),n},Ct=(t,s)=>{const r={...t};return _e(t)&&_e(s)&&Object.keys(s).forEach(n=>{_e(s[n])&&n in t?r[n]=Ct(t[n],s[n]):r[n]=s[n]}),r},_e=t=>t&&typeof t=="object"&&!Array.isArray(t),Ft=(t,s,r)=>{const n=s.split("."),l={...t};let o=l;for(let i=0;i<n.length-1;i++){const p=n[i];!(p in o)||!_e(o[p])?o[p]={}:o[p]={...o[p]},o=o[p]}return o[n[n.length-1]]=r,l},be=st,T=Se({isOpen:!1,mode:"scene",ui:{rightPanelWidth:be.panels.rightPanelWidth,bottomPanelHeight:be.panels.bottomPanelHeight,scenePropertiesHeight:be.panels.scenePropertiesHeight,assetsLibraryWidth:be.panels.assetsLibraryWidth,rightPropertiesMenuPosition:be.panels.rightPropertiesMenuPosition,selectedTool:be.toolbar.selectedTool,selectedBottomTab:be.bottomTabs.selectedTab,bottomTabOrder:be.bottomTabs.tabOrder,toolbarTabOrder:be.toolbar.tabOrder,toolbarBottomTabOrder:be.toolbar.bottomTabOrder,topLeftMenuSelected:be.topLeftMenu.selectedItem},panels:{hierarchy:!0,inspector:!0,console:!1,assets:!1,isScenePanelOpen:!0,isAssetPanelOpen:!0,isResizingPanels:!1},selection:{entity:null,object:null,transformMode:"select"},sceneObjects:[{id:"cube-1",name:"Cube",type:"mesh",position:[0,0,0],rotation:[0,0,0],scale:[1,1,1],geometry:"box",material:{color:"orange"},visible:!0},{id:"sphere-1",name:"Sphere",type:"mesh",position:[2,0,0],rotation:[0,0,0],scale:[1,1,1],geometry:"sphere",material:{color:"lightblue"},visible:!0}],settings:{grid:be.settings.gridSettings,viewport:be.settings.viewportSettings,editor:{gridSize:1,snapToGrid:!1,showGrid:!0,showWireframe:!1,cameraSpeed:1}},console:{messages:[],handler:null}}),It={toggle:()=>{T.isOpen=!T.isOpen},open:()=>{T.isOpen=!0},close:()=>{T.isOpen=!1},setMode:t=>{T.mode=t},togglePanel:t=>{T.panels[t]=!T.panels[t]},setIsScenePanelOpen:t=>{T.panels.isScenePanelOpen=t},setIsAssetPanelOpen:t=>{T.panels.isAssetPanelOpen=t},setIsResizingPanels:t=>{T.panels.isResizingPanels=t},setSelectedEntity:t=>{T.selection.entity=t},setSelectedObject:t=>{T.selection.object=t},setTransformMode:t=>{T.selection.transformMode=t},updateEditorSettings:t=>{Object.assign(T.settings.editor,t)},updateGridSettings:t=>{Object.assign(T.settings.grid,t),fe("settings.gridSettings",T.settings.grid)},updateViewportSettings:t=>{Object.assign(T.settings.viewport,t),fe("settings.viewportSettings",T.settings.viewport)},setRightPanelWidth:t=>{T.ui.rightPanelWidth=t,fe("panels.rightPanelWidth",t)},setBottomPanelHeight:t=>{T.ui.bottomPanelHeight=t,fe("panels.bottomPanelHeight",t)},setScenePropertiesHeight:t=>{T.ui.scenePropertiesHeight=t,fe("panels.scenePropertiesHeight",t)},setAssetsLibraryWidth:t=>{T.ui.assetsLibraryWidth=t,fe("panels.assetsLibraryWidth",t)},setRightPropertiesMenuPosition:t=>{T.ui.rightPropertiesMenuPosition=t,fe("panels.rightPropertiesMenuPosition",t)},setSelectedTool:t=>{T.ui.selectedTool=t,fe("toolbar.selectedTool",t)},setSelectedBottomTab:t=>{T.ui.selectedBottomTab=t,fe("bottomTabs.selectedTab",t)},setBottomTabOrder:t=>{T.ui.bottomTabOrder=t,fe("bottomTabs.tabOrder",t)},setToolbarTabOrder:t=>{T.ui.toolbarTabOrder=t,fe("toolbar.tabOrder",t)},setToolbarBottomTabOrder:t=>{T.ui.toolbarBottomTabOrder=t,fe("toolbar.bottomTabOrder",t)},setTopLeftMenuSelected:t=>{T.ui.topLeftMenuSelected=t,fe("topLeftMenu.selectedItem",t)},hydrateFromLocalStorage:()=>{if(typeof window<"u"){const t=wt();T.ui.rightPanelWidth=t.panels.rightPanelWidth,T.ui.bottomPanelHeight=t.panels.bottomPanelHeight,T.ui.scenePropertiesHeight=t.panels.scenePropertiesHeight,T.ui.assetsLibraryWidth=t.panels.assetsLibraryWidth,T.ui.rightPropertiesMenuPosition=t.panels.rightPropertiesMenuPosition,T.ui.selectedTool=t.toolbar.selectedTool,T.ui.selectedBottomTab=t.bottomTabs.selectedTab,T.ui.bottomTabOrder=t.bottomTabs.tabOrder,T.ui.toolbarTabOrder=t.toolbar.tabOrder,T.ui.toolbarBottomTabOrder=t.toolbar.bottomTabOrder,T.ui.topLeftMenuSelected=t.topLeftMenu.selectedItem,Object.assign(T.settings.grid,t.settings.gridSettings),Object.assign(T.settings.viewport,t.settings.viewportSettings),T.panels.isScenePanelOpen=!0,T.panels.isAssetPanelOpen=!0}},addConsoleMessage:(t,s="info")=>{T.console.messages.push({id:Date.now(),message:t,type:s,timestamp:new Date().toLocaleTimeString()})},clearConsole:()=>{T.console.messages.length=0},setContextMenuHandler:t=>{T.console.handler=t},addSceneObject:t=>{const s={id:`${t.type}-${Date.now()}`,...t};return T.sceneObjects.push(s),s},removeSceneObject:t=>{const s=T.sceneObjects.findIndex(r=>r.id===t);s>=0&&T.sceneObjects.splice(s,1)},updateSceneObject:(t,s)=>{const r=T.sceneObjects.find(n=>n.id===t);r&&Object.assign(r,s)}};if(typeof window<"u")try{vt(T,()=>{(window.requestIdleCallback||(s=>setTimeout(s,0)))(()=>{try{Nt({panels:{rightPanelWidth:T.ui.rightPanelWidth,bottomPanelHeight:T.ui.bottomPanelHeight,scenePropertiesHeight:T.ui.scenePropertiesHeight,assetsLibraryWidth:T.ui.assetsLibraryWidth,rightPropertiesMenuPosition:T.ui.rightPropertiesMenuPosition},toolbar:{selectedTool:T.ui.selectedTool,tabOrder:T.ui.toolbarTabOrder,bottomTabOrder:T.ui.toolbarBottomTabOrder},bottomTabs:{selectedTab:T.ui.selectedBottomTab,tabOrder:T.ui.bottomTabOrder},topLeftMenu:{selectedItem:T.ui.topLeftMenuSelected},settings:{gridSettings:T.settings.grid,viewportSettings:T.settings.viewport}})}catch(s){console.warn("Failed to save UI settings:",s)}})})}catch(t){console.warn("Failed to set up UI persistence:",t)}const ge=t=>{const s=ke(T),r={isOpen:s.isOpen,mode:s.mode,rightPanelWidth:s.ui.rightPanelWidth,bottomPanelHeight:s.ui.bottomPanelHeight,scenePropertiesHeight:s.ui.scenePropertiesHeight,assetsLibraryWidth:s.ui.assetsLibraryWidth,rightPropertiesMenuPosition:s.ui.rightPropertiesMenuPosition,selectedTool:s.ui.selectedTool,selectedBottomTab:s.ui.selectedBottomTab,bottomTabOrder:s.ui.bottomTabOrder,toolbarTabOrder:s.ui.toolbarTabOrder,toolbarBottomTabOrder:s.ui.toolbarBottomTabOrder,topLeftMenuSelected:s.ui.topLeftMenuSelected,panels:s.panels,isScenePanelOpen:s.panels.isScenePanelOpen,isAssetPanelOpen:s.panels.isAssetPanelOpen,isResizingPanels:s.panels.isResizingPanels,selectedEntity:s.selection.entity,selectedObject:s.selection.object,transformMode:s.selection.transformMode,sceneObjects:s.sceneObjects,settings:s.settings.editor,gridSettings:s.settings.grid,viewportSettings:s.settings.viewport,consoleMessages:s.console.messages,contextMenuHandler:s.console.handler,...It};return t?t(r):r},Rt=xt.memo(()=>{const{environment:t}=Ae(),[s,r]=N(null);return te(()=>{const n=setTimeout(()=>{r(t.preset&&t.type==="hdr"?t.preset:null)},50);return()=>clearTimeout(n)},[t.preset,t.type]),s?e(Ot,{preset:s,background:!0,environmentIntensity:t.intensity,resolution:256}):null});function lt({children:t,style:s={},onContextMenu:r}){const n=ue(),l=ue(),o=ue(),{camera:i,ambientLight:p,settings:u,setScene:y,setRenderer:k,resize:b}=Ae(),{selectedObject:D,transformMode:S,gridSettings:g,viewportSettings:m}=ge(),{environment:G}=Ae(),M=I=>{if(!o.current||!I)return null;const F=R=>{var h;if(((h=R.userData)==null?void 0:h.sceneObjectId)===I)return R;for(const E of R.children){const V=F(E);if(V)return V}return null};return F(o.current)},[W,K]=N(null);te(()=>{if(!D){K(null);return}const I=()=>{const F=M(D);return F?(K(F),!0):!1};if(!I()){const F=setTimeout(()=>{I()},50);return()=>clearTimeout(F)}},[D,o.current]),te(()=>{const I=()=>{const h=['div[style*="position:absolute"][style*="top:0px"][style*="left:0px"]','div[style*="position: absolute"][style*="top: 0px"][style*="left: 0px"]','div[style*="z-index"][style*="position"][style*="top"]',".stats-panel"];let E=null;for(const V of h)if(E=document.querySelector(V),E&&(E.textContent.includes("FPS")||E.children.length>0))break;return E?(E.style.position="fixed",E.style.top="10px",E.style.left="50%",E.style.transform="translateX(-50%)",E.style.zIndex="100",!0):!1},F=new MutationObserver(()=>{I()&&F.disconnect()});F.observe(document.body,{childList:!0,subtree:!0});const R=setInterval(()=>{I()&&clearInterval(R)},100);return()=>{F.disconnect(),clearInterval(R)}},[]),te(()=>{const I=Ae.getState();I.renderer&&I.renderer.setClearColor(m.backgroundColor)},[m.backgroundColor]);const j=({scene:I,gl:F,camera:R})=>{o.current=I,y(I),k(F),F.shadowMap.enabled=u.shadows,F.physicallyCorrectLights=u.physicallyCorrectLights,F.setClearColor(m.backgroundColor)};return e("div",{style:{width:"100%",height:"100%",backgroundColor:m.backgroundColor,...s},onMouseEnter:()=>{const I=document.querySelector("canvas");I&&I.focus()},children:a(Tt,{camera:{position:i.position,fov:i.fov,near:i.near,far:i.far},gl:{antialias:u.antialias,alpha:u.alpha,powerPreference:u.powerPreference},shadows:u.shadows,dpr:[1,2],flat:!0,onCreated:j,style:{backgroundColor:m.backgroundColor},onContextMenu:I=>{I.preventDefault(),r&&r(I,null,"viewport")},onPointerMissed:()=>{const{setSelectedObject:I}=ge.getState();I(null)},tabIndex:0,style:{outline:"none"},children:[e("ambientLight",{intensity:p.intensity,color:p.color}),e("directionalLight",{position:[10,10,5],intensity:1,castShadow:u.shadows}),e(Mt,{fallback:null,children:e(Rt,{})}),g.enabled&&e(Lt,{position:g.position,args:[g.size,g.size],cellSize:g.cellSize,cellThickness:g.cellThickness,cellColor:g.cellColor,sectionSize:g.sectionSize,sectionThickness:g.sectionThickness,sectionColor:g.sectionColor,fadeDistance:g.fadeDistance,fadeStrength:g.fadeStrength,followCamera:!1,infiniteGrid:g.infiniteGrid}),t,e(Pt,{ref:n,target:i.target,enablePan:!0,enableZoom:!0,enableRotate:!0,mouseButtons:{LEFT:nt.MOUSE.ROTATE,MIDDLE:nt.MOUSE.DOLLY,RIGHT:null},enabled:!0}),W&&S!=="select"&&e(Et,{ref:l,object:W,mode:S==="move"?"translate":S==="rotate"?"rotate":"scale",size:1,showX:!0,showY:!0,showZ:!0,onMouseDown:()=>n.current&&(n.current.enabled=!1),onMouseUp:()=>n.current&&(n.current.enabled=!0),onChange:()=>{if(W&&D){const{updateSceneObject:I}=ge.getState();I(D,{position:W.position.toArray(),rotation:W.rotation.toArray(),scale:W.scale.toArray()})}}}),e(At,{showPanel:0}),e(Bt,{alignment:"bottom-right",margin:[80,80],children:e(Dt,{axisColors:["#ff4757","#2ed573","#3742fa"],labelColor:"white",hideNegativeAxes:!1,hideAxisHeads:!1})})]})})}function zt({children:t,embedded:s=!1,style:r={},onContextMenu:n,viewportBounds:l}){if(s)return e(lt,{style:r,onContextMenu:n,children:t});const o=l?{position:"fixed",top:l.top||0,left:l.left||0,right:l.right||0,bottom:l.bottom||0,width:"auto",height:"auto"}:{width:"100vw",height:"100vh"};return e(lt,{style:{...o,...r},onContextMenu:n,children:t})}const L=Se({keyboard:{keys:new Map,pressed:new Map,released:new Map,modifiers:{shift:!1,ctrl:!1,alt:!1,meta:!1}},mouse:{position:{x:0,y:0},delta:{x:0,y:0},buttons:new Map,wheel:{x:0,y:0},locked:!1},gamepads:{connected:new Map,events:{connected:new Map,disconnected:new Map}},touch:{touches:new Map,gestures:{pinch:{scale:1,delta:0},pan:{x:0,y:0,deltaX:0,deltaY:0}}},context:{current:"game",bindings:new Map}}),He={setKeyDown:t=>{switch(L.keyboard.keys.set(t,!0),L.keyboard.pressed.set(t,!0),t.toLowerCase()){case"shift":L.keyboard.modifiers.shift=!0;break;case"control":L.keyboard.modifiers.ctrl=!0;break;case"alt":L.keyboard.modifiers.alt=!0;break;case"meta":L.keyboard.modifiers.meta=!0;break}},setKeyUp:t=>{switch(L.keyboard.keys.set(t,!1),L.keyboard.released.set(t,!0),t.toLowerCase()){case"shift":L.keyboard.modifiers.shift=!1;break;case"control":L.keyboard.modifiers.ctrl=!1;break;case"alt":L.keyboard.modifiers.alt=!1;break;case"meta":L.keyboard.modifiers.meta=!1;break}},setMousePosition:(t,s)=>{L.mouse.delta.x=t-L.mouse.position.x,L.mouse.delta.y=s-L.mouse.position.y,L.mouse.position.x=t,L.mouse.position.y=s},setMouseButton:(t,s)=>{L.mouse.buttons.set(t,s)},setMouseWheel:(t,s)=>{L.mouse.wheel.x=t,L.mouse.wheel.y=s},setMouseLocked:t=>{L.mouse.locked=t},addTouch:(t,s,r,n=1)=>{L.touch.touches.set(t,{x:s,y:r,pressure:n,startTime:Date.now()})},updateTouch:(t,s,r,n=1)=>{const l=L.touch.touches.get(t);l&&Object.assign(l,{x:s,y:r,pressure:n})},removeTouch:t=>{L.touch.touches.delete(t)},updatePinchGesture:(t,s)=>{L.touch.gestures.pinch.scale=t,L.touch.gestures.pinch.delta=s},updatePanGesture:(t,s,r,n)=>{L.touch.gestures.pan.x=t,L.touch.gestures.pan.y=s,L.touch.gestures.pan.deltaX=r,L.touch.gestures.pan.deltaY=n},updateGamepads:()=>{if(!navigator.getGamepads)return;const t=navigator.getGamepads();for(let s=0;s<t.length;s++){const r=t[s];r&&L.gamepads.connected.set(s,{id:r.id,index:r.index,connected:r.connected,buttons:r.buttons.map(n=>({pressed:n.pressed,touched:n.touched,value:n.value})),axes:[...r.axes],timestamp:r.timestamp})}},setGamepadConnected:t=>{L.gamepads.events.connected.set(t.index,t)},setGamepadDisconnected:t=>{L.gamepads.events.disconnected.set(t.index,t),L.gamepads.connected.delete(t.index)},setInputContext:t=>{L.context.current=t},addInputBinding:(t,s,r="game")=>{const n=L.context.bindings.get(r)||new Map;n.set(t,s),L.context.bindings.set(r,n)},removeInputBinding:(t,s="game")=>{const r=L.context.bindings.get(s);r&&r.delete(t)},clearFrameEvents:()=>{L.keyboard.pressed.clear(),L.keyboard.released.clear(),L.gamepads.events.connected.clear(),L.gamepads.events.disconnected.clear(),L.mouse.delta.x=0,L.mouse.delta.y=0,L.mouse.wheel.x=0,L.mouse.wheel.y=0,L.touch.gestures.pinch.delta=0,L.touch.gestures.pan.deltaX=0,L.touch.gestures.pan.deltaY=0},isKeyDown:t=>L.keyboard.keys.get(t)||!1,wasKeyPressed:t=>L.keyboard.pressed.get(t)||!1,wasKeyReleased:t=>L.keyboard.released.get(t)||!1,isMouseButtonDown:t=>L.mouse.buttons.get(t)||!1,getGamepad:t=>L.gamepads.connected.get(t),isGamepadButtonPressed:(t,s)=>{var n;const r=L.gamepads.connected.get(t);return((n=r==null?void 0:r.buttons[s])==null?void 0:n.pressed)||!1},getGamepadAxis:(t,s)=>{const r=L.gamepads.connected.get(t);return(r==null?void 0:r.axes[s])||0},wasGamepadConnected:t=>L.gamepads.events.connected.has(t),wasGamepadDisconnected:t=>L.gamepads.events.disconnected.has(t),getActiveKeys:()=>{const t=[];return L.keyboard.keys.forEach((s,r)=>{s&&t.push(r)}),t},getMouseMovement:()=>({x:L.mouse.delta.x,y:L.mouse.delta.y,magnitude:Math.sqrt(L.mouse.delta.x**2+L.mouse.delta.y**2)}),isComboPressed:t=>t.every(s=>He.isKeyDown(s))};if(typeof window<"u"){let t=0;const s=()=>{const r=performance.now();r-t>16&&(He.updateGamepads(),t=r),requestAnimationFrame(s)};requestAnimationFrame(s),window.addEventListener("gamepadconnected",r=>{He.setGamepadConnected(r.gamepad)}),window.addEventListener("gamepaddisconnected",r=>{He.setGamepadDisconnected(r.gamepad)})}const kt=t=>{const s=ke(L);return t?t(s):{...s,...He}};function Wt(){const{setKeyDown:t,setKeyUp:s,setMousePosition:r,setMouseButton:n,setMouseWheel:l,updateGamepads:o,setGamepadConnected:i,setGamepadDisconnected:p}=kt();return te(()=>{const u=M=>{console.log("Key down:",M.code),M.preventDefault(),t(M.code)},y=M=>{M.preventDefault(),s(M.code)},k=M=>{r(M.clientX,M.clientY)},b=M=>{n(M.button,!0)},D=M=>{n(M.button,!1)},S=M=>{l(M.deltaX,M.deltaY)},g=M=>{i(M.gamepad)},m=M=>{p(M.gamepad)},G=setInterval(()=>{o()},16);return window.addEventListener("keydown",u),window.addEventListener("keyup",y),window.addEventListener("mousemove",k),window.addEventListener("mousedown",b),window.addEventListener("mouseup",D),window.addEventListener("wheel",S),window.addEventListener("gamepadconnected",g),window.addEventListener("gamepaddisconnected",m),()=>{window.removeEventListener("keydown",u),window.removeEventListener("keyup",y),window.removeEventListener("mousemove",k),window.removeEventListener("mousedown",b),window.removeEventListener("mouseup",D),window.removeEventListener("wheel",S),window.removeEventListener("gamepadconnected",g),window.removeEventListener("gamepaddisconnected",m),clearInterval(G)}},[t,s,r,n,l,o,i,p]),null}const w=Se({context:{instance:null,masterVolume:1,enabled:!0,suspended:!1},assets:{sounds:new Map,music:new Map,buffers:new Map},sources:{active:new Map,pool:[],maxSources:32},spatial:{listener:{position:[0,0,0],orientation:[0,0,-1,0,1,0],velocity:[0,0,0]},sources:new Map},groups:{master:{gain:1,muted:!1},sfx:{gain:1,muted:!1},music:{gain:.7,muted:!1},voice:{gain:1,muted:!1},ambient:{gain:.8,muted:!1}},analysis:{enabled:!1,frequency:new Uint8Array(256),waveform:new Float32Array(256),volume:0,peak:0}}),Ce={initAudio:async()=>{if(w.context.instance)return w.context.instance;try{const t=new(window.AudioContext||window.webkitAudioContext);return w.context.instance=t,t.state==="suspended"&&(await t.resume(),w.context.suspended=!1),Ce._setupMasterGain(),t}catch(t){return console.error("Failed to initialize audio context:",t),w.context.enabled=!1,null}},_setupMasterGain:()=>{const t=w.context.instance;t&&(t.masterGain||(t.masterGain=t.createGain(),t.masterGain.connect(t.destination),t.masterGain.gain.value=w.context.masterVolume))},resumeContext:async()=>{const t=w.context.instance;t&&t.state==="suspended"&&(await t.resume(),w.context.suspended=!1)},suspendContext:async()=>{const t=w.context.instance;t&&t.state==="running"&&(await t.suspend(),w.context.suspended=!0)},loadSound:async(t,s,r="sfx")=>{const n=w.context.instance;if(n||await Ce.initAudio(),w.assets.sounds.has(t))return w.assets.sounds.get(t);try{const o=await(await fetch(s)).arrayBuffer(),i=await n.decodeAudioData(o),p={id:t,url:s,buffer:i,group:r,duration:i.duration,channels:i.numberOfChannels,sampleRate:i.sampleRate,loadedAt:Date.now()};return w.assets.sounds.set(t,p),w.assets.buffers.set(t,i),p}catch(l){throw console.error(`Failed to load sound ${t}:`,l),l}},playSound:(t,s={})=>{var S;const r=w.context.instance,n=w.assets.sounds.get(t),l=w.assets.buffers.get(t);if(!r||!n||!l)return console.warn(`Sound ${t} not found or context not initialized`),null;const o=Ce._createSourceNode();o.buffer=l;const i=r.createGain();o.connect(i);const p=s.volume!==void 0?s.volume:1,u=((S=w.groups[n.group])==null?void 0:S.gain)||1;i.gain.value=p*u*w.context.masterVolume,s.loop&&(o.loop=!0),s.loopStart&&(o.loopStart=s.loopStart),s.loopEnd&&(o.loopEnd=s.loopEnd),s.playbackRate&&(o.playbackRate.value=s.playbackRate),s.position&&s.position.length===3?Ce._create3DSource(o,s.position,s).connect(r.masterGain||r.destination):i.connect(r.masterGain||r.destination);const y=()=>{w.sources.active.delete(o),s.position&&w.spatial.sources.delete(o)};o.onended=y;const k=s.when||0,b=s.offset||0,D=s.duration;return D?o.start(k,b,D):o.start(k,b),w.sources.active.set(o,{id:t,startTime:r.currentTime+k,group:n.group,gainNode:i,options:s}),o},_createSourceNode:()=>{const t=w.context.instance;return w.sources.pool.length>0?w.sources.pool.pop():t.createBufferSource()},_create3DSource:(t,s,r={})=>{const l=w.context.instance.createPanner();return l.panningModel=r.panningModel||"HRTF",l.distanceModel=r.distanceModel||"inverse",l.refDistance=r.refDistance||1,l.maxDistance=r.maxDistance||1e4,l.rolloffFactor=r.rolloffFactor||1,l.coneInnerAngle=r.coneInnerAngle||360,l.coneOuterAngle=r.coneOuterAngle||0,l.coneOuterGain=r.coneOuterGain||0,l.positionX.value=s[0],l.positionY.value=s[1],l.positionZ.value=s[2],r.orientation&&(l.orientationX.value=r.orientation[0],l.orientationY.value=r.orientation[1],l.orientationZ.value=r.orientation[2]),t.connect(l),w.spatial.sources.set(t,{panner:l,position:[...s],options:r}),l},stopSound:t=>{typeof t=="string"?w.sources.active.forEach((s,r)=>{s.id===t&&r.stop()}):t.stop()},stopAllSounds:(t=null)=>{w.sources.active.forEach((s,r)=>{(!t||s.group===t)&&r.stop()})},setMasterVolume:t=>{w.context.masterVolume=Math.max(0,Math.min(1,t));const s=w.context.instance;s&&s.masterGain&&(s.masterGain.gain.value=w.context.masterVolume)},setGroupVolume:(t,s)=>{w.groups[t]&&(w.groups[t].gain=Math.max(0,Math.min(1,s)),w.sources.active.forEach(r=>{if(r.group===t&&r.gainNode){const n=r.options,l=n.volume!==void 0?n.volume:1;r.gainNode.gain.value=l*s*w.context.masterVolume}}))},muteGroup:(t,s=!0)=>{w.groups[t]&&(w.groups[t].muted=s,Ce.setGroupVolume(t,s?0:w.groups[t].gain))},setListenerPosition:(t,s,r)=>{w.spatial.listener.position[0]=t,w.spatial.listener.position[1]=s,w.spatial.listener.position[2]=r;const n=w.context.instance;n&&n.listener&&(n.listener.positionX?(n.listener.positionX.value=t,n.listener.positionY.value=s,n.listener.positionZ.value=r):n.listener.setPosition(t,s,r))},setListenerOrientation:(t,s,r,n,l,o)=>{w.spatial.listener.orientation[0]=t,w.spatial.listener.orientation[1]=s,w.spatial.listener.orientation[2]=r,w.spatial.listener.orientation[3]=n,w.spatial.listener.orientation[4]=l,w.spatial.listener.orientation[5]=o;const i=w.context.instance;i&&i.listener&&(i.listener.forwardX?(i.listener.forwardX.value=t,i.listener.forwardY.value=s,i.listener.forwardZ.value=r,i.listener.upX.value=n,i.listener.upY.value=l,i.listener.upZ.value=o):i.listener.setOrientation(t,s,r,n,l,o))},updateSourcePosition:(t,s)=>{const r=w.spatial.sources.get(t);r&&(r.position[0]=s[0],r.position[1]=s[1],r.position[2]=s[2],r.panner.positionX.value=s[0],r.panner.positionY.value=s[1],r.panner.positionZ.value=s[2])},enableAnalysis:()=>{const t=w.context.instance;t&&(t.analyser||(t.analyser=t.createAnalyser(),t.analyser.fftSize=512,t.analyser.smoothingTimeConstant=.8,t.masterGain&&t.masterGain.connect(t.analyser)),w.analysis.enabled=!0,Ce._startAnalysis())},disableAnalysis:()=>{w.analysis.enabled=!1},_startAnalysis:()=>{const t=w.context.instance;if(!t||!t.analyser||!w.analysis.enabled)return;const s=t.analyser,r=()=>{if(!w.analysis.enabled)return;s.getByteFrequencyData(w.analysis.frequency),s.getFloatTimeDomainData(w.analysis.waveform);let n=0,l=0;for(let o=0;o<w.analysis.waveform.length;o++){const i=Math.abs(w.analysis.waveform[o]);n+=i,l=Math.max(l,i)}w.analysis.volume=n/w.analysis.waveform.length,w.analysis.peak=l,requestAnimationFrame(r)};requestAnimationFrame(r)},isPlaying:t=>{for(const[s,r]of w.sources.active)if(r.id===t)return!0;return!1},getActiveSourceCount:()=>w.sources.active.size,preloadSounds:async t=>{const s=t.map(({id:r,url:n,group:l})=>Ce.loadSound(r,n,l));return Promise.allSettled(s)}};typeof window<"u"&&setInterval(()=>{const t=w.context.instance;t&&w.sources.active.forEach((s,r)=>{var n;(r.playbackState===r.FINISHED_STATE||s.startTime+(((n=r.buffer)==null?void 0:n.duration)||0)<t.currentTime)&&(w.sources.active.delete(r),w.spatial.sources.delete(r),w.sources.pool.length<w.sources.maxSources/2&&w.sources.pool.push(r))})},1e3);const jt=t=>({...ke(w),...Ce});function Vt(){const{initAudio:t,context:s}=jt();return te(()=>{const r=async()=>{s||(await t(),document.removeEventListener("click",r),document.removeEventListener("keydown",r))};return document.addEventListener("click",r),document.addEventListener("keydown",r),()=>{document.removeEventListener("click",r),document.removeEventListener("keydown",r)}},[t,s]),null}const f=Se({time:{current:0,delta:0,lastFrame:0,scale:1,paused:!1,startTime:0},performance:{frameCount:0,fps:0,avgFrameTime:0,maxFrameTime:0,minFrameTime:1/0,last60Frames:[]},timers:{oneShot:new Map,recurring:new Map,frame:new Map},loop:{animationFrameId:null,isRunning:!1,callbacks:new Map,systems:[]},scheduling:{timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,realTime:Date.now(),gameTime:0,events:new Map}}),Ne={start:()=>{if(f.loop.isRunning)return;f.loop.isRunning=!0,f.time.lastFrame=performance.now(),f.time.startTime=f.time.lastFrame;const t=s=>{if(!f.loop.isRunning)return;const r=s-f.time.lastFrame,n=r*f.time.scale,l=f.time.paused?0:n;f.time.delta=l,f.time.current+=l,f.time.lastFrame=s,Ne._updatePerformance(r,s),Ne._updateTimers(l,s),f.loop.systems.forEach(o=>{try{o(l,f.time.current,s)}catch(i){console.error("System update error:",i)}}),f.loop.callbacks.forEach(o=>{try{o(l,f.time.current,s)}catch(i){console.error("Loop callback error:",i)}}),typeof window<"u"&&window.inputActions&&window.inputActions.clearFrameEvents(),f.loop.animationFrameId=requestAnimationFrame(t)};f.loop.animationFrameId=requestAnimationFrame(t)},stop:()=>{f.loop.animationFrameId&&(cancelAnimationFrame(f.loop.animationFrameId),f.loop.animationFrameId=null),f.loop.isRunning=!1},pause:()=>{f.time.paused=!0},resume:()=>{f.time.paused=!1,f.time.lastFrame=performance.now()},togglePause:()=>{f.time.paused?Ne.resume():Ne.pause()},setTimeScale:t=>{f.time.scale=Math.max(0,t)},reset:()=>{f.time.current=0,f.time.delta=0,f.performance.frameCount=0,f.performance.fps=0,f.performance.avgFrameTime=0,f.performance.maxFrameTime=0,f.performance.minFrameTime=1/0,f.performance.last60Frames.length=0,f.time.startTime=performance.now()},_updatePerformance:(t,s)=>{f.performance.frameCount++,f.performance.maxFrameTime=Math.max(f.performance.maxFrameTime,t),f.performance.minFrameTime=Math.min(f.performance.minFrameTime,t);const r=f.performance.frameCount;if(f.performance.avgFrameTime=(f.performance.avgFrameTime*(r-1)+t)/r,f.performance.last60Frames.push(s),f.performance.last60Frames.length>60&&f.performance.last60Frames.shift(),f.performance.last60Frames.length>=2){const n=s-f.performance.last60Frames[0];f.performance.fps=Math.round((f.performance.last60Frames.length-1)*1e3/n)}},setTimeout:(t,s,r)=>{const n={callback:s,delay:r,startTime:f.time.current,triggered:!1};return f.timers.oneShot.set(t,n),t},setInterval:(t,s,r)=>{const n={callback:s,interval:r,lastTrigger:f.time.current,active:!0};return f.timers.recurring.set(t,n),t},setFrameTimer:(t,s,r)=>{const n={callback:s,frameInterval:r,lastFrame:f.performance.frameCount,active:!0};return f.timers.frame.set(t,n),t},clearTimer:t=>{f.timers.oneShot.delete(t),f.timers.recurring.delete(t),f.timers.frame.delete(t)},_updateTimers:(t,s)=>{const r=f.time.current,n=f.performance.frameCount,l=[];f.timers.oneShot.forEach((o,i)=>{!o.triggered&&r-o.startTime>=o.delay&&(o.triggered=!0,o.callback(r,t),l.push(i))}),l.forEach(o=>{f.timers.oneShot.delete(o)}),f.timers.recurring.forEach((o,i)=>{o.active&&r-o.lastTrigger>=o.interval&&(o.callback(r,t),o.lastTrigger=r)}),f.timers.frame.forEach((o,i)=>{o.active&&n-o.lastFrame>=o.frameInterval&&(o.callback(n,t),o.lastFrame=n)})},registerSystem:(t,s=0)=>{const r={callback:t,priority:s},n=f.loop.systems.findIndex(l=>l.priority>s);return n===-1?f.loop.systems.push(r):f.loop.systems.splice(n,0,r),()=>{const l=f.loop.systems.indexOf(r);l>=0&&f.loop.systems.splice(l,1)}},registerCallback:(t,s)=>(f.loop.callbacks.set(t,s),()=>{f.loop.callbacks.delete(t)}),unregisterCallback:t=>{f.loop.callbacks.delete(t)},updateRealTime:()=>{f.scheduling.realTime=Date.now()},setGameTime:t=>{f.scheduling.gameTime=t},advanceGameTime:t=>{f.scheduling.gameTime+=t},scheduleEvent:(t,s,r,n=!1)=>{const l={callback:s,triggerTime:r,useGameTime:n,triggered:!1};f.scheduling.events.set(t,l)},cancelEvent:t=>{f.scheduling.events.delete(t)},_processScheduledEvents:()=>{const t=[];f.scheduling.events.forEach((s,r)=>{if(s.triggered)return;const n=s.useGameTime?f.scheduling.gameTime:f.scheduling.realTime;n>=s.triggerTime&&(s.triggered=!0,s.callback(n),t.push(r))}),t.forEach(s=>{f.scheduling.events.delete(s)})},now:()=>f.time.current,dt:()=>f.time.delta,since:t=>f.time.current-t,realTime:()=>f.scheduling.realTime,gameTime:()=>f.scheduling.gameTime,formatTime:(t,s="mm:ss")=>{const r=Math.floor(t/1e3),n=Math.floor(r/60),l=r%60,o=Math.floor(t%1e3);switch(s){case"mm:ss":return`${n.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`;case"mm:ss.ms":return`${n.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}.${o.toString().padStart(3,"0")}`;case"seconds":return(t/1e3).toFixed(2);default:return t.toString()}},lerp:(t,s,r)=>t+(s-t)*r,smoothstep:(t,s,r)=>{const n=Math.max(0,Math.min(1,(r-t)/(s-t)));return n*n*(3-2*n)},easeInOut:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2};typeof window<"u"&&(setInterval(()=>{Ne.updateRealTime(),Ne._processScheduledEvents()},1e3),document.addEventListener("visibilitychange",()=>{document.hidden?Ne.pause():Ne.resume()}));const qe=t=>{const s=ke(f);return t?t(s):{...s,...Ne}};function Ht(){const{start:t,stop:s}=qe();return te(()=>(t(),()=>{s()}),[]),te(()=>{const r=kt.getState().clearFrameEvents;return qe.subscribe(l=>{l.deltaTime>0&&r()})},[]),te(()=>{const r=()=>{const{pause:n,resume:l,isPaused:o,isRunning:i}=qe.getState();document.hidden&&i&&!o?n():!document.hidden&&i&&o&&l()};return document.addEventListener("visibilitychange",r),()=>{document.removeEventListener("visibilitychange",r)}},[]),null}const U=Se({entities:new Map,entityCounter:0,sceneRoot:null,selectedEntity:null,spatialIndex:new Map,components:{transform:new Map,mesh:new Map,light:new Map,camera:new Map,script:new Map,physics:new Map,audio:new Map},queryCache:new Map,cacheVersion:0}),pe={createEntity:(t="Entity")=>{const s=U.entityCounter+1,r={id:s,name:`${t}_${s}`,active:!0,parent:null,children:[],components:new Set};return U.entities.set(s,r),U.entityCounter=s,pe.invalidateQueryCache(),s},destroyEntity:t=>{const s=U.entities.get(t);s&&(s.components.forEach(r=>{pe.removeComponent(t,r)}),s.parent&&pe.removeChild(s.parent,t),s.children.forEach(r=>{pe.destroyEntity(r)}),U.entities.delete(t),pe.invalidateQueryCache())},getEntity:t=>U.entities.get(t),setEntityActive:(t,s)=>{const r=U.entities.get(t);r&&(r.active=s,pe.invalidateQueryCache())},addChild:(t,s)=>{const r=U.entities.get(t),n=U.entities.get(s);!r||!n||(n.parent&&pe.removeChild(n.parent,s),r.children.push(s),n.parent=t)},removeChild:(t,s)=>{const r=U.entities.get(t),n=U.entities.get(s);if(!r||!n)return;const l=r.children.indexOf(s);l>=0&&r.children.splice(l,1),n.parent=null},addComponent:(t,s,r={})=>{const n=U.entities.get(t);n&&(U.components[s].set(t,r),n.components.add(s),pe.invalidateQueryCache())},removeComponent:(t,s)=>{const r=U.entities.get(t);r&&(U.components[s].delete(t),r.components.delete(s),pe.invalidateQueryCache())},getComponent:(t,s)=>{var r;return(r=U.components[s])==null?void 0:r.get(t)},updateComponent:(t,s,r)=>{var l;const n=(l=U.components[s])==null?void 0:l.get(t);n&&Object.assign(n,r)},hasComponent:(t,s)=>{var r;return((r=U.components[s])==null?void 0:r.has(t))||!1},getEntitiesWith:(...t)=>{const s=t.sort().join(","),r=U.queryCache.get(s);if(r&&r.version===U.cacheVersion)return r.result;const n=[];return U.entities.forEach((l,o)=>{t.every(p=>l.components.has(p))&&l.active&&n.push({id:o,entity:l,components:t.reduce((p,u)=>(p[u]=U.components[u].get(o),p),{})})}),U.queryCache.set(s,{result:n,version:U.cacheVersion}),n},getEntitiesWithAny:(...t)=>{const s=[];return U.entities.forEach((r,n)=>{if(t.some(o=>r.components.has(o))&&r.active){const o=t.reduce((i,p)=>(r.components.has(p)&&(i[p]=U.components[p].get(n)),i),{});s.push({id:n,entity:r,components:o})}}),s},selectEntity:t=>{U.selectedEntity=t},setSceneRoot:t=>{U.sceneRoot=t},clear:()=>{U.entities.clear(),U.entityCounter=0,U.selectedEntity=null,U.sceneRoot=null,Object.values(U.components).forEach(t=>{t.clear()}),U.queryCache.clear(),U.cacheVersion=0},invalidateQueryCache:()=>{U.cacheVersion++},batchUpdate:t=>{t.forEach(s=>{switch(s.type){case"createEntity":pe.createEntity(s.name);break;case"addComponent":pe.addComponent(s.entityId,s.componentType,s.data);break;case"updateComponent":pe.updateComponent(s.entityId,s.componentType,s.updates);break}})},updateSpatialIndex:(t,s)=>{U.spatialIndex.set(t,s)},removeSpatialIndex:t=>{U.spatialIndex.delete(t)},getEntitiesInRegion:t=>{const s=[];return U.spatialIndex.forEach((r,n)=>{if($t(t,r)){const l=U.entities.get(n);l&&l.active&&s.push(n)}}),s}};function $t(t,s){return!(t.max.x<s.min.x||t.min.x>s.max.x||t.max.y<s.min.y||t.min.y>s.max.y||t.max.z<s.min.z||t.min.z>s.max.z)}typeof window<"u"&&vt(U.components.transform,()=>{U.components.transform.forEach((t,s)=>{if(t.position&&t.scale){const r={min:{x:t.position[0]-t.scale[0]/2,y:t.position[1]-t.scale[1]/2,z:t.position[2]-t.scale[2]/2},max:{x:t.position[0]+t.scale[0]/2,y:t.position[1]+t.scale[1]/2,z:t.position[2]+t.scale[2]/2}};pe.updateSpatialIndex(s,r)}})});const Gt=t=>({...ke(U),...pe});function Ut(){const{createEntity:t,addComponent:s,setSceneRoot:r}=Gt();return te(()=>{const n=t("SceneRoot");return r(n),s(n,"transform",{position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]}),()=>{}},[t,s,r]),null}const O=Se({world:{instance:null,gravity:[0,-9.81,0],timeStep:1/60,maxSubSteps:10,enabled:!0,paused:!1},bodies:new Map,collisions:{current:[],matrix:new Map,callbacks:new Map},settings:{broadphase:"naive",solver:"gs",iterations:10,tolerance:1e-7,allowSleep:!0,sleepSpeedLimit:.1,sleepTimeLimit:1,contactSkin:.05},raycasting:{results:[],queries:new Map},performance:{stepTime:0,bodyCount:0,constraintCount:0,collisionPairCount:0}}),Pe={initPhysics:()=>{const t={bodies:[],gravity:O.world.gravity,step:s=>{const r=performance.now();t.bodies.forEach(n=>{if(!n.static&&n.velocity&&O.world.enabled){n.velocity[1]+=t.gravity[1]*s,n.position[0]+=n.velocity[0]*s,n.position[1]+=n.velocity[1]*s,n.position[2]+=n.velocity[2]*s,n.position[1]<0&&n.velocity[1]<0&&(n.position[1]=0,n.velocity[1]*=-n.material.restitution,Pe._triggerCollision(n.entityId,"ground"));const l=.99;n.velocity[0]*=l,n.velocity[1]*=l,n.velocity[2]*=l}}),O.performance.stepTime=performance.now()-r,O.performance.bodyCount=t.bodies.length}};O.world.instance=t},setGravity:(t,s,r)=>{O.world.gravity[0]=t,O.world.gravity[1]=s,O.world.gravity[2]=r,O.world.instance&&(O.world.instance.gravity=[t,s,r])},setEnabled:t=>{O.world.enabled=t},setPaused:t=>{O.world.paused=t},createRigidBody:(t,s={})=>{const r={entityId:t,position:s.position?[...s.position]:[0,0,0],rotation:s.rotation?[...s.rotation]:[0,0,0],velocity:s.velocity?[...s.velocity]:[0,0,0],angularVelocity:s.angularVelocity?[...s.angularVelocity]:[0,0,0],mass:s.mass||1,static:s.static||!1,kinematic:s.kinematic||!1,shape:{type:s.shape||"box",size:s.size?[...s.size]:[1,1,1],radius:s.radius||.5},material:{friction:s.friction||.4,restitution:s.restitution||.3,density:s.density||1},collisionGroup:s.collisionGroup||1,collisionMask:s.collisionMask||-1,sleeping:!1,sleepTime:0,forces:[],impulses:[]};return O.world.instance&&O.world.instance.bodies.push(r),O.bodies.set(t,r),r},removeRigidBody:t=>{if(O.bodies.get(t)){if(O.world.instance){const r=O.world.instance.bodies.findIndex(n=>n.entityId===t);r>=0&&O.world.instance.bodies.splice(r,1)}O.bodies.delete(t)}},updateRigidBody:(t,s)=>{const r=O.bodies.get(t);r&&Object.assign(r,s)},getRigidBody:t=>O.bodies.get(t),applyForce:(t,s,r)=>{const n=O.bodies.get(t);!n||n.static||n.forces.push({force:[...s],point:r?[...r]:null})},applyImpulse:(t,s,r)=>{const n=O.bodies.get(t);!n||n.static||(n.velocity[0]+=s[0]/n.mass,n.velocity[1]+=s[1]/n.mass,n.velocity[2]+=s[2]/n.mass)},applyTorque:(t,s)=>{const r=O.bodies.get(t);!r||r.static||(r.angularVelocity[0]+=s[0],r.angularVelocity[1]+=s[1],r.angularVelocity[2]+=s[2])},setVelocity:(t,s)=>{const r=O.bodies.get(t);r&&(r.velocity[0]=s[0],r.velocity[1]=s[1],r.velocity[2]=s[2])},setPosition:(t,s)=>{const r=O.bodies.get(t);r&&(r.position[0]=s[0],r.position[1]=s[1],r.position[2]=s[2])},setRotation:(t,s)=>{const r=O.bodies.get(t);r&&(r.rotation[0]=s[0],r.rotation[1]=s[1],r.rotation[2]=s[2])},step:t=>{if(!O.world.instance||!O.world.enabled||O.world.paused)return;const s=Math.min(t,O.world.timeStep),r=Math.ceil(t/s),n=Math.min(r,O.world.maxSubSteps);for(let l=0;l<n;l++)O.world.instance.step(s);Pe._processForces(),Pe.detectCollisions()},_processForces:()=>{O.bodies.forEach(t=>{t.static||(t.forces.forEach(({force:s,point:r})=>{t.velocity[0]+=s[0]/t.mass*O.world.timeStep,t.velocity[1]+=s[1]/t.mass*O.world.timeStep,t.velocity[2]+=s[2]/t.mass*O.world.timeStep}),t.forces.length=0,t.impulses.length=0)})},detectCollisions:()=>{const t=Array.from(O.bodies.values()),s=[];for(let r=0;r<t.length;r++)for(let n=r+1;n<t.length;n++){const l=t[r],o=t[n];if(!(l.collisionGroup&o.collisionMask)||!(o.collisionGroup&l.collisionMask))continue;const i=Math.sqrt(Math.pow(l.position[0]-o.position[0],2)+Math.pow(l.position[1]-o.position[1],2)+Math.pow(l.position[2]-o.position[2],2)),p=(l.shape.size[0]+o.shape.size[0])/2;if(i<p){const u={bodyA:l.entityId,bodyB:o.entityId,distance:i,normal:[(o.position[0]-l.position[0])/i,(o.position[1]-l.position[1])/i,(o.position[2]-l.position[2])/i],penetration:p-i};s.push(u),Pe._triggerCollision(l.entityId,o.entityId,u)}}O.collisions.current=s,O.performance.collisionPairCount=s.length},_triggerCollision:(t,s,r=null)=>{const n=O.collisions.callbacks.get(t);n&&n(t,s,r)},onCollision:(t,s)=>{O.collisions.callbacks.set(t,s)},offCollision:t=>{O.collisions.callbacks.delete(t)},raycast:(t,s,r={})=>{const n=Array.from(O.bodies.values()),l=[];return n.forEach(o=>{const i=o.position,p={body:o.entityId,point:i,normal:[0,1,0],distance:Math.sqrt(Math.pow(i[0]-t[0],2)+Math.pow(i[1]-t[1],2)+Math.pow(i[2]-t[2],2))};l.push(p)}),l.sort((o,i)=>o.distance-i.distance),O.raycasting.results=l,l},addRayQuery:(t,s,r,n={})=>{O.raycasting.queries.set(t,{from:s,to:r,options:n,results:[]})},removeRayQuery:t=>{O.raycasting.queries.delete(t)},updateRayQueries:()=>{O.raycasting.queries.forEach((t,s)=>{t.results=Pe.raycast(t.from,t.to,t.options)})},updateSettings:t=>{Object.assign(O.settings,t)},createConstraint:(t,s,r,n={})=>({bodyA:t,bodyB:s,type:r,options:n})};typeof window<"u"&&setInterval(()=>{O.raycasting.queries.size>0&&Pe.updateRayQueries()},16);const Xt=t=>({...ke(O),...Pe});function _t(){const{initPhysics:t,step:s}=Xt(),r=qe(n=>n.deltaTime);return te(()=>{t()},[t]),te(()=>{r>0&&s(r/1e3)},[r,s]),null}const q=Se({assets:{textures:new Map,models:new Map,sounds:new Map,materials:new Map,animations:new Map,fonts:new Map},loading:{active:new Map,queue:[],progress:{total:0,loaded:0,percentage:0}},metadata:{loaded:new Map,errors:new Map,dependencies:new Map},cache:{maxSize:100*1024*1024,currentSize:0,enabled:!0,strategy:"lru"}}),oe={loadAsset:async(t,s,r,n={})=>{if(oe.isLoaded(t))return oe.getAsset(t,r);q.loading.active.set(t,{type:r,url:s,progress:0,startTime:Date.now()});try{let l;switch(r){case"texture":l=await oe._loadTexture(t,s,n);break;case"model":l=await oe._loadModel(t,s,n);break;case"sound":l=await oe._loadSound(t,s,n);break;default:throw new Error(`Unsupported asset type: ${r}`)}return q.assets[`${r}s`].set(t,l),q.metadata.loaded.set(t,{...l,loadedAt:Date.now(),accessCount:0,lastAccessed:Date.now()}),l.size&&(q.cache.currentSize+=l.size),q.loading.active.delete(t),oe.updateProgress(),l}catch(l){throw q.metadata.errors.set(t,l.message),q.loading.active.delete(t),oe.updateProgress(),l}},_loadTexture:async(t,s,r={})=>{const l=await(await fetch(s)).blob(),o=URL.createObjectURL(l);return{id:t,url:o,originalUrl:s,type:"texture",format:r.format||"auto",flipY:r.flipY!==!1,wrapS:r.wrapS||"repeat",wrapT:r.wrapT||"repeat",minFilter:r.minFilter||"linear",magFilter:r.magFilter||"linear",size:l.size}},_loadModel:async(t,s,r={})=>{const l=await(await fetch(s)).arrayBuffer();return{id:t,url:s,type:"model",data:l,format:r.format||s.split(".").pop().toLowerCase(),size:l.byteLength}},_loadSound:async(t,s,r={})=>{const l=await(await fetch(s)).arrayBuffer();return{id:t,url:s,type:"sound",data:l,format:r.format||s.split(".").pop().toLowerCase(),volume:r.volume||1,loop:r.loop||!1,size:l.byteLength}},loadAssets:async t=>{const s=new Map;t.forEach(l=>{l.dependencies&&s.set(l.id,l.dependencies)});const r=oe._topologicalSort(t,s);q.loading.progress.total=r.length,q.loading.progress.loaded=0;const n=[];for(const l of r)try{const o=await oe.loadAsset(l.id,l.url,l.type,l.options);n.push({status:"fulfilled",value:o}),q.loading.progress.loaded++}catch(o){n.push({status:"rejected",reason:o})}return n},getAsset:(t,s)=>{const r=q.assets[`${s}s`].get(t);if(r){const n=q.metadata.loaded.get(t);n&&(n.accessCount++,n.lastAccessed=Date.now())}return r},getTexture:t=>oe.getAsset(t,"texture"),getModel:t=>oe.getAsset(t,"model"),getSound:t=>oe.getAsset(t,"sound"),getMaterial:t=>oe.getAsset(t,"material"),unloadAsset:t=>{let s=0;Object.entries(q.assets).forEach(([r,n])=>{var o;const l=n.get(t);l&&(l.size&&(s+=l.size),r==="textures"&&((o=l.url)!=null&&o.startsWith("blob:"))&&URL.revokeObjectURL(l.url),n.delete(t))}),q.metadata.loaded.delete(t),q.metadata.errors.delete(t),q.cache.currentSize=Math.max(0,q.cache.currentSize-s)},clearCache:()=>{q.assets.textures.forEach(t=>{var s;(s=t.url)!=null&&s.startsWith("blob:")&&URL.revokeObjectURL(t.url)}),Object.values(q.assets).forEach(t=>{t.clear()}),q.metadata.loaded.clear(),q.metadata.errors.clear(),q.cache.currentSize=0},evictAssets:t=>{const s=[];switch(q.metadata.loaded.forEach((n,l)=>{s.push({id:l,...n})}),q.cache.strategy){case"lru":s.sort((n,l)=>n.lastAccessed-l.lastAccessed);break;case"lfu":s.sort((n,l)=>n.accessCount-l.accessCount);break;case"fifo":s.sort((n,l)=>n.loadedAt-l.loadedAt);break}let r=0;for(const n of s){if(r>=t)break;r+=n.size||0,oe.unloadAsset(n.id)}},checkCacheSize:()=>{if(q.cache.currentSize>q.cache.maxSize){const t=q.cache.currentSize-q.cache.maxSize;oe.evictAssets(t)}},updateProgress:()=>{const t=q.metadata.loaded.size,s=t+q.loading.active.size;q.loading.progress.loaded=t,q.loading.progress.total=Math.max(s,q.loading.progress.total),q.loading.progress.percentage=q.loading.progress.total>0?t/q.loading.progress.total*100:0},isLoading:t=>q.loading.active.has(t),hasError:t=>q.metadata.errors.has(t),isLoaded:t=>q.metadata.loaded.has(t),_topologicalSort:(t,s)=>{const r=new Set,n=[],l=new Set,o=i=>{if(l.has(i.id))throw new Error(`Circular dependency detected: ${i.id}`);if(r.has(i.id))return;l.add(i.id);const p=s.get(i.id)||[];for(const u of p){const y=t.find(k=>k.id===u);y&&o(y)}l.delete(i.id),r.add(i.id),n.push(i)};return t.forEach(o),n}};typeof window<"u"&&setInterval(()=>{q.cache.enabled&&oe.checkCacheSize()},3e4);const it=t=>{const s=ke(q);return t?t(s):{...s,...oe}};function qt(){const{checkCacheSize:t}=it();return te(()=>{const s=setInterval(()=>{t()},3e4);return()=>{clearInterval(s)}},[t]),te(()=>{const s=()=>{const{clearCache:r}=it.getState();r()};return window.addEventListener("beforeunload",s),()=>{window.removeEventListener("beforeunload",s)}},[]),null}const d={Cube3D:({isHovered:t=!1,...s})=>a("svg",{viewBox:"0 0 24 24",fill:"none",...s,children:[e("path",{d:"M12 2L2 7v10l10 5 10-5V7l-10-5z",fill:"#60A5FA",stroke:t?"#2563eb":"#1E40AF",strokeWidth:t?"2":"1",strokeLinejoin:"round"}),e("path",{d:"M2 7l10 5 10-5",stroke:"#1E40AF",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"}),e("path",{d:"M12 12v10",stroke:"#1E40AF",strokeWidth:"1",strokeLinecap:"round"})]}),Mesh:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",...t,children:[e("defs",{children:a("linearGradient",{id:"mesh-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e("stop",{offset:"0%",stopColor:"#F59E0B"}),e("stop",{offset:"100%",stopColor:"#D97706"})]})}),e("path",{d:"M4 4h16v16H4z",fill:"url(#mesh-gradient)",stroke:"#92400E",strokeWidth:"1",opacity:"0.3"}),e("path",{d:"M4 8h16M4 12h16M4 16h16",stroke:"#92400E",strokeWidth:"1"}),e("path",{d:"M8 4v16M12 4v16M16 4v16",stroke:"#92400E",strokeWidth:"1"}),e("circle",{cx:"4",cy:"4",r:"1.5",fill:"#FCD34D"}),e("circle",{cx:"20",cy:"4",r:"1.5",fill:"#FCD34D"}),e("circle",{cx:"4",cy:"20",r:"1.5",fill:"#FCD34D"}),e("circle",{cx:"20",cy:"20",r:"1.5",fill:"#FCD34D"})]}),Select:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",...t,children:[e("path",{d:"M3 3L9.5 20.5L12 13L20.5 9.5L3 3Z",strokeLinejoin:"round"}),e("path",{d:"M13 13L21 21",strokeLinecap:"round"})]}),Camera:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",...t,children:[e("rect",{x:"2",y:"8",width:"20",height:"12",rx:"2",strokeLinejoin:"round"}),e("path",{d:"M7 8L9 5H15L17 8",strokeLinejoin:"round"}),e("circle",{cx:"12",cy:"14",r:"3"}),e("circle",{cx:"12",cy:"14",r:"1.5",fill:"currentColor"})]}),Paint:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",...t,children:[e("path",{d:"M18 3A2.5 2.5 0 0 0 15.5 5.5L7 14L2 22L10 17L18.5 8.5A2.5 2.5 0 0 0 18 3Z",strokeLinejoin:"round"}),e("path",{d:"M15 6L18 9",strokeLinecap:"round"}),e("circle",{cx:"8",cy:"16",r:"1",fill:"currentColor"})]}),Sculpt:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",...t,children:[e("path",{d:"M12 3C8 3 5 6 5 10C5 14 8 17 12 21C16 17 19 14 19 10C19 6 16 3 12 3Z",strokeLinejoin:"round"}),e("path",{d:"M9 10C9 12 10.5 13.5 12 13.5C13.5 13.5 15 12 15 10",strokeLinecap:"round"}),e("circle",{cx:"12",cy:"8",r:"1.5",fill:"currentColor"})]}),Undo:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M3 7v6h6"}),e("path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"})]}),Redo:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M21 7v6h-6"}),e("path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7"})]}),Move:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",...t,children:[e("path",{d:"M12 3L12 21M3 12L21 12",strokeLinecap:"round"}),e("path",{d:"M8 7L12 3L16 7",strokeLinecap:"round",strokeLinejoin:"round"}),e("path",{d:"M16 17L12 21L8 17",strokeLinecap:"round",strokeLinejoin:"round"}),e("path",{d:"M7 8L3 12L7 16",strokeLinecap:"round",strokeLinejoin:"round"}),e("path",{d:"M17 16L21 12L17 8",strokeLinecap:"round",strokeLinejoin:"round"})]}),Rotate:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",...t,children:[e("path",{d:"M12 3v6l4-4-4-4",strokeLinecap:"round",strokeLinejoin:"round"}),e("path",{d:"M21 12a9 9 0 1 1-9-9",strokeLinecap:"round"})]}),Scale:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",...t,children:[e("path",{d:"M21 3L15 9",strokeLinecap:"round"}),e("path",{d:"M21 3H15",strokeLinecap:"round"}),e("path",{d:"M21 3V9",strokeLinecap:"round"}),e("path",{d:"M3 21L9 15",strokeLinecap:"round"}),e("path",{d:"M3 21H9",strokeLinecap:"round"}),e("path",{d:"M3 21V15",strokeLinecap:"round"}),e("rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",fill:"none",opacity:"0.3"})]}),Scene:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:[e("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),e("path",{d:"M3.29 7 12 12l8.71-5"}),e("path",{d:"M12 22V12"})]}),Light:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:[e("path",{d:"M15 9A6 6 0 1 1 9 9C9 10.5 9.5 12 10 13H14C14.5 12 15 10.5 15 9Z",strokeLinejoin:"round"}),e("rect",{x:"10",y:"18",width:"4",height:"4",rx:"0.5",strokeLinejoin:"round"}),e("line",{x1:"9",y1:"18",x2:"15",y2:"18"}),e("line",{x1:"9",y1:"19.5",x2:"15",y2:"19.5"}),e("line",{x1:"9",y1:"21",x2:"15",y2:"21"}),e("circle",{cx:"12",cy:"8",r:"0.5",fill:"currentColor"}),e("circle",{cx:"10.5",cy:"9.5",r:"0.3",fill:"currentColor"}),e("circle",{cx:"13.5",cy:"9.5",r:"0.3",fill:"currentColor"}),e("circle",{cx:"12",cy:"11",r:"0.3",fill:"currentColor"})]}),Effects:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:[e("path",{d:"M13 2L3 14H12L11 22L21 10H12L13 2Z",strokeLinejoin:"round"}),e("path",{d:"M6 6L7 7L6 8L5 7L6 6Z",fill:"currentColor"}),e("path",{d:"M19 4L20 5L19 6L18 5L19 4Z",fill:"currentColor"}),e("path",{d:"M18 16L19 17L18 18L17 17L18 16Z",fill:"currentColor"}),e("path",{d:"M4 15L5 16L4 17L3 16L4 15Z",fill:"currentColor"}),e("circle",{cx:"20",cy:"8",r:"0.5",fill:"currentColor"}),e("circle",{cx:"4",cy:"10",r:"0.5",fill:"currentColor"})]}),Code:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:[e("path",{d:"M16 18L22 12L16 6"}),e("path",{d:"M8 6L2 12L8 18"}),e("path",{d:"M10 20L14 4"})]}),FolderOpen:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:e("path",{d:"M22 19A2 2 0 0 1 20 21H4A2 2 0 0 1 2 19V5A2 2 0 0 1 4 3H9L11 6H20A2 2 0 0 1 22 8Z"})}),Star:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:e("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})}),Wifi:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:[e("path",{d:"M5 12.55A11 11 0 0 1 19 12.55"}),e("path",{d:"M1.42 9A16 16 0 0 1 22.58 9"}),e("path",{d:"M8.53 16.11A6 6 0 0 1 15.47 16.11"}),e("circle",{cx:"12",cy:"20",r:"1"})]}),Cloud:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:e("path",{d:"M18 10H20A4 4 0 0 1 20 18H6A6 6 0 0 1 6 6C6 4.5 7 3.1 8.5 2.4A8 8 0 0 1 18 10Z"})}),PlusCircle:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:[e("circle",{cx:"12",cy:"12",r:"10"}),e("path",{d:"M8 12H16"}),e("path",{d:"M12 8V16"})]}),Monitor:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:[e("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),e("path",{d:"M8 21H16"}),e("path",{d:"M12 17V21"})]}),MenuBars:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:[e("path",{d:"M3 12H15"}),e("path",{d:"M3 6H21"}),e("path",{d:"M3 18H21"})]}),Settings:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),ChevronDown:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:e("path",{d:"m6 9 6 6 6-6"})}),ChevronRight:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:e("path",{d:"m9 18 6-6-6-6"})}),ChevronUp:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:e("path",{d:"m18 15-6-6-6 6"})}),Eye:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),e("circle",{cx:"12",cy:"12",r:"3"})]}),EyeSlash:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24"}),e("path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"}),e("path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"}),e("path",{d:"m2 2 20 20"})]}),XMark:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"m18 6-12 12"}),e("path",{d:"m6 6 12 12"})]}),Menu:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",...t,children:[e("line",{x1:"4",y1:"6",x2:"20",y2:"6",strokeLinecap:"round"}),e("line",{x1:"4",y1:"12",x2:"20",y2:"12",strokeLinecap:"round"}),e("line",{x1:"4",y1:"18",x2:"20",y2:"18",strokeLinecap:"round"})]}),Plus:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",...t,children:[e("path",{d:"M5 12h14",strokeLinecap:"round"}),e("path",{d:"M12 5v14",strokeLinecap:"round"})]}),Save:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",...t,children:[e("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",strokeLinejoin:"round"}),e("path",{d:"M17 21V13H7V21",strokeLinejoin:"round"}),e("path",{d:"M7 3V8H15",strokeLinejoin:"round"})]}),Upload:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"7,10 12,5 17,10"}),e("line",{x1:"12",y1:"5",x2:"12",y2:"15"})]}),Download:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"7,10 12,15 17,10"}),e("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Folder:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:e("path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"})}),Cog:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),QuestionMark:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("circle",{cx:"12",cy:"12",r:"10"}),e("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e("point",{cx:"12",cy:"17"})]}),MagnifyingGlass:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("circle",{cx:"11",cy:"11",r:"8"}),e("path",{d:"m21 21-4.35-4.35"})]}),Models:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),e("polyline",{points:"3.29,7 12,12 20.71,7"}),e("line",{x1:"12",y1:"22",x2:"12",y2:"12"})]}),Materials:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("circle",{cx:"12",cy:"12",r:"10"}),e("circle",{cx:"12",cy:"12",r:"6"}),e("circle",{cx:"12",cy:"12",r:"2"})]}),Textures:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e("polyline",{points:"21,15 16,10 5,21"})]}),Scripts:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("polyline",{points:"16,18 22,12 16,6"}),e("polyline",{points:"8,6 2,12 8,18"})]}),Plugins:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("rect",{x:"3",y:"3",width:"6",height:"6"}),e("rect",{x:"15",y:"3",width:"6",height:"6"}),e("rect",{x:"3",y:"15",width:"6",height:"6"}),e("rect",{x:"15",y:"15",width:"6",height:"6"})]}),Audio:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("polygon",{points:"11,5 6,9 2,9 2,15 6,15 11,19 11,5"}),e("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"})]}),Animations:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:e("polygon",{points:"5,3 19,12 5,21"})}),Prefabs:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),e("path",{d:"M2 17l10 5 10-5"}),e("path",{d:"M2 12l10 5 10-5"})]}),Character:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})]}),Terrain:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M3 20h18L12 4 3 20z"}),e("path",{d:"M8 20h8"})]}),CodeBracket:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"m16 18 6-6-6-6"}),e("path",{d:"m8 6-6 6 6 6"})]}),Play:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:e("polygon",{points:"5,3 19,12 5,21"})}),AdjustmentsHorizontal:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M8 12H2"}),e("path",{d:"M22 12h-6"}),e("path",{d:"M12 8V2"}),e("path",{d:"M12 22v-6"})]}),Clock:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("circle",{cx:"12",cy:"12",r:"10"}),e("polyline",{points:"12,6 12,12 16,14"})]}),CommandLine:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"m7 8 3 3-3 3"}),e("path",{d:"M14 16h6"}),e("rect",{x:"2",y:"3",width:"20",height:"18",rx:"2"})]}),CursorArrowRays:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:e("path",{d:"M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"})}),ArrowsPointingOut:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M16 8L8 16"}),e("path",{d:"M16 16L8 8"}),e("path",{d:"M16 8h-8v8"})]}),Sun:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("circle",{cx:"12",cy:"12",r:"4"}),e("path",{d:"M12 2v2"}),e("path",{d:"M12 20v2"}),e("path",{d:"m4.93 4.93 1.41 1.41"}),e("path",{d:"m17.66 17.66 1.41 1.41"}),e("path",{d:"M2 12h2"}),e("path",{d:"M20 12h2"}),e("path",{d:"m6.34 17.66-1.41 1.41"}),e("path",{d:"m19.07 4.93-1.41 1.41"})]}),ArrowUturnLeft:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M9 14L4 9l5-5"}),e("path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11"})]}),Pencil:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),e("path",{d:"m15 5 4 4"})]}),Cube:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),e("path",{d:"M3.29 7 12 12l8.71-5"}),e("path",{d:"M12 22V12"})]}),Trash:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M3 6h18"}),e("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),e("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),e("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Circle:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:e("circle",{cx:"12",cy:"12",r:"10"})}),Square:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:e("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"})}),LightBulb:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"}),e("path",{d:"M9 18h6"}),e("path",{d:"M10 22h4"})]}),Flashlight:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M3 11l18-5V5L3 11v5l7-2v-4z"}),e("path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6"})]}),Capsule:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M8.5 2.5a5.5 5.5 0 0 0 0 11h7a5.5 5.5 0 0 0 0-11h-7z"}),e("path",{d:"M8.5 10.5a5.5 5.5 0 0 0 0 11h7a5.5 5.5 0 0 0 0-11h-7z"})]}),Sparkles:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:e("path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.582a.5.5 0 0 1 0 .962L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z"})}),Water:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M12 22c5.523 0 10-4.477 10-10 0-5.4-4.4-9.8-9.8-10a9.8 9.8 0 0 0 0 20z"}),e("path",{d:"M8 14s1.5-2 4-2 4 2 4 2"}),e("path",{d:"M8 18s1.5-2 4-2 4 2 4 2"})]}),AdjustmentsVertical:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M12 8V2"}),e("path",{d:"M12 22v-6"}),e("path",{d:"M8 12H2"}),e("path",{d:"M22 12h-6"})]}),PaintBrush:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M18.37 2.63 14 7l-1.59-1.59a2 2 0 0 0-2.82 0L8 7l9 9 1.59-1.59a2 2 0 0 0 0-2.82L17 10l4.37-4.37a2.12 2.12 0 1 0-3-3Z"}),e("path",{d:"M9 8c-2 3-4 3.5-7 4l8 10c2-1 6-5 6-7"}),e("path",{d:"M14.5 17.5 4.5 15"})]}),ColorSwatch:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),e("path",{d:"M12 4c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"})]}),Clipboard:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),e("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),Copy:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),e("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),DocumentDuplicate:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),e("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"}),e("path",{d:"M9 13h6"}),e("path",{d:"M9 16h6"})]}),Lightning:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:e("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),Mountain:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M8 21l5.5-11.5L19 21"}),e("path",{d:"M2 21h20"}),e("path",{d:"M12 9L8 21l4-12z"})]}),Rectangle:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:e("rect",{x:"3",y:"6",width:"18",height:"12",rx:"2",ry:"2"})}),Square2Stack:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M5 8a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V8z"}),e("path",{d:"M3 12a2 2 0 0 1 2-2h1"}),e("path",{d:"M3 16h1a2 2 0 0 1 2 2v1"})]}),ArrowPath:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M4 12a8 8 0 0 1 8-8V2.5"}),e("path",{d:"M12 4L9 7l3 3"}),e("path",{d:"M20 12a8 8 0 0 1-8 8v1.5"}),e("path",{d:"M12 20l3-3-3-3"})]}),ArrowUp:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M12 19V5"}),e("path",{d:"M5 12l7-7 7 7"})]}),ArrowDown:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M12 5v14"}),e("path",{d:"M19 12l-7 7-7-7"})]}),ArrowRight:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M5 12h14"}),e("path",{d:"M12 5l7 7-7 7"})]}),MinusCircle:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("circle",{cx:"12",cy:"12",r:"10"}),e("path",{d:"M8 12h8"})]}),Fullscreen:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M8 3H3v5"}),e("path",{d:"M3 3l5 5"}),e("path",{d:"M16 3h5v5"}),e("path",{d:"M21 3l-5 5"}),e("path",{d:"M8 21H3v-5"}),e("path",{d:"M3 21l5-5"}),e("path",{d:"M16 21h5v-5"}),e("path",{d:"M21 21l-5-5"})]}),Image:t=>a("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e("circle",{cx:"9",cy:"9",r:"2"}),e("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]})};function Zt(){const[t,s]=N(!1),{topLeftMenuSelected:r,setTopLeftMenuSelected:n}=ge(),l=[{id:"new",label:"New Scene",icon:d.Plus,shortcut:"Ctrl+N"},{id:"open",label:"Open Scene",icon:d.Folder,shortcut:"Ctrl+O"},{id:"save",label:"Save Scene",icon:d.Save,shortcut:"Ctrl+S"},{divider:!0},{id:"import",label:"Import Model",icon:d.Upload,shortcut:"Ctrl+I"},{id:"export",label:"Export Scene",icon:d.Download,shortcut:"Ctrl+E"},{divider:!0},{id:"settings",label:"Settings",icon:d.Cog},{id:"help",label:"Help",icon:d.QuestionMark}];return e(ve,{children:e("div",{className:"absolute top-4 left-4 pointer-events-auto z-30 no-select",children:a("div",{className:"relative",children:[e("button",{onClick:()=>s(!t),className:`w-10 h-10 bg-gray-900/95 backdrop-blur-sm border border-gray-800 rounded-lg shadow-2xl hover:bg-gray-700/50 transition-colors flex items-center justify-center ${t?"bg-gray-700/50":""}`,children:e(d.Menu,{className:"w-5 h-5 text-gray-300"})}),t&&a(ve,{children:[e("div",{className:"fixed inset-0 z-10",onClick:()=>s(!1)}),e("div",{className:"absolute top-full left-0 mt-1 w-56 bg-gradient-to-br from-gray-900/98 to-gray-950/98 backdrop-blur-sm rounded-lg shadow-[0_20px_25px_-5px_rgba(0,0,0,0.4),0_10px_10px_-5px_rgba(0,0,0,0.04)] overflow-hidden z-20 border border-gray-700/50",children:e("div",{className:"p-1.5",children:l.map((o,i)=>o.divider?e("div",{className:"border-t border-gray-700/50 my-2 mx-2"},i):a("button",{className:"w-full px-4 py-2.5 text-left text-sm text-gray-300 hover:bg-gradient-to-r hover:from-blue-600/90 hover:to-blue-500/90 hover:text-white flex items-center justify-between transition-all duration-150 group relative rounded-md hover:shadow-lg",onClick:()=>{s(!1),n(o.id),console.log("Menu item clicked:",o.id)},title:o.label,children:[a("div",{className:"flex items-center gap-3",children:[e("span",{className:"w-5 h-5 flex items-center justify-center text-gray-400 hover:text-white",children:e(o.icon,{className:"w-4.5 h-4.5"})}),e("span",{className:"font-normal",children:o.label})]}),o.shortcut&&e("span",{className:"text-xs text-gray-500",children:o.shortcut})]},o.id))})})]})]})})})}const ot=[{id:"select",icon:d.Select,title:"Select"},{id:"camera",icon:d.Camera,title:"Camera"},{id:"paint",icon:d.Paint,title:"Paint"},{id:"sculpt",icon:d.Sculpt,title:"Sculpt"},{id:"move",icon:d.Move,title:"Move"},{id:"rotate",icon:d.Rotate,title:"Rotate"},{id:"scale",icon:d.Scale,title:"Scale"},{id:"undo",icon:d.Undo,title:"Undo"},{id:"redo",icon:d.Redo,title:"Redo"}];function Yt({selectedTool:t,onToolSelect:s}){const[r,n]=N({visible:!1,text:"",x:0,y:0}),[l,o]=N(null),{transformMode:i,setTransformMode:p}=ge(),u=()=>["select","move","rotate","scale"].includes(i)?i:t,y=(b,D)=>{const S=b.currentTarget.getBoundingClientRect();n({visible:!0,text:D,x:S.right+12,y:S.top+S.height/2})},k=()=>{n({visible:!1,text:"",x:0,y:0})};return a(ve,{children:[e("div",{className:"absolute top-16 left-4 w-10 bg-gradient-to-b from-slate-800/95 to-slate-900/98 backdrop-blur-md border border-slate-700/80 rounded-xl shadow-2xl shadow-black/50 flex flex-col pointer-events-auto overflow-visible no-select",children:ot.map((b,D)=>{const g=u()===b.id;return a("div",{children:[(D===4||D===7)&&e("div",{className:"mx-2 my-1 h-px bg-slate-700/60"}),a("button",{onClick:()=>{b.id==="undo"||b.id==="redo"?(o(b.id),setTimeout(()=>o(null),200),console.log(`${b.id} action triggered`)):(s(b.id),p(b.id))},className:`w-full h-8 flex items-center justify-center transition-all duration-200 relative group ${g&&b.id!=="undo"&&b.id!=="redo"||l===b.id?"bg-gradient-to-b from-blue-500 to-blue-700 text-white shadow-lg shadow-blue-600/40":"text-slate-400 hover:text-white hover:bg-gradient-to-b hover:from-slate-700/80 hover:to-slate-800/90 hover:shadow-md hover:shadow-black/30"} ${D===0?"rounded-t-xl":""} ${D===ot.length-1?"rounded-b-xl":""} ${g&&b.id!=="undo"&&b.id!=="redo"||l===b.id?"scale-105":"hover:scale-102"}`,onMouseEnter:m=>y(m,b.title),onMouseLeave:k,children:[g&&b.id!=="undo"&&b.id!=="redo"&&e("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 bg-blue-400 rounded-r-full"}),e(b.icon,{className:`transition-all duration-200 ${g&&b.id!=="undo"&&b.id!=="redo"||l===b.id?"w-5 h-5":"w-4 h-4 group-hover:w-5 group-hover:h-5"}`})]})]},b.id)})}),r.visible&&a("div",{className:"fixed bg-slate-900 border border-slate-700 text-white text-xs px-2 py-1 rounded pointer-events-none whitespace-nowrap shadow-2xl",style:{left:r.x,top:r.y,transform:"translateY(-50%)",zIndex:9999},children:[e("div",{className:"absolute right-full top-1/2 -translate-y-1/2 border-4 border-transparent border-r-slate-900",style:{borderRightColor:"#0f172a"}}),r.text]})]})}const et=[{id:"scene",icon:d.Scene,title:"Scene"},{id:"light",icon:d.Light,title:"Light"},{id:"effects",icon:d.Effects,title:"Effects"},{id:"folder",icon:d.FolderOpen,title:"Folder"},{id:"star",icon:d.Star,title:"Favorites"},{id:"wifi",icon:d.Wifi,title:"Network"},{id:"cloud",icon:d.Cloud,title:"Cloud"},{id:"monitor",icon:d.Monitor,title:"Display"}],We=[{id:"add",icon:d.PlusCircle,title:"Add"},{id:"settings",icon:d.Settings,title:"Settings"},{id:"fullscreen",icon:d.Fullscreen,title:"Fullscreen"}];function Kt({selectedTool:t,onToolSelect:s,scenePanelOpen:r,onScenePanelToggle:n}){const{toolbarTabOrder:l,toolbarBottomTabOrder:o,setToolbarTabOrder:i,setToolbarBottomTabOrder:p,hydrateFromLocalStorage:u}=ge(),y=()=>{if(!l||!Array.isArray(l))return et;const h=et.reduce((E,V)=>(E[V.id]=V,E),{});return l.map(E=>h[E]).filter(Boolean)},k=()=>{if(!o||!Array.isArray(o))return We;const h=We.reduce((Y,ae)=>(Y[ae.id]=ae,Y),{}),E=o.map(Y=>h[Y]).filter(Boolean),V=new Set(o),B=We.filter(Y=>!V.has(Y.id));return[...E,...B]},[b,D]=N(()=>y()),[S,g]=N(()=>k());te(()=>{const h=et.reduce((V,B)=>(V[B.id]=B,V),{}),E=l.map(V=>h[V]).filter(Boolean);D(E)},[l]),te(()=>{const h=We.reduce((Y,ae)=>(Y[ae.id]=ae,Y),{}),E=o.map(Y=>h[Y]).filter(Boolean),V=new Set(o),B=We.filter(Y=>!V.has(Y.id));g([...E,...B])},[o]);const[m,G]=N({isDragging:!1,draggedTool:null,dragOverTool:null,draggedFromBottom:!1}),M=(h,E,V=!1)=>{h.dataTransfer.effectAllowed="move",h.dataTransfer.setData("text/html","");const B=h.currentTarget.cloneNode(!0);B.style.position="absolute",B.style.top="-1000px",B.style.left="-1000px",B.style.background="linear-gradient(to bottom, rgb(51 65 85 / 0.95), rgb(15 23 42 / 0.98))",B.style.border="1px solid rgb(148 163 184 / 0.5)",B.style.borderRadius="8px",B.style.padding="8px",B.style.boxShadow="0 25px 50px -12px rgb(0 0 0 / 0.5)",B.style.transform="scale(1.1)",B.style.pointerEvents="none",B.style.zIndex="9999";const Y=B.querySelector("svg");Y&&(Y.style.color="#e2e8f0"),document.body.appendChild(B),h.dataTransfer.setDragImage(B,24,24),setTimeout(()=>{document.body.contains(B)&&document.body.removeChild(B)},100),G({isDragging:!0,draggedTool:E,dragOverTool:null,draggedFromBottom:V})},W=(h,E,V=!1)=>{h.preventDefault(),h.dataTransfer.dropEffect="move",m.draggedTool&&m.draggedTool.id!==E.id&&G(B=>({...B,dragOverTool:E}))},K=h=>{const E=h.currentTarget.getBoundingClientRect(),{clientX:V,clientY:B}=h;(V<E.left||V>E.right||B<E.top||B>E.bottom)&&G(Y=>({...Y,dragOverTool:null}))},j=(h,E,V=!1)=>{if(h.preventDefault(),h.stopPropagation(),!m.draggedTool||m.draggedTool.id===E.id){G({isDragging:!1,draggedTool:null,dragOverTool:null,draggedFromBottom:!1});return}const B=m.draggedFromBottom?S:b,Y=V?S:b,ae=m.draggedFromBottom?g:D,ee=V?g:D;if(m.draggedFromBottom!==V){const Q=B.filter(H=>H.id!==m.draggedTool.id);ae(Q);const ce=Y.findIndex(H=>H.id===E.id),re=[...Y];re.splice(ce,0,m.draggedTool),ee(re),m.draggedFromBottom?(p(Q.map(H=>H.id)),i(re.map(H=>H.id))):(i(Q.map(H=>H.id)),p(re.map(H=>H.id)))}else{const Q=B.findIndex(re=>re.id===m.draggedTool.id),ce=B.findIndex(re=>re.id===E.id);if(Q!==-1&&ce!==-1&&Q!==ce){const re=[...B],[H]=re.splice(Q,1);re.splice(ce,0,H),ae(re);const v=re.map(P=>P.id);V?p(v):i(v)}}G({isDragging:!1,draggedTool:null,dragOverTool:null,draggedFromBottom:!1})},I=()=>{G({isDragging:!1,draggedTool:null,dragOverTool:null,draggedFromBottom:!1})},F=h=>{if(!m.isDragging){if(h.id==="fullscreen"){R();return}r||n(),s(h.id)}},R=()=>{document.fullscreenElement?document.exitFullscreen().catch(h=>{console.warn("Error attempting to exit fullscreen:",h)}):document.documentElement.requestFullscreen().catch(h=>{console.warn("Error attempting to enable fullscreen:",h)})};return a("div",{className:"relative w-12 h-full bg-gradient-to-b from-slate-800/95 to-slate-900/98 backdrop-blur-md border-l border-slate-700/80 shadow-2xl shadow-black/30 flex flex-col py-2 pointer-events-auto no-select",children:[e("div",{className:"flex flex-col space-y-1 px-1",children:b.map(h=>{var B,Y;const E=((B=m.draggedTool)==null?void 0:B.id)===h.id,V=((Y=m.dragOverTool)==null?void 0:Y.id)===h.id;return a("button",{draggable:!0,onClick:()=>F(h),onDragStart:ae=>M(ae,h,!1),onDragOver:ae=>W(ae,h,!1),onDragLeave:K,onDrop:ae=>j(ae,h,!1),onDragEnd:I,className:`p-2 rounded-lg transition-all duration-200 group relative select-none ${E?"opacity-50 cursor-grabbing scale-95":t===h.id?"bg-gradient-to-b from-blue-500 to-blue-700 text-white shadow-lg shadow-blue-600/40 scale-105 cursor-grab":"text-slate-400 hover:text-white hover:bg-gradient-to-b hover:from-slate-700/80 hover:to-slate-800/90 hover:shadow-md hover:shadow-black/30 hover:scale-102 cursor-grab"}`,title:h.title,children:[e(h.icon,{className:"w-6 h-6"}),V&&e("div",{className:"absolute inset-x-0 top-0 h-0.5 bg-blue-500 rounded-full"}),!m.isDragging&&a("div",{className:"absolute right-full mr-2 top-1/2 -translate-y-1/2 bg-slate-900 border border-slate-700 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-[60] shadow-2xl",children:[h.title,e("div",{className:"absolute left-full top-1/2 -translate-y-1/2 w-0 h-0 border-l-4 border-l-slate-900 border-t-4 border-t-transparent border-b-4 border-b-transparent"})]})]},h.id)})}),e("div",{className:"flex-1 flex items-center justify-center",onDragOver:h=>{h.preventDefault(),m.draggedTool&&(h.dataTransfer.dropEffect="move")},onDrop:h=>{if(h.preventDefault(),h.stopPropagation(),m.draggedTool){const E=m.draggedFromBottom?S:b,V=m.draggedFromBottom?g:D,B=m.draggedFromBottom?b:S,Y=m.draggedFromBottom?D:g,ae=E.filter(Q=>Q.id!==m.draggedTool.id);V(ae);const ee=[...B,m.draggedTool];Y(ee),m.draggedFromBottom?(p(ae.map(Q=>Q.id)),i(ee.map(Q=>Q.id))):(i(ae.map(Q=>Q.id)),p(ee.map(Q=>Q.id))),G({isDragging:!1,draggedTool:null,dragOverTool:null,draggedFromBottom:!1})}},children:m.isDragging&&e("div",{className:"w-8 h-0.5 bg-blue-500/50 rounded-full opacity-50 transition-opacity"})}),e("div",{className:"flex flex-col space-y-1 px-1",children:S.map(h=>{var B,Y;const E=((B=m.draggedTool)==null?void 0:B.id)===h.id,V=((Y=m.dragOverTool)==null?void 0:Y.id)===h.id;return a("button",{draggable:!0,onClick:()=>F(h),onDragStart:ae=>M(ae,h,!0),onDragOver:ae=>W(ae,h,!0),onDragLeave:K,onDrop:ae=>j(ae,h,!0),onDragEnd:I,className:`p-2 rounded-lg transition-all duration-200 group relative select-none ${E?"opacity-50 cursor-grabbing scale-95":t===h.id?"bg-gradient-to-b from-blue-500 to-blue-700 text-white shadow-lg shadow-blue-600/40 scale-105 cursor-grab":"text-slate-400 hover:text-white hover:bg-gradient-to-b hover:from-slate-700/80 hover:to-slate-800/90 hover:shadow-md hover:shadow-black/30 hover:scale-102 cursor-grab"}`,title:h.title,children:[e(h.icon,{className:"w-6 h-6"}),V&&e("div",{className:"absolute inset-x-0 top-0 h-0.5 bg-blue-500 rounded-full"}),!m.isDragging&&a("div",{className:"absolute right-full mr-2 top-1/2 -translate-y-1/2 bg-slate-900 border border-slate-700 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-[60] shadow-2xl",children:[h.title,e("div",{className:"absolute left-full top-1/2 -translate-y-1/2 w-0 h-0 border-l-4 border-l-slate-900 border-t-4 border-t-transparent border-b-4 border-b-transparent"})]})]},h.id)})})]})}const Xe=({label:t,min:s,max:r,step:n,defaultValue:l,onChange:o})=>{const[i,p]=N(l),[u,y]=N(!1),[k,b]=N(0),D=ue(null),S=W=>{const K=parseFloat(W.target.value);p(K),o&&o(K)},g=W=>{const K=parseFloat(W.target.value);p(K),o&&o(K),M(W.target)},m=()=>{y(!0)},G=()=>{y(!1)},M=W=>{if(W){const K=parseFloat(W.min),j=parseFloat(W.max),F=(parseFloat(W.value)-K)/(j-K),R=16,h=W.offsetWidth-R,E=F*h+R/2;b(E)}};return te(()=>{D.current&&M(D.current)},[i]),a("div",{className:"space-y-1 relative",children:[e("label",{className:"text-xs text-gray-400",children:t}),a("div",{className:"flex items-center space-x-2",children:[a("div",{className:"relative flex-1",children:[e("input",{type:"range",min:s,max:r,step:n,value:i,onChange:g,onMouseDown:m,onMouseUp:G,ref:D,className:"w-full h-1 bg-slate-700 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-blue-500 [&::-webkit-slider-thumb]:shadow [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-blue-500 [&::-moz-range-thumb]:shadow"}),u&&a("div",{className:"absolute bg-blue-500 text-white text-xs rounded py-1 px-2 -mt-8 transform -translate-x-1/2 transition-opacity duration-100",style:{left:k,opacity:u?1:0},children:[i.toFixed(1),e("div",{className:"absolute left-1/2 transform -translate-x-1/2 border-t-4 border-t-blue-500 border-x-4 border-x-transparent bottom-[-4px]"})]})]}),e("input",{type:"number",min:s,max:r,step:n,value:i,onChange:S,className:"w-16 bg-slate-800 border border-slate-700 text-white text-xs p-1.5 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})},Le=({title:t,children:s,defaultOpen:r=!0,index:n=0})=>{const[l,o]=N(r),i=n%2===0;return a("div",{className:`${i?"bg-slate-800/20":"bg-slate-900/20"}`,children:[a("button",{onClick:()=>o(!l),className:`w-full flex items-center justify-between px-3 py-2.5 text-xs font-medium transition-all duration-200 group ${l?"bg-blue-600/20 text-blue-200 shadow-md shadow-blue-900/20 border-l-2 border-blue-500":"text-gray-300 hover:bg-slate-700/30 hover:text-gray-200 hover:border-l-2 hover:border-slate-400 border-l-2 border-transparent"}`,children:[e("span",{className:`transition-transform duration-200 ${l?"":"group-hover:translate-x-1"}`,children:t}),e(d.ChevronDown,{className:`w-3 h-3 transition-transform ${l?"":"-rotate-90"}`})]}),l&&e("div",{className:"px-3 pt-2 pb-3",children:s})]})},Qt=({items:t,position:s,onClose:r})=>{const n=ue(null),l=ue(null),[o,i]=N({top:0,left:0}),[p,u]=N(null),[y,k]=N(null),[b,D]=N(null),S=ue(null);te(()=>{const M=W=>{const K=n.current&&n.current.contains(W.target),j=l.current&&l.current.contains(W.target);!K&&!j&&r()};return document.addEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}},[r]),te(()=>{if(n.current){const{innerWidth:M,innerHeight:W}=window,{offsetWidth:K,offsetHeight:j}=n.current;let{x:I,y:F}=s;I+K>M&&(I=M-K),F+j>W&&(F=W-j),i({top:F,left:I})}},[s]);const g=(M,W,K)=>{if(u(M),S.current&&(clearTimeout(S.current),S.current=null),W.submenu&&W.submenu.length>0){const j=K.currentTarget.getBoundingClientRect(),{innerWidth:I,innerHeight:F}=window;let R=j.right+2,h=j.top;const E=180;R+E>I&&(R=j.left-E-2);const V=W.submenu.length*32;h+V>F&&(h=F-V-10),k({top:h,left:R}),D(W.submenu)}else k(null),D(null)},m=()=>{S.current=setTimeout(()=>{k(null),D(null)},300)},G=()=>{};return!t||t.length===0?null:a(ve,{children:[e("div",{ref:n,className:"bg-slate-800/95 backdrop-blur-md border border-slate-700 rounded-md shadow-xl py-1 pointer-events-auto",style:{position:"fixed",top:o.top,left:o.left,zIndex:999998},onMouseLeave:()=>{u(null),m()},children:e("ul",{children:t.map((M,W)=>e("li",{children:M.separator?e("div",{className:"border-t border-slate-700 my-1"}):a("button",{onMouseEnter:K=>g(W,M,K),onMouseLeave:()=>G(),onClick:()=>{M.submenu||(M.action(),r())},className:`flex items-center w-full px-3 py-1.5 text-xs text-left transition-all duration-200 ${p===W?"bg-blue-600 text-white":"text-gray-300 hover:bg-blue-600/70 hover:text-white"}`,children:[M.color&&e("div",{className:"w-3 h-3 rounded-full mr-2 border border-gray-600",style:{backgroundColor:M.color}}),M.icon&&e("span",{className:"mr-2",children:M.icon}),e("span",{className:"flex-1",children:M.label}),M.shortcut&&e("span",{className:"text-gray-500 text-xs",children:M.shortcut}),M.submenu&&e(d.ChevronRight,{className:"w-3 h-3 ml-1"})]})},W))})}),b&&y&&e("div",{ref:l,className:"bg-slate-800/95 backdrop-blur-md border border-slate-700 rounded-md shadow-xl py-1 pointer-events-auto min-w-[180px]",style:{position:"fixed",top:y.top,left:y.left,zIndex:999999},onMouseEnter:()=>{S.current&&(clearTimeout(S.current),S.current=null)},onMouseLeave:()=>{m()},children:e("ul",{children:b.map((M,W)=>e("li",{children:M.separator?e("div",{className:"border-t border-slate-700 my-1"}):a("button",{onClick:K=>{K.preventDefault(),K.stopPropagation();try{M.action(),r()}catch(j){console.error("Error executing submenu action:",j),r()}},className:"flex items-center w-full px-3 py-1.5 text-xs text-left text-gray-300 transition-all duration-200 hover:bg-blue-600/70 hover:text-white",children:[M.color&&e("div",{className:"w-3 h-3 rounded-full mr-2 border border-gray-600",style:{backgroundColor:M.color}}),M.icon&&e("span",{className:"mr-2",children:M.icon}),e("span",{className:"flex-1",children:M.label})]})},W))})})]})},St=[{id:"apartment",name:"Apartment",description:"Indoor apartment lighting",preset:"apartment"},{id:"city",name:"City Environment",description:"Urban setting with street lighting",preset:"city"},{id:"dawn",name:"Dawn",description:"Early morning natural lighting",preset:"dawn"},{id:"forest",name:"Forest Environment",description:"Natural outdoor forest setting",preset:"forest"},{id:"lobby",name:"Lobby",description:"Indoor lobby environment",preset:"lobby"},{id:"night",name:"Night",description:"Nighttime outdoor environment",preset:"night"},{id:"park",name:"Park",description:"Natural park environment",preset:"park"},{id:"studio",name:"Studio Environment",description:"Neutral studio lighting setup",preset:"studio"},{id:"sunset",name:"Sunset",description:"Warm evening lighting",preset:"sunset"},{id:"warehouse",name:"Warehouse",description:"Industrial warehouse lighting",preset:"warehouse"},{id:"room",name:"Room Environment",description:"Procedural room with realistic lighting",type:"room"}];function Jt(t){const s=St.find(r=>r.id===t);if(!s)throw new Error(`Environment ${t} not found`);return s}const ct=["Urban Landscape","Natural Environment","Indoor Setting","Sci-Fi Outpost","Fantasy Kingdom","Vehicle Garage","Character Assembly","Props Collection","Lighting Setup","Special Effects","UI Elements","Audio Sources","Camera Rigs","Animation Sequences","Particle Systems","Decal Placement","Water Bodies","Foliage Group","Rock Formations","Building Complex"],dt=["Street Level","Skyscrapers","Residential Area","Industrial Zone","Park","Forest","Mountains","River","Cave System","Beach","Living Room","Kitchen","Bedroom","Office","Basement","Corridors","Command Center","Hangar Bay","Living Quarters","Laboratory"],ut=["Lamp Post","Bench","Mailbox","Traffic Light","Fire Hydrant","Oak Tree","Pine Tree","Boulder","Shrub","Flower Bed","Sofa","Coffee Table","Television","Bookshelf","Dining Table","Computer Terminal","Holographic Display","Storage Crate","Power Conduit","Specimen Tank"];Array.from({length:20},(t,s)=>({id:`parent-${s}`,name:ct[s%ct.length],type:"model",visible:!0,children:Array.from({length:10},(r,n)=>({id:`child-${s}-${n}`,name:dt[n%dt.length],type:"model",visible:!0,children:Array.from({length:5},(l,o)=>({id:`grandchild-${s}-${n}-${o}`,name:ut[o%ut.length],type:"model",visible:!0,children:[]}))}))}));function ea({selectedObject:t,onObjectSelect:s,isOpen:r,onToggle:n,selectedTool:l,onToolSelect:o,onContextMenu:i}){const[p,u]=N(["scene"]),{scenePropertiesHeight:y,setScenePropertiesHeight:k}=ge(),[b,D]=N(!1),[S,g]=N(!1),[m,G]=N(.5),[M,W]=N(.5),[K,j]=N(1),[I,F]=N(.5),[R,h]=N({isDragging:!1,draggedItem:null,dragOverItem:null,dropPosition:null,dragStartDepth:0}),{sceneObjects:E,removeSceneObject:V,setSelectedObject:B,setTransformMode:Y,updateSceneObject:ae,gridSettings:ee,updateGridSettings:Q,viewportSettings:ce,updateViewportSettings:re}=ge(),H=E.find(c=>c.id===t),v=(c,x)=>{x.stopPropagation(),V(c),t===c&&(B(null),Y("select"))},P=(c,x,A)=>{if(H){const X=[...H[c]],z=x==="x"?0:x==="y"?1:2;X[z]=parseFloat(A)||0,ae(t,{[c]:X})}},$=c=>{H&&ae(t,{material:{...H.material,color:c}})},se=c=>{const x=c.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(!x)return"#ff0000";const A=parseInt(x[1])/360,X=parseInt(x[2])/100,z=parseInt(x[3])/100,le=(he,xe,we)=>(we<0&&(we+=1),we>1&&(we-=1),we<1/6?he+(xe-he)*6*we:we<1/2?xe:we<2/3?he+(xe-he)*(2/3-we)*6:he);let ie,ne,ze;if(X===0)ie=ne=ze=z;else{const he=z<.5?z*(1+X):z+X-z*X,xe=2*z-he;ie=le(xe,he,A+1/3),ne=le(xe,he,A),ze=le(xe,he,A-1/3)}const Ue=he=>{const xe=Math.round(he*255).toString(16);return xe.length===1?"0"+xe:xe};return`#${Ue(ie)}${Ue(ne)}${Ue(ze)}`},_=()=>{var x;if(!((x=H==null?void 0:H.material)!=null&&x.color))return"#ff0000";const c=H.material.color;return typeof c=="string"&&c.startsWith("#")?c:typeof c=="string"&&c.startsWith("hsl")?se(c):c||"#ff0000"},J=[{id:"scene",name:"Scene",type:"scene",visible:!0,children:E.map(c=>({id:c.id,name:c.name,type:c.type,visible:c.visible,children:[]}))}],de=ue(null),me=ue(null),ye=c=>{D(!0)};te(()=>{const c=()=>D(!1),x=A=>{if(b){const X=de.current,z=me.current;if(X&&z){const le=X.getBoundingClientRect().bottom,ie=z.offsetHeight;let ne=le-A.clientY;const ze=100,he=X.clientHeight-ie-50;ne=Math.max(ze,ne),ne=Math.min(he,ne),k(ne)}}};return b?(document.body.style.cursor="row-resize",document.addEventListener("mousemove",x),document.addEventListener("mouseup",c)):document.body.style.cursor="default",()=>{document.body.style.cursor="default",document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",c)}},[b]);const Be=c=>{u(x=>x.includes(c)?x.filter(A=>A!==c):[...x,c])},Ze=(c,x,A)=>{c.dataTransfer.effectAllowed="move",c.dataTransfer.setData("text/html",""),h({isDragging:!0,draggedItem:x,dragOverItem:null,dropPosition:null,dragStartDepth:A})},Ye=(c,x,A)=>{const X=c.currentTarget.getBoundingClientRect(),z=c.clientY-X.top,le=X.height,ie=le/3;return z<ie?"above":z>le-ie&&x.children&&x.children.length>0?"inside":z>le-ie?"below":"inside"},Ke=(c,x,A)=>{if(c.preventDefault(),c.dataTransfer.dropEffect="move",R.draggedItem&&R.draggedItem.id!==x.id){if(Oe(R.draggedItem,x))return;const X=Ye(c,x);h(z=>({...z,dragOverItem:x,dropPosition:X}))}},De=c=>{const x=c.currentTarget.getBoundingClientRect(),{clientX:A,clientY:X}=c;(A<x.left||A>x.right||X<x.top||X>x.bottom)&&h(z=>({...z,dragOverItem:null,dropPosition:null}))},Oe=(c,x)=>{if(!c.children)return!1;for(const A of c.children)if(A.id===x.id||Oe(A,x))return!0;return!1},$e=(c,x)=>c.reduce((A,X)=>{if(X.id===x)return A;const z={...X};return X.children&&(z.children=$e(X.children,x)),A.push(z),A},[]),Me=(c,x,A,X)=>c.map(z=>{if(z.id===x){const le={...z};return le.children=[...z.children||[],A],le}if(z.children){const le=Me(z.children,x,A);return{...z,children:le}}return z}),Fe=(c,x,A,X)=>{for(let z=0;z<c.length;z++){if(c[z].id===x){const le=[...c],ie=X==="before"?z:z+1;return le.splice(ie,0,A),le}if(c[z].children){const le=Fe(c[z].children,x,A,X);if(le!==c[z].children){const ie=[...c];return ie[z]={...c[z],children:le},ie}}}return c},Qe=(c,x)=>{if(c.preventDefault(),c.stopPropagation(),!R.draggedItem||!R.dropPosition){Te();return}if(R.draggedItem.id===x.id||Oe(R.draggedItem,x)){Te();return}let A=$e(J,R.draggedItem.id);R.dropPosition==="above"?A=Fe(A,x.id,R.draggedItem,"before"):R.dropPosition==="below"?A=Fe(A,x.id,R.draggedItem,"after"):R.dropPosition==="inside"&&(A=Me(A,x.id,R.draggedItem),u(X=>[...new Set([...X,x.id])])),setHierarchyData(A),Te()},Te=()=>{h({isDragging:!1,draggedItem:null,dragOverItem:null,dropPosition:null,dragStartDepth:0})},Ge=()=>{Te()},Je=c=>{switch(c){case"character":return e(d.Character,{className:"w-4 h-4 text-blue-400"});case"terrain":return e(d.Terrain,{className:"w-4 h-4 text-green-400"});case"model":return e(d.Cube,{className:"w-4 h-4 text-gray-400"});default:return e(d.Cube,{className:"w-4 h-4 text-gray-400"})}},Ie=(c,x=0)=>{var le,ie;const A=c.children&&c.children.length>0,X=p.includes(c.id),z=t===c.id;return a("div",{className:`relative rounded-sm transition-all duration-100 ${R.isDragging&&((le=R.draggedItem)==null?void 0:le.id)===c.id?"opacity-50":""} ${((ie=R.dragOverItem)==null?void 0:ie.id)===c.id&&R.dropPosition?R.dropPosition==="above"?"border-t-2 border-blue-500":R.dropPosition==="below"?"border-b-2 border-blue-500":"bg-blue-800/30":""}`,onContextMenu:ne=>i(ne,c),children:[a("div",{draggable:"true",onDragStart:ne=>Ze(ne,c,x),onDragOver:ne=>Ke(ne,c),onDragLeave:De,onDrop:ne=>Qe(ne,c),onDragEnd:Ge,className:`flex items-center py-0.5 px-2 cursor-pointer transition-colors text-xs group ${z?"bg-blue-800/60":"hover:bg-slate-700"}`,style:{paddingLeft:`${8+x*20}px`},onClick:()=>s(c.id),children:[A&&e("button",{onClick:ne=>{ne.stopPropagation(),Be(c.id)},className:"mr-1 p-0.5 hover:bg-slate-600 rounded transition-colors",children:X?e(d.ChevronDown,{className:"w-3 h-3 text-gray-300"}):e(d.ChevronRight,{className:"w-3 h-3 text-gray-300"})}),e("button",{className:"mr-1 p-0.5 rounded transition-colors opacity-70 hover:opacity-100",onClick:ne=>ne.stopPropagation(),children:c.visible?e(d.Eye,{className:"w-4 h-4 text-gray-300"}):e(d.EyeSlash,{className:"w-4 h-4 text-gray-500"})}),e("span",{className:"mr-2",children:Je(c.type)}),e("span",{className:"flex-1 text-gray-200 truncate",children:c.name}),e("button",{className:"ml-2 p-0.5 rounded transition-colors opacity-0 group-hover:opacity-70 hover:opacity-100",onClick:ne=>v(c.id,ne),title:"Delete object",children:e(d.Trash,{className:"w-4 h-4 text-gray-300 hover:text-red-400"})})]}),A&&X&&c.children.map(ne=>Ie(ne,x+1))]},c.id)};if(!r)return null;const Re=()=>{switch(l){case"scene":return"Scene";case"light":return"Light";case"effects":return"Effects";case"folder":return"Files";case"star":return"Favorites";case"wifi":return"Network";case"cloud":return"Cloud";case"monitor":return"Display";case"settings":return"Settings";default:return"Properties"}},C=()=>{switch(l){case"scene":return a("div",{ref:de,className:"flex flex-col flex-1 overflow-hidden",onContextMenu:c=>i(c,null),children:[e("div",{className:"flex-1 overflow-y-auto scrollbar-thin",onContextMenu:c=>i(c,null),children:J.map(c=>Ie(c))}),t&&a(ve,{children:[e("div",{className:`h-1 cursor-row-resize transition-colors ${b?"bg-blue-500/75":"bg-slate-700/50 hover:bg-blue-500/75"}`,onMouseDown:ye}),e("div",{className:"overflow-y-auto scrollbar-thin",style:{height:`${y}px`},children:a("div",{children:[e(Le,{title:"Transform",defaultOpen:!0,index:0,children:a("div",{className:"space-y-4",children:[a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Position"}),a("div",{className:"grid grid-cols-3 gap-2",children:[a("div",{className:"relative",children:[e("input",{type:"number",step:"0.1",value:H?H.position[0].toFixed(2):"0",onChange:c=>P("position","x",c.target.value),className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}),e("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"X"})]}),a("div",{className:"relative",children:[e("input",{type:"number",step:"0.1",value:H?H.position[1].toFixed(2):"0",onChange:c=>P("position","y",c.target.value),className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}),e("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"Y"})]}),a("div",{className:"relative",children:[e("input",{type:"number",step:"0.1",value:H?H.position[2].toFixed(2):"0",onChange:c=>P("position","z",c.target.value),className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}),e("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"Z"})]})]})]}),a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Rotation"}),a("div",{className:"grid grid-cols-3 gap-2",children:[a("div",{className:"relative",children:[e("input",{type:"number",step:"0.1",value:H?(H.rotation[0]*180/Math.PI).toFixed(1):"0",onChange:c=>P("rotation","x",(parseFloat(c.target.value)||0)*Math.PI/180),className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}),e("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"X"})]}),a("div",{className:"relative",children:[e("input",{type:"number",step:"0.1",value:H?(H.rotation[1]*180/Math.PI).toFixed(1):"0",onChange:c=>P("rotation","y",(parseFloat(c.target.value)||0)*Math.PI/180),className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}),e("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"Y"})]}),a("div",{className:"relative",children:[e("input",{type:"number",step:"0.1",value:H?(H.rotation[2]*180/Math.PI).toFixed(1):"0",onChange:c=>P("rotation","z",(parseFloat(c.target.value)||0)*Math.PI/180),className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}),e("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"Z"})]})]})]}),a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Scale"}),a("div",{className:"grid grid-cols-3 gap-2",children:[a("div",{className:"relative",children:[e("input",{type:"number",step:"0.1",value:H?H.scale[0].toFixed(2):"1",onChange:c=>P("scale","x",c.target.value),className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}),e("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"X"})]}),a("div",{className:"relative",children:[e("input",{type:"number",step:"0.1",value:H?H.scale[1].toFixed(2):"1",onChange:c=>P("scale","y",c.target.value),className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}),e("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"Y"})]}),a("div",{className:"relative",children:[e("input",{type:"number",step:"0.1",value:H?H.scale[2].toFixed(2):"1",onChange:c=>P("scale","z",c.target.value),className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}),e("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"Z"})]})]})]})]})}),e(Le,{title:"Material",defaultOpen:!0,index:1,children:a("div",{className:"space-y-4",children:[a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Material Type"}),a("select",{className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all cursor-pointer",children:[e("option",{children:"Standard"}),e("option",{children:"Toon"}),e("option",{children:"Glass"}),e("option",{children:"Emissive"}),e("option",{children:"Metallic"})]})]}),a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Base Color"}),a("div",{className:"flex items-center gap-2",children:[e("input",{type:"color",value:_(),onChange:c=>$(c.target.value),className:"w-10 h-10 rounded-lg border border-slate-600 bg-slate-800 cursor-pointer"}),e("div",{className:"flex-1 bg-slate-800/80 border border-slate-600 rounded-lg p-2",children:e("div",{className:"text-xs text-gray-300",children:_().toUpperCase()})})]})]}),a("div",{className:"space-y-3",children:[e(Xe,{label:"Roughness",min:0,max:1,step:.1,defaultValue:m,onChange:G}),e(Xe,{label:"Metalness",min:0,max:1,step:.1,defaultValue:M,onChange:W})]})]})}),e(Le,{title:"Scripts",index:2,children:a("div",{className:"space-y-3",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Attached Scripts"}),e("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/80 border-2 border-dashed border-slate-600 hover:border-blue-500/50 rounded-xl p-6 text-center transition-all duration-200 group",children:a("div",{className:"flex flex-col items-center gap-2",children:[e(d.CodeBracket,{className:"w-8 h-8 text-slate-500 group-hover:text-blue-400 transition-colors"}),e("p",{className:"text-xs text-gray-400 group-hover:text-gray-300 transition-colors",children:"Drag scripts here or click to browse"}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:"+ Add Script"})]})})]})}),e(Le,{title:"Custom Properties",index:3,children:a("div",{className:"space-y-4",children:[a("div",{className:"flex items-center justify-between p-3 bg-slate-800/40 rounded-lg border border-slate-700/50",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Enable Features"}),e("button",{onClick:()=>g(!S),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-200 ${S?"bg-blue-500 shadow-lg shadow-blue-500/30":"bg-slate-600"}`,children:e("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 shadow-sm ${S?"translate-x-6":"translate-x-1"}`})})]}),a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Object Name"}),e("input",{type:"text",className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all",placeholder:"Enter object name"})]}),a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Description"}),e("textarea",{className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all resize-none",rows:"3",placeholder:"Enter description"})]}),a("div",{className:"grid grid-cols-2 gap-3",children:[a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Category"}),a("select",{className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all cursor-pointer",children:[e("option",{children:"Environment"}),e("option",{children:"Character"}),e("option",{children:"Prop"}),e("option",{children:"Effect"})]})]}),a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Created"}),e("input",{type:"date",className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"})]})]})]})})]})})]})]});case"light":return a("div",{className:"flex-1 p-3 space-y-4 overflow-y-auto scrollbar-thin",children:[a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Type"}),a("select",{className:"w-full bg-slate-900 border border-slate-600 text-white text-xs p-2 rounded",children:[e("option",{children:"Directional"}),e("option",{children:"Point"}),e("option",{children:"Spot"})]})]}),e("div",{className:"space-y-2",children:e(Xe,{label:"Intensity",min:0,max:10,step:.1,defaultValue:K,onChange:j})}),a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Color"}),e("input",{type:"color",defaultValue:"#ffffff",className:"w-full h-8 rounded"})]}),a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Shadow"}),a("label",{className:"flex items-center space-x-2",children:[e("input",{type:"checkbox",defaultChecked:!0,className:"text-blue-600"}),e("span",{className:"text-xs text-gray-300",children:"Cast Shadows"})]})]})]});case"effects":return a("div",{className:"flex-1 p-3 space-y-4 overflow-y-auto scrollbar-thin",children:[a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Post Processing"}),a("label",{className:"flex items-center space-x-2",children:[e("input",{type:"checkbox",defaultChecked:!0,className:"text-blue-600"}),e("span",{className:"text-xs text-gray-300",children:"Bloom"})]}),a("label",{className:"flex items-center space-x-2",children:[e("input",{type:"checkbox",className:"text-blue-600"}),e("span",{className:"text-xs text-gray-300",children:"Motion Blur"})]}),a("label",{className:"flex items-center space-x-2",children:[e("input",{type:"checkbox",className:"text-blue-600"}),e("span",{className:"text-xs text-gray-300",children:"Depth of Field"})]})]}),e("div",{className:"space-y-2",children:e(Xe,{label:"Ambient Occlusion",min:0,max:1,step:.1,defaultValue:I,onChange:F})})]});case"settings":return e("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:a("div",{children:[e(Le,{title:"Grid Helper",defaultOpen:!0,index:0,children:a("div",{className:"space-y-4",children:[a("div",{className:"flex items-center justify-between p-3 bg-slate-800/40 rounded-lg border border-slate-700/50",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Enable Grid"}),e("button",{onClick:()=>Q({enabled:!ee.enabled}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-200 ${ee.enabled?"bg-blue-500 shadow-lg shadow-blue-500/30":"bg-slate-600"}`,children:e("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 shadow-sm ${ee.enabled?"translate-x-6":"translate-x-1"}`})})]}),e("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${ee.enabled?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"}`,children:a("div",{className:"space-y-4",children:[!ee.infiniteGrid&&a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Grid Size"}),e("input",{type:"number",step:"10",min:"10",max:"1000",value:ee.size,onChange:c=>Q({size:parseInt(c.target.value)||100}),className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"})]}),a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Cell Size"}),e("input",{type:"number",step:"0.1",min:"0.1",max:"10",value:ee.cellSize,onChange:c=>Q({cellSize:parseFloat(c.target.value)||1}),className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"})]}),a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Grid Position"}),a("div",{className:"grid grid-cols-3 gap-2",children:[a("div",{className:"relative",children:[e("input",{type:"number",step:"0.1",value:ee.position[0],onChange:c=>{const x=[...ee.position];x[0]=parseFloat(c.target.value)||0,Q({position:x})},className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}),e("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"X"})]}),a("div",{className:"relative",children:[e("input",{type:"number",step:"0.1",value:ee.position[1],onChange:c=>{const x=[...ee.position];x[1]=parseFloat(c.target.value)||0,Q({position:x})},className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}),e("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"Y"})]}),a("div",{className:"relative",children:[e("input",{type:"number",step:"0.1",value:ee.position[2],onChange:c=>{const x=[...ee.position];x[2]=parseFloat(c.target.value)||0,Q({position:x})},className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}),e("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"Z"})]})]})]}),a("div",{className:"space-y-3",children:[a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Cell Color"}),a("div",{className:"flex items-center gap-2",children:[e("input",{type:"color",value:ee.cellColor,onChange:c=>Q({cellColor:c.target.value}),className:"w-10 h-10 rounded-lg border border-slate-600 bg-slate-800 cursor-pointer"}),e("div",{className:"flex-1 bg-slate-800/80 border border-slate-600 rounded-lg p-2",children:e("div",{className:"text-xs text-gray-300",children:ee.cellColor.toUpperCase()})})]})]}),a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Section Color"}),a("div",{className:"flex items-center gap-2",children:[e("input",{type:"color",value:ee.sectionColor,onChange:c=>Q({sectionColor:c.target.value}),className:"w-10 h-10 rounded-lg border border-slate-600 bg-slate-800 cursor-pointer"}),e("div",{className:"flex-1 bg-slate-800/80 border border-slate-600 rounded-lg p-2",children:e("div",{className:"text-xs text-gray-300",children:ee.sectionColor.toUpperCase()})})]})]})]}),a("div",{className:"space-y-3",children:[a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Section Size"}),e("input",{type:"number",step:"1",min:"1",max:"50",value:ee.sectionSize,onChange:c=>Q({sectionSize:parseInt(c.target.value)||10}),className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"})]}),a("div",{className:"flex items-center justify-between p-3 bg-slate-800/40 rounded-lg border border-slate-700/50",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Infinite Grid"}),e("button",{onClick:()=>Q({infiniteGrid:!ee.infiniteGrid}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-200 ${ee.infiniteGrid?"bg-blue-500 shadow-lg shadow-blue-500/30":"bg-slate-600"}`,children:e("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 shadow-sm ${ee.infiniteGrid?"translate-x-6":"translate-x-1"}`})})]})]})]})})]})}),e(Le,{title:"Viewport",defaultOpen:!0,index:1,children:a("div",{className:"space-y-4",children:[a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Background Color"}),a("div",{className:"flex items-center gap-2",children:[e("input",{type:"color",value:ce.backgroundColor,onChange:c=>re({backgroundColor:c.target.value}),className:"w-10 h-10 rounded-lg border border-slate-600 bg-slate-800 cursor-pointer"}),e("div",{className:"flex-1 bg-slate-800/80 border border-slate-600 rounded-lg p-2",children:e("div",{className:"text-xs text-gray-300",children:ce.backgroundColor.toUpperCase()})})]})]}),a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Quick Presets"}),a("div",{className:"grid grid-cols-4 gap-2",children:[e("button",{onClick:()=>re({backgroundColor:"#1a202c"}),className:"h-8 rounded-lg border border-slate-600 transition-all hover:scale-105 hover:border-blue-500",style:{backgroundColor:"#1a202c"},title:"Dark Blue"}),e("button",{onClick:()=>re({backgroundColor:"#000000"}),className:"h-8 rounded-lg border border-slate-600 transition-all hover:scale-105 hover:border-blue-500",style:{backgroundColor:"#000000"},title:"Black"}),e("button",{onClick:()=>re({backgroundColor:"#374151"}),className:"h-8 rounded-lg border border-slate-600 transition-all hover:scale-105 hover:border-blue-500",style:{backgroundColor:"#374151"},title:"Gray"}),e("button",{onClick:()=>re({backgroundColor:"#ffffff"}),className:"h-8 rounded-lg border border-slate-600 transition-all hover:scale-105 hover:border-blue-500",style:{backgroundColor:"#ffffff"},title:"White"})]})]})]})}),e(Le,{title:"Skybox",defaultOpen:!1,index:2,children:a("div",{className:"space-y-4",children:[a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Environment"}),a("div",{className:"grid grid-cols-2 gap-2",children:[a("button",{onClick:()=>re({backgroundColor:"#87CEEB"}),className:"flex items-center p-2 bg-slate-800 border border-slate-600 rounded-lg hover:border-blue-500 transition-colors text-left",children:[e("div",{className:"w-4 h-4 rounded mr-2",style:{background:"linear-gradient(to bottom, #87CEEB, #E0F6FF)"}}),e("span",{className:"text-xs text-slate-300",children:"Blue Sky"})]}),a("button",{onClick:()=>re({backgroundColor:"#FF6B35"}),className:"flex items-center p-2 bg-slate-800 border border-slate-600 rounded-lg hover:border-blue-500 transition-colors text-left",children:[e("div",{className:"w-4 h-4 rounded mr-2",style:{background:"linear-gradient(to bottom, #FF6B35, #FFD700)"}}),e("span",{className:"text-xs text-slate-300",children:"Sunset"})]}),a("button",{onClick:()=>re({backgroundColor:"#1a1a2e"}),className:"flex items-center p-2 bg-slate-800 border border-slate-600 rounded-lg hover:border-blue-500 transition-colors text-left",children:[e("div",{className:"w-4 h-4 rounded mr-2",style:{background:"linear-gradient(to bottom, #1a1a2e, #16213e)"}}),e("span",{className:"text-xs text-slate-300",children:"Night"})]}),a("button",{onClick:()=>re({backgroundColor:"#FFB6C1"}),className:"flex items-center p-2 bg-slate-800 border border-slate-600 rounded-lg hover:border-blue-500 transition-colors text-left",children:[e("div",{className:"w-4 h-4 rounded mr-2",style:{background:"linear-gradient(to bottom, #FFB6C1, #FF69B4)"}}),e("span",{className:"text-xs text-slate-300",children:"Dawn"})]})]})]}),a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"HDR Environments"}),a("div",{className:"space-y-1",children:[St.map(c=>a("button",{onClick:()=>{try{const x=Jt(c.id),{setEnvironment:A}=Ae.getState();x.type==="room"?A(null,1,"hdr","room"):x.preset&&A(x.preset,1,"hdr","preset")}catch(x){console.error("Failed to set HDR environment:",x)}},className:"w-full flex items-center p-2 bg-slate-800 border border-slate-600 rounded-lg hover:border-blue-500 transition-colors text-left",children:[e(d.Image,{className:"w-4 h-4 mr-2 text-slate-400"}),a("div",{className:"flex flex-col",children:[e("span",{className:"text-xs text-slate-300",children:c.name}),e("span",{className:"text-xs text-slate-500",children:c.description})]})]},c.id)),a("button",{onClick:()=>{const{clearEnvironment:c}=Ae.getState();c(),re({backgroundColor:"#1a202c"})},className:"w-full flex items-center p-2 bg-slate-800 border border-slate-600 rounded-lg hover:border-red-500 transition-colors text-left",children:[e(d.XMark,{className:"w-4 h-4 mr-2 text-red-400"}),e("span",{className:"text-xs text-slate-300",children:"Clear Environment"})]})]})]}),a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Environment Intensity"}),a("div",{className:"flex items-center space-x-2",children:[e("input",{type:"range",min:"0",max:"2",step:"0.1",defaultValue:"1",onChange:c=>{const x=parseFloat(c.target.value),{setEnvironmentIntensity:A}=Ae.getState();A(x);const X=c.target.parentElement.querySelector(".intensity-display");X&&(X.textContent=x.toFixed(1))},className:"flex-1 h-2 bg-slate-700 rounded-lg appearance-none slider"}),e("span",{className:"text-xs text-slate-400 w-8 intensity-display",children:"1.0"})]})]}),a("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Custom Background"}),a("div",{className:"flex items-center gap-2",children:[e("input",{type:"color",value:ce.backgroundColor,onChange:c=>re({backgroundColor:c.target.value}),className:"w-10 h-10 rounded-lg border border-slate-600 bg-slate-800 cursor-pointer"}),e("div",{className:"flex-1 bg-slate-800/80 border border-slate-600 rounded-lg p-2",children:e("div",{className:"text-xs text-gray-300",children:ce.backgroundColor.toUpperCase()})})]})]})]})})]})});default:return e("div",{className:"flex-1 p-3 overflow-y-auto scrollbar-thin",children:a("div",{className:"text-center text-gray-500 mt-8",children:[a("p",{className:"text-sm",children:[Re()," panel"]}),e("p",{className:"text-xs mt-1",children:"Content coming soon..."})]})})}};return a("div",{className:"relative w-full h-full bg-gradient-to-b from-slate-800/95 to-slate-900/98 backdrop-blur-md border-l border-slate-700/80 shadow-2xl shadow-black/30 flex flex-col pointer-events-auto no-select",children:[a("div",{ref:me,className:"px-3 py-2 border-b border-slate-700/60",children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("h2",{className:"text-sm font-medium text-white",children:Re()}),e("button",{onClick:()=>{n(),o("select")},className:"p-1 hover:bg-slate-700/50 rounded transition-colors",children:e(d.ChevronRight,{className:"w-3 h-3 text-gray-400"})})]}),l==="scene"&&e("div",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"SCENE OBJECTS (39)"})]}),C()]})}const mt=[{id:"3d-models",label:"3D Models",count:115,icon:d.Models},{id:"materials",label:"Materials",count:4,icon:d.Materials},{id:"textures",label:"Textures",count:0,icon:d.Textures},{id:"scripts",label:"Scripts",count:0,icon:d.Scripts},{id:"plugins",label:"Plugins",count:0,icon:d.Plugins},{id:"audio",label:"Audio",count:0,icon:d.Audio},{id:"animations",label:"Animations",count:0,icon:d.Animations},{id:"prefabs",label:"Prefabs",count:0,icon:d.Prefabs}],ta=[{id:"1994-nis",name:"1994-nissan-skyline"},{id:"2015-do",name:"2015-dodge-challenger"},{id:"adjustabl",name:"adjustable-wrench"},{id:"air-vent",name:"air-vent"},{id:"analog-c",name:"analog-clock"},{id:"apartme",name:"apartment-building"},{id:"bar",name:"bar"},{id:"bathroom",name:"bathroom-sink"},{id:"bathro",name:"bathroom-mirror"},{id:"bench",name:"bench"},{id:"bike-war",name:"bike-warehouse"},{id:"billboard",name:"billboard"}];function aa(){var g;const[t,s]=N("3d-models"),[r,n]=N(""),[l,o]=N(null),[i,p]=N(!1),{assetsLibraryWidth:u,setAssetsLibraryWidth:y}=ge(),k=ta.filter(m=>m.name.toLowerCase().includes(r.toLowerCase())),b=m=>{p(!0),document.body.classList.add("dragging-horizontal"),m.preventDefault()},D=m=>{if(!i)return;const G=m.clientX;y(Math.max(120,Math.min(300,G)))},S=()=>{p(!1),document.body.classList.remove("dragging-horizontal")};return xt.useEffect(()=>{if(i)return document.addEventListener("mousemove",D),document.addEventListener("mouseup",S),()=>{document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",S)}},[i]),a("div",{className:"h-full flex bg-slate-800 no-select",children:[a("div",{className:"bg-slate-900 border-r border-slate-700 flex flex-col relative",style:{width:u},children:[e("div",{className:`absolute right-0 top-0 bottom-0 w-0.5 resize-handle cursor-col-resize ${i?"dragging":""}`,onMouseDown:b}),e("div",{className:"px-2 py-2",children:a("div",{className:"relative mt-1",children:[e(d.MagnifyingGlass,{className:"w-3 h-3 absolute left-2 top-1.5 text-gray-400"}),e("input",{type:"text",placeholder:"Search...",value:r,onChange:m=>n(m.target.value),className:"w-full pl-6 pr-2 py-1 bg-slate-800 border border-slate-600 rounded text-xs text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 transition-colors"})]})}),e("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:e("div",{className:"space-y-0.5 p-1",children:mt.map(m=>a("button",{onClick:()=>s(m.id),className:`w-full flex items-center justify-between px-2 py-1.5 text-left text-xs rounded hover:bg-slate-800 transition-colors ${t===m.id?"bg-blue-600 text-white":"text-gray-300 hover:text-white"}`,children:[a("span",{className:"flex items-center",children:[e(m.icon,{className:`w-3 h-3 mr-2 ${t===m.id?"text-white":"text-gray-400"}`}),m.label]}),e("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${t===m.id?"text-white bg-blue-500":"text-gray-400 bg-slate-700"}`,children:m.count})]},m.id))})})]}),a("div",{className:"flex-1 p-3 overflow-y-auto scrollbar-thin bg-slate-800",children:[a("div",{className:"flex items-center justify-between mb-3",children:[e("h3",{className:"text-sm font-medium text-white",children:t==="3d-models"?"3D Models":((g=mt.find(m=>m.id===t))==null?void 0:g.label)||"Assets"}),a("span",{className:"text-xs text-gray-400",children:[k.length," items"]})]}),e("div",{className:"grid grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-10 gap-3",children:k.map(m=>a("div",{className:"group cursor-pointer transition-all duration-200 p-2 rounded hover:bg-slate-700/30",draggable:!0,onMouseEnter:()=>o(m.id),onMouseLeave:()=>o(null),onDragStart:G=>{G.dataTransfer.setData("application/json",JSON.stringify({type:"model",id:m.id,name:m.name}))},children:[e("div",{className:"relative",children:a("div",{className:"w-full h-16 mb-2 flex items-center justify-center relative",children:[e(d.Cube3D,{className:"w-14 h-14 transition-transform group-hover:scale-110",isHovered:l===m.id}),e("div",{className:"absolute top-0 right-0 bg-blue-600 text-white text-xs font-bold px-2 py-1 rounded-full text-center leading-none",children:"GLB"})]})}),e("div",{className:"text-xs text-gray-300 group-hover:text-white transition-colors truncate text-center",title:m.name,children:m.name})]},m.id))}),k.length===0&&r&&e("div",{className:"text-center text-gray-500 mt-12",children:a("p",{className:"text-sm",children:['No assets found matching "',r,'"']})})]})]})}const sa=[{id:"assets",label:"Assets",icon:d.Cube},{id:"scripts",label:"Scripts",icon:d.CodeBracket},{id:"animation",label:"Animation",icon:d.Play},{id:"node-editor",label:"Node Editor",icon:d.AdjustmentsHorizontal},{id:"timeline",label:"Timeline",icon:d.Clock},{id:"console",label:"Console",icon:d.CommandLine},{id:"materials",label:"Materials",icon:d.Materials},{id:"terrain",label:"Terrain",icon:d.Terrain},{id:"lighting",label:"Lighting",icon:d.Sun},{id:"physics",label:"Physics",icon:d.Cube},{id:"audio",label:"Audio",icon:d.Audio},{id:"effects",label:"Effects",icon:d.Effects}];function ra({activeTab:t,onTabChange:s,isAssetPanelOpen:r,onToggleAssetPanel:n,rightPanelWidth:l,isScenePanelOpen:o}){const{bottomTabOrder:i,setBottomTabOrder:p,hydrateFromLocalStorage:u}=ge(),y=()=>{const v=sa.reduce((P,$)=>(P[$.id]=$,P),{});return i.map(P=>v[P]).filter(Boolean)},[k,b]=N(y()),[D,S]=N(y()),[g,m]=N([]),[G,M]=N(!1),[W,K]=N({x:0,y:0}),[j,I]=N({isDragging:!1,draggedTab:null,dragOverTab:null,dragStartX:0,dragOffsetX:0}),[F,R]=N(!1),h=ue(null),E=ue(null),V=ue(null),B=ue(null);te(()=>{const v=y();b(v)},[i]),te(()=>{const v=()=>{if(!E.current||!V.current)return;const P=E.current.offsetWidth,$=40,se=40,_=P-$;let J=0,de=0;for(let me=0;me<k.length;me++){const ye=k[me].label.length*7+50;if(J+ye<=_)J+=ye,de++;else break}if(de<k.length){J=0,de=0;const me=_-se;for(let ye=0;ye<k.length;ye++){const Be=k[ye].label.length*7+50;if(J+Be<=me)J+=Be,de++;else break}S(k.slice(0,Math.max(1,de))),m(k.slice(Math.max(1,de)))}else S(k),m([])};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[k,l,o]),te(()=>{const v=()=>{if(G&&B.current){const $=B.current.getBoundingClientRect();K({x:$.right,y:$.top-8})}},P=$=>{if(B.current&&!B.current.contains($.target)){const se=document.querySelector('[data-dropdown="true"]');(!se||!se.contains($.target))&&M(!1)}};if(G)return window.addEventListener("resize",v),window.addEventListener("scroll",v),document.addEventListener("mousedown",P),()=>{window.removeEventListener("resize",v),window.removeEventListener("scroll",v),document.removeEventListener("mousedown",P)}},[G]);const Y=v=>{j.isDragging||(s(v),M(!1))},ae=()=>{if(!G&&B.current){const v=B.current.getBoundingClientRect();K({x:v.right,y:v.top-8})}M(!G)},ee=(v,P)=>{v.dataTransfer.effectAllowed="move",v.dataTransfer.setData("text/html","");const $=v.currentTarget.getBoundingClientRect(),se=v.clientX-$.left;I({isDragging:!0,draggedTab:P,dragOverTab:null,dragStartX:v.clientX,dragOffsetX:se})},Q=(v,P)=>{v.preventDefault(),v.dataTransfer.dropEffect="move",j.draggedTab&&j.draggedTab.id!==P.id&&I($=>({...$,dragOverTab:P}))},ce=v=>{const P=v.currentTarget.getBoundingClientRect(),{clientX:$,clientY:se}=v;($<P.left||$>P.right||se<P.top||se>P.bottom)&&I(_=>({..._,dragOverTab:null}))},re=(v,P)=>{if(v.preventDefault(),v.stopPropagation(),!j.draggedTab||j.draggedTab.id===P.id){I({isDragging:!1,draggedTab:null,dragOverTab:null,dragStartX:0,dragOffsetX:0});return}const $=k.findIndex(_=>_.id===j.draggedTab.id),se=k.findIndex(_=>_.id===P.id);if($!==-1&&se!==-1&&$!==se){const _=[...k],[J]=_.splice($,1);_.splice(se,0,J),b(_);const de=_.map(me=>me.id);p(de)}I({isDragging:!1,draggedTab:null,dragOverTab:null,dragStartX:0,dragOffsetX:0})},H=()=>{I({isDragging:!1,draggedTab:null,dragOverTab:null,dragStartX:0,dragOffsetX:0}),R(!1),h.current&&(clearTimeout(h.current),h.current=null)};return te(()=>()=>{h.current&&clearTimeout(h.current)},[]),a("div",{ref:E,className:"h-10 bg-slate-900 border-t border-slate-700 border-b border-slate-700 flex items-center relative z-50",suppressHydrationWarning:!0,children:[a("div",{ref:V,className:"flex flex-1 overflow-hidden",children:[D.map(v=>{var se,_;const P=((se=j.draggedTab)==null?void 0:se.id)===v.id,$=((_=j.dragOverTab)==null?void 0:_.id)===v.id;return a("button",{draggable:!0,onClick:()=>Y(v.id),onDragStart:J=>ee(J,v),onDragOver:J=>Q(J,v),onDragLeave:ce,onDrop:J=>re(J,v),onDragEnd:H,className:`relative flex items-center px-4 py-2.5 text-sm font-medium transition-all whitespace-nowrap select-none ${P?"opacity-50 cursor-grabbing":"hover:bg-slate-800 cursor-grab"} ${t===v.id?"text-blue-400":"text-gray-400 hover:text-gray-200"}`,style:{transform:P?"scale(0.95)":"scale(1)"},children:[e(v.icon,{className:"w-4 h-4 mr-2"}),v.label,t===v.id&&e("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-500",suppressHydrationWarning:!0}),$&&e("div",{className:"absolute inset-y-0 left-0 w-0.5 bg-blue-500 z-10"})]},v.id)}),g.length>0&&e("div",{onDragOver:v=>{v.preventDefault(),j.draggedTab&&g.some(P=>P.id===j.draggedTab.id)&&(v.dataTransfer.dropEffect="move")},onDrop:v=>{if(v.preventDefault(),j.draggedTab&&g.some(P=>P.id===j.draggedTab.id)){const P=k.findIndex(_=>_.id===j.draggedTab.id),$=D.length-1,se=k.findIndex(_=>_.id===D[$].id);if(P!==-1&&se!==-1){const _=[...k],[J]=_.splice(P,1);_.splice(se+1,0,J),b(_);const de=_.map(me=>me.id);p(de)}I({isDragging:!1,draggedTab:null,dragOverTab:null,dragStartX:0,dragOffsetX:0})}},className:"w-4 h-full flex items-center justify-center",children:j.draggedTab&&g.some(v=>v.id===j.draggedTab.id)&&e("div",{className:"w-0.5 h-6 bg-blue-500 opacity-50"})}),g.length>0&&e("div",{className:"relative",children:a("button",{ref:B,onClick:ae,onDragEnter:v=>{v.preventDefault(),j.draggedTab&&(R(!0),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{var P;if(!G){const $=(P=B.current)==null?void 0:P.getBoundingClientRect();$&&(K({x:$.right,y:$.top-8}),M(!0))}},500))},onDragLeave:v=>{const P=v.currentTarget.getBoundingClientRect(),{clientX:$,clientY:se}=v;($<P.left||$>P.right||se<P.top||se>P.bottom)&&(R(!1),h.current&&(clearTimeout(h.current),h.current=null))},onDragOver:v=>{v.preventDefault(),j.draggedTab&&(v.dataTransfer.dropEffect="move")},onDrop:v=>{if(v.preventDefault(),R(!1),h.current&&(clearTimeout(h.current),h.current=null),j.draggedTab&&D.some(P=>P.id===j.draggedTab.id)){const P=k.findIndex($=>$.id===j.draggedTab.id);if(P!==-1){const $=[...k],[se]=$.splice(P,1);$.push(se),b($);const _=$.map(J=>J.id);p(_)}I({isDragging:!1,draggedTab:null,dragOverTab:null,dragStartX:0,dragOffsetX:0})}},className:`relative flex items-center px-3 py-2.5 text-sm font-medium transition-colors ${F?"bg-blue-600/20 border border-blue-500":"hover:bg-slate-800"} ${g.some(v=>v.id===t)?"text-blue-400":"text-gray-400 hover:text-gray-200"}`,children:[e(d.MenuBars,{className:"w-4 h-4"}),g.some(v=>v.id===t)&&e("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-500"})]})})]}),e("div",{className:"flex items-center pr-1",children:e("button",{onClick:n,className:"p-1.5 hover:bg-slate-800 rounded transition-colors text-gray-400 hover:text-white",title:r?"Hide panel":"Show panel",children:r?e(d.ChevronDown,{className:"w-4 h-4"}):e(d.ChevronUp,{className:"w-4 h-4"})})}),G&&g.length>0&&e("div",{className:"fixed bg-slate-800 border border-slate-700 rounded-lg shadow-2xl shadow-black/50 min-w-48 pointer-events-auto","data-dropdown":"true",style:{left:`${W.x}px`,top:`${W.y}px`,transform:"translate(-100%, -100%)",zIndex:9999},children:g.map(v=>{var se,_;const P=((se=j.draggedTab)==null?void 0:se.id)===v.id,$=((_=j.dragOverTab)==null?void 0:_.id)===v.id;return a("button",{draggable:!0,onClick:()=>Y(v.id),onDragStart:J=>ee(J,v),onDragOver:J=>Q(J,v),onDragLeave:ce,onDrop:J=>re(J,v),onDragEnd:H,className:`w-full flex items-center px-3 py-2 text-sm font-medium transition-all first:rounded-t-lg last:rounded-b-lg select-none ${P?"opacity-50 cursor-grabbing":"hover:bg-slate-700 cursor-grab"} ${t===v.id?"text-blue-400 bg-slate-700/50":"text-gray-300 hover:text-gray-200"}`,style:{transform:P?"scale(0.95)":"scale(1)"},children:[e(v.icon,{className:"w-4 h-4 mr-2"}),v.label,$&&e("div",{className:"absolute inset-y-0 left-0 w-0.5 bg-blue-500 z-10"})]},v.id)})})]})}const na=()=>e("div",{className:"absolute inset-0 bg-gray-900",children:a("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:[e("defs",{children:e("pattern",{id:"dot-grid",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:e("circle",{cx:"2",cy:"2",r:"1",fill:"#2D3748"})})}),e("rect",{width:"100%",height:"100%",fill:"url(#dot-grid)"})]})}),la=()=>a("div",{className:"relative w-full h-full overflow-hidden",children:[e(na,{}),e("div",{className:"relative z-10 p-4 text-gray-400",children:"Node editor content will go here."})]}),ht=[{id:"behavior",label:"Behavior Scripts",count:8,icon:d.Scripts},{id:"ui",label:"UI Scripts",count:3,icon:d.Code},{id:"system",label:"System Scripts",count:12,icon:d.Cog},{id:"custom",label:"Custom Scripts",count:5,icon:d.CodeBracket}],ia=[{id:"player-controller",name:"PlayerController.js",type:"behavior",size:"2.4 KB"},{id:"camera-follow",name:"CameraFollow.js",type:"behavior",size:"1.8 KB"},{id:"inventory-ui",name:"InventoryUI.js",type:"ui",size:"3.2 KB"},{id:"health-system",name:"HealthSystem.js",type:"system",size:"4.1 KB"},{id:"lighting-controller",name:"LightingController.js",type:"system",size:"2.7 KB"},{id:"menu-handler",name:"MenuHandler.js",type:"ui",size:"1.9 KB"}];function oa(){var o;const[t,s]=N("behavior"),[r,n]=N(""),l=ia.filter(i=>i.type===t&&i.name.toLowerCase().includes(r.toLowerCase()));return a("div",{className:"h-full flex bg-slate-800",children:[a("div",{className:"w-48 bg-slate-900 border-r border-slate-700 flex flex-col",children:[e("div",{className:"p-3 border-b border-slate-700",children:a("div",{className:"relative",children:[e(d.MagnifyingGlass,{className:"w-3 h-3 absolute left-2 top-1.5 text-gray-400"}),e("input",{type:"text",placeholder:"Search scripts...",value:r,onChange:i=>n(i.target.value),className:"w-full pl-6 pr-2 py-1 bg-slate-800 border border-slate-600 rounded text-xs text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"})]})}),e("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:e("div",{className:"space-y-1 p-2",children:ht.map(i=>a("button",{onClick:()=>s(i.id),className:`w-full flex items-center justify-between px-2 py-2 text-left text-xs rounded hover:bg-slate-800 transition-colors ${t===i.id?"bg-blue-600 text-white":"text-gray-300 hover:text-white"}`,children:[a("span",{className:"flex items-center",children:[e(i.icon,{className:`w-3 h-3 mr-2 ${t===i.id?"text-white":"text-gray-400"}`}),i.label]}),e("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${t===i.id?"text-white bg-blue-500":"text-gray-400 bg-slate-700"}`,children:i.count})]},i.id))})})]}),a("div",{className:"flex-1 p-3 overflow-y-auto scrollbar-thin",children:[a("div",{className:"flex items-center justify-between mb-3",children:[e("h3",{className:"text-sm font-medium text-white",children:((o=ht.find(i=>i.id===t))==null?void 0:o.label)||"Scripts"}),a("div",{className:"flex items-center gap-2",children:[a("span",{className:"text-xs text-gray-400",children:[l.length," scripts"]}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:"+ New Script"})]})]}),e("div",{className:"space-y-2",children:l.map(i=>a("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 hover:bg-slate-700/50 rounded-lg border border-slate-600/50 transition-colors cursor-pointer group",children:[a("div",{className:"flex items-center gap-3",children:[e(d.CodeBracket,{className:"w-4 h-4 text-blue-400"}),a("div",{children:[e("div",{className:"text-sm font-medium text-white group-hover:text-blue-200 transition-colors",children:i.name}),e("div",{className:"text-xs text-gray-400",children:i.size})]})]}),a("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e("button",{className:"p-1 hover:bg-slate-600 rounded text-gray-400 hover:text-white",children:e(d.Pencil,{className:"w-3 h-3"})}),e("button",{className:"p-1 hover:bg-slate-600 rounded text-gray-400 hover:text-red-400",children:e(d.Trash,{className:"w-3 h-3"})})]})]},i.id))}),l.length===0&&r&&e("div",{className:"text-center text-gray-500 mt-12",children:a("p",{className:"text-sm",children:['No scripts found matching "',r,'"']})})]})]})}const tt=[{id:"idle",name:"Idle",duration:"2.5s",frames:60,status:"active"},{id:"walk",name:"Walk Cycle",duration:"1.2s",frames:30,status:"active"},{id:"run",name:"Run Cycle",duration:"0.8s",frames:24,status:"active"},{id:"jump",name:"Jump",duration:"1.8s",frames:45,status:"inactive"},{id:"attack",name:"Attack Combo",duration:"2.1s",frames:52,status:"inactive"}];function ca(){var u,y;const[t,s]=N("idle"),[r,n]=N(!1),[l,o]=N(15),[i,p]=N(1);return a("div",{className:"h-full flex bg-slate-800",children:[a("div",{className:"w-64 bg-slate-900 border-r border-slate-700 flex flex-col",children:[e("div",{className:"p-3 border-b border-slate-700",children:a("div",{className:"flex items-center justify-between mb-2",children:[e("h3",{className:"text-sm font-medium text-white",children:"Animation Clips"}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300",children:"+ New"})]})}),e("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:e("div",{className:"space-y-1 p-2",children:tt.map(k=>a("div",{onClick:()=>s(k.id),className:`p-2 rounded cursor-pointer transition-colors ${t===k.id?"bg-blue-600 text-white":"text-gray-300 hover:bg-slate-800 hover:text-white"}`,children:[a("div",{className:"flex items-center justify-between",children:[a("div",{className:"flex items-center gap-2",children:[e(d.Play,{className:"w-3 h-3"}),e("span",{className:"text-sm font-medium",children:k.name})]}),e("div",{className:`w-2 h-2 rounded-full ${k.status==="active"?"bg-green-400":"bg-gray-500"}`})]}),a("div",{className:"text-xs text-gray-400 mt-1",children:[k.duration," • ",k.frames," frames"]})]},k.id))})})]}),a("div",{className:"flex-1 flex flex-col",children:[e("div",{className:"p-3 border-b border-slate-700 bg-slate-900/50",children:a("div",{className:"flex items-center justify-between",children:[a("div",{className:"flex items-center gap-3",children:[e("button",{onClick:()=>n(!r),className:"flex items-center justify-center w-8 h-8 bg-blue-600 hover:bg-blue-700 rounded transition-colors",children:r?e("div",{className:"w-2 h-2 bg-white"}):e(d.Play,{className:"w-4 h-4 text-white ml-0.5"})}),e("button",{className:"p-2 text-gray-400 hover:text-white transition-colors",children:e(d.ArrowUturnLeft,{className:"w-4 h-4"})}),a("div",{className:"text-sm text-gray-300",children:["Frame: ",e("span",{className:"text-white font-mono",children:l})]})]}),e("div",{className:"flex items-center gap-3",children:a("div",{className:"flex items-center gap-2",children:[e("span",{className:"text-xs text-gray-400",children:"Speed:"}),a("select",{value:i,onChange:k=>p(Number(k.target.value)),className:"bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded",children:[e("option",{value:.25,children:"0.25x"}),e("option",{value:.5,children:"0.5x"}),e("option",{value:1,children:"1x"}),e("option",{value:2,children:"2x"})]})]})})]})}),e("div",{className:"flex-1 p-3",children:a("div",{className:"bg-slate-900/50 rounded-lg p-3 h-full",children:[a("div",{className:"flex items-center justify-between mb-3",children:[e("h4",{className:"text-sm font-medium text-white",children:(u=tt.find(k=>k.id===t))==null?void 0:u.name}),a("div",{className:"text-xs text-gray-400",children:["Duration: ",(y=tt.find(k=>k.id===t))==null?void 0:y.duration]})]}),a("div",{className:"relative",children:[e("div",{className:"h-1 bg-slate-700 rounded-full overflow-hidden",children:e("div",{className:"h-full bg-blue-500",style:{width:`${l/60*100}%`}})}),a("div",{className:"flex justify-between mt-2 text-xs text-gray-400",children:[e("span",{children:"0"}),e("span",{children:"15"}),e("span",{children:"30"}),e("span",{children:"45"}),e("span",{children:"60"})]})]}),a("div",{className:"mt-6",children:[e("h5",{className:"text-xs font-medium text-gray-300 mb-2",children:"Keyframes"}),a("div",{className:"space-y-2",children:[a("div",{className:"flex items-center gap-2 p-2 bg-slate-800/50 rounded",children:[e("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),e("span",{className:"text-xs text-gray-300",children:"Transform"}),e("span",{className:"text-xs text-gray-500 ml-auto",children:"Frame 0, 30, 60"})]}),a("div",{className:"flex items-center gap-2 p-2 bg-slate-800/50 rounded",children:[e("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),e("span",{className:"text-xs text-gray-300",children:"Rotation"}),e("span",{className:"text-xs text-gray-500 ml-auto",children:"Frame 15, 45"})]})]})]})]})})]})]})}const je=[{id:"intro",name:"Scene Intro",start:0,duration:5,type:"camera",color:"bg-blue-500"},{id:"dialogue1",name:"Character Dialogue",start:3,duration:8,type:"audio",color:"bg-green-500"},{id:"action1",name:"Action Sequence",start:10,duration:12,type:"animation",color:"bg-red-500"},{id:"transition",name:"Scene Transition",start:20,duration:3,type:"effect",color:"bg-purple-500"},{id:"outro",name:"Scene Outro",start:23,duration:7,type:"camera",color:"bg-blue-500"}];function da(){var y,k,b,D;const[t,s]=N(0),[r,n]=N(!1),[l,o]=N(1),[i,p]=N(null),u=30;return a("div",{className:"h-full flex flex-col bg-slate-800",children:[e("div",{className:"p-3 border-b border-slate-700 bg-slate-900/50",children:a("div",{className:"flex items-center justify-between",children:[a("div",{className:"flex items-center gap-3",children:[e("button",{onClick:()=>n(!r),className:"flex items-center justify-center w-8 h-8 bg-blue-600 hover:bg-blue-700 rounded transition-colors",children:r?e("div",{className:"w-2 h-2 bg-white"}):e(d.Play,{className:"w-4 h-4 text-white ml-0.5"})}),e("button",{className:"p-2 text-gray-400 hover:text-white transition-colors",children:e(d.ArrowUturnLeft,{className:"w-4 h-4"})}),a("div",{className:"text-sm text-gray-300 font-mono",children:[Math.floor(t/60),":",(t%60).toString().padStart(2,"0")]})]}),a("div",{className:"flex items-center gap-3",children:[a("div",{className:"flex items-center gap-2",children:[e("span",{className:"text-xs text-gray-400",children:"Zoom:"}),e("input",{type:"range",min:"0.5",max:"3",step:"0.1",value:l,onChange:S=>o(Number(S.target.value)),className:"w-16"}),a("span",{className:"text-xs text-gray-300 w-8",children:[l.toFixed(1),"x"]})]}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:"+ Add Event"})]})]})}),e("div",{className:"flex-1 overflow-auto scrollbar-thin",children:a("div",{className:"p-3",children:[e("div",{className:"relative mb-4",style:{width:`${u*l*20}px`},children:a("div",{className:"h-6 border-b border-slate-600 relative",children:[Array.from({length:u+1},(S,g)=>a("div",{className:"absolute top-0 h-full flex flex-col justify-between",style:{left:`${g*l*20}px`},children:[e("div",{className:"w-px h-2 bg-slate-600"}),a("span",{className:"text-xs text-gray-400 -translate-x-1/2",children:[g,"s"]})]},g)),e("div",{className:"absolute top-0 w-0.5 h-full bg-red-500 z-10",style:{left:`${t*l*20}px`},children:e("div",{className:"w-3 h-3 bg-red-500 -translate-x-1/2 -translate-y-1 rounded-full"})})]})}),e("div",{className:"space-y-2",children:["Camera","Audio","Animation","Effects"].map((S,g)=>a("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-20 text-xs text-gray-300 font-medium",children:S}),e("div",{className:"relative h-8 bg-slate-700/30 rounded border border-slate-600/50 flex-1",style:{width:`${u*l*20}px`},children:je.filter(m=>S==="Camera"&&m.type==="camera"||S==="Audio"&&m.type==="audio"||S==="Animation"&&m.type==="animation"||S==="Effects"&&m.type==="effect").map(m=>e("div",{onClick:()=>p(m.id),className:`absolute top-1 h-6 ${m.color} rounded text-white text-xs flex items-center px-2 cursor-pointer transition-all hover:opacity-80 ${i===m.id?"ring-2 ring-white":""}`,style:{left:`${m.start*l*20}px`,width:`${m.duration*l*20}px`,minWidth:"40px"},children:e("span",{className:"truncate",children:m.name})},m.id))})]},S))})]})}),i&&a("div",{className:"border-t border-slate-700 bg-slate-900/50 p-3",children:[a("div",{className:"flex items-center justify-between",children:[e("h4",{className:"text-sm font-medium text-white",children:(y=je.find(S=>S.id===i))==null?void 0:y.name}),e("button",{onClick:()=>p(null),className:"text-gray-400 hover:text-white",children:e(d.XMark,{className:"w-4 h-4"})})]}),a("div",{className:"mt-2 grid grid-cols-3 gap-3 text-xs",children:[a("div",{children:[e("span",{className:"text-gray-400",children:"Start:"}),a("span",{className:"text-white ml-1",children:[(k=je.find(S=>S.id===i))==null?void 0:k.start,"s"]})]}),a("div",{children:[e("span",{className:"text-gray-400",children:"Duration:"}),a("span",{className:"text-white ml-1",children:[(b=je.find(S=>S.id===i))==null?void 0:b.duration,"s"]})]}),a("div",{children:[e("span",{className:"text-gray-400",children:"Type:"}),e("span",{className:"text-white ml-1 capitalize",children:(D=je.find(S=>S.id===i))==null?void 0:D.type})]})]})]})]})}const ua=[{id:1,type:"info",timestamp:"14:32:01",message:"Engine initialized successfully",source:"Core"},{id:2,type:"info",timestamp:"14:32:02",message:"Scene loaded: MainScene.unity",source:"SceneManager"},{id:3,type:"warning",timestamp:"14:32:05",message:"Texture compression quality reduced for mobile",source:"Renderer"},{id:4,type:"info",timestamp:"14:32:08",message:"Player spawned at position (0, 0, 0)",source:"GameManager"},{id:5,type:"error",timestamp:"14:32:12",message:"Failed to load audio file: missing.ogg",source:"AudioManager"},{id:6,type:"info",timestamp:"14:32:15",message:"Physics simulation started",source:"Physics"},{id:7,type:"warning",timestamp:"14:32:18",message:"Memory usage: 78% of allocated heap",source:"Memory"},{id:8,type:"info",timestamp:"14:32:20",message:"Frame rate: 60 FPS (target: 60)",source:"Renderer"}];function ma(){const[t,s]=N(ua),[r,n]=N("all"),[l,o]=N(""),[i,p]=N(""),u=ue(null),y=t.filter(g=>{const m=r==="all"||g.type===r,G=g.message.toLowerCase().includes(l.toLowerCase())||g.source.toLowerCase().includes(l.toLowerCase());return m&&G}),k=()=>{if(!i.trim())return;const g={id:t.length+1,type:"command",timestamp:new Date().toLocaleTimeString("en-US",{hour12:!1}),message:`> ${i}`,source:"Console"};s(m=>[...m,g]),p("")},b=()=>{s([])};te(()=>{var g;(g=u.current)==null||g.scrollIntoView({behavior:"smooth"})},[t]);const D=g=>{switch(g){case"error":return e(d.XMark,{className:"w-3 h-3 text-red-400"});case"warning":return e("div",{className:"w-3 h-3 bg-yellow-400 rounded-full"});case"command":return e(d.CommandLine,{className:"w-3 h-3 text-blue-400"});default:return e(d.Circle,{className:"w-3 h-3 text-green-400"})}},S=g=>{switch(g){case"error":return"text-red-300";case"warning":return"text-yellow-300";case"command":return"text-blue-300";default:return"text-gray-300"}};return a("div",{className:"h-full flex flex-col bg-slate-800",children:[e("div",{className:"p-3 border-b border-slate-700 bg-slate-900/50",children:a("div",{className:"flex items-center justify-between",children:[a("div",{className:"flex items-center gap-3",children:[e("h3",{className:"text-sm font-medium text-white",children:"Console"}),e("div",{className:"flex items-center gap-1",children:["all","info","warning","error"].map(g=>a("button",{onClick:()=>n(g),className:`px-2 py-1 text-xs rounded transition-colors ${r===g?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-slate-700"}`,children:[g==="all"?"All":g.charAt(0).toUpperCase()+g.slice(1),g!=="all"&&a("span",{className:"ml-1 text-xs",children:["(",t.filter(m=>m.type===g).length,")"]})]},g))})]}),a("div",{className:"flex items-center gap-2",children:[a("div",{className:"relative",children:[e(d.MagnifyingGlass,{className:"w-3 h-3 absolute left-2 top-1.5 text-gray-400"}),e("input",{type:"text",placeholder:"Search logs...",value:l,onChange:g=>o(g.target.value),className:"pl-6 pr-2 py-1 bg-slate-800 border border-slate-600 rounded text-xs text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 w-32"})]}),e("button",{onClick:b,className:"text-xs text-gray-400 hover:text-white transition-colors",children:"Clear"})]})]})}),e("div",{className:"flex-1 overflow-y-auto scrollbar-thin font-mono",children:a("div",{className:"p-2 space-y-1",children:[y.map(g=>a("div",{className:`flex items-start gap-2 px-2 py-1 text-xs hover:bg-slate-700/30 rounded transition-colors ${S(g.type)}`,children:[e("span",{className:"text-gray-500 shrink-0",children:g.timestamp}),e("div",{className:"shrink-0 mt-0.5",children:D(g.type)}),a("span",{className:"text-gray-400 shrink-0 min-w-[80px]",children:["[",g.source,"]"]}),e("span",{className:"break-all",children:g.message})]},g.id)),e("div",{ref:u})]})}),e("div",{className:"border-t border-slate-700 p-2 bg-slate-900/50",children:a("div",{className:"flex items-center gap-2",children:[e("span",{className:"text-gray-400 text-sm",children:">"}),e("input",{type:"text",value:i,onChange:g=>p(g.target.value),onKeyPress:g=>g.key==="Enter"&&k(),placeholder:"Enter command...",className:"flex-1 bg-transparent text-white text-sm font-mono focus:outline-none placeholder-gray-500"}),e("button",{onClick:k,disabled:!i.trim(),className:"text-xs text-blue-400 hover:text-blue-300 disabled:text-gray-600 disabled:cursor-not-allowed transition-colors",children:"Execute"})]})})]})}const Ve=[{id:"pbr-metal",name:"Brushed Metal",type:"PBR",preview:"bg-gradient-to-br from-gray-300 to-gray-600"},{id:"pbr-wood",name:"Oak Wood",type:"PBR",preview:"bg-gradient-to-br from-amber-700 to-amber-900"},{id:"pbr-concrete",name:"Concrete",type:"PBR",preview:"bg-gradient-to-br from-gray-400 to-gray-700"},{id:"pbr-fabric",name:"Canvas Fabric",type:"PBR",preview:"bg-gradient-to-br from-yellow-100 to-yellow-300"},{id:"unlit-glow",name:"Neon Glow",type:"Unlit",preview:"bg-gradient-to-br from-blue-400 to-purple-600"},{id:"transparent-glass",name:"Clear Glass",type:"Transparent",preview:"bg-gradient-to-br from-blue-100 to-blue-200"}],pt=[{id:"all",label:"All Materials",count:Ve.length},{id:"PBR",label:"PBR Materials",count:Ve.filter(t=>t.type==="PBR").length},{id:"Unlit",label:"Unlit Materials",count:Ve.filter(t=>t.type==="Unlit").length},{id:"Transparent",label:"Transparent",count:Ve.filter(t=>t.type==="Transparent").length}];function ha(){var p;const[t,s]=N("all"),[r,n]=N(null),[l,o]=N(""),i=Ve.filter(u=>{const y=t==="all"||u.type===t,k=u.name.toLowerCase().includes(l.toLowerCase());return y&&k});return a("div",{className:"h-full flex bg-slate-800",children:[a("div",{className:"w-48 bg-slate-900 border-r border-slate-700 flex flex-col",children:[e("div",{className:"p-3 border-b border-slate-700",children:a("div",{className:"relative",children:[e(d.MagnifyingGlass,{className:"w-3 h-3 absolute left-2 top-1.5 text-gray-400"}),e("input",{type:"text",placeholder:"Search materials...",value:l,onChange:u=>o(u.target.value),className:"w-full pl-6 pr-2 py-1 bg-slate-800 border border-slate-600 rounded text-xs text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"})]})}),e("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:e("div",{className:"space-y-1 p-2",children:pt.map(u=>a("button",{onClick:()=>s(u.id),className:`w-full flex items-center justify-between px-2 py-2 text-left text-xs rounded hover:bg-slate-800 transition-colors ${t===u.id?"bg-blue-600 text-white":"text-gray-300 hover:text-white"}`,children:[e("span",{children:u.label}),e("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${t===u.id?"text-white bg-blue-500":"text-gray-400 bg-slate-700"}`,children:u.count})]},u.id))})})]}),a("div",{className:"flex-1 flex flex-col",children:[e("div",{className:"p-3 border-b border-slate-700 bg-slate-900/50",children:a("div",{className:"flex items-center justify-between",children:[e("h3",{className:"text-sm font-medium text-white",children:((p=pt.find(u=>u.id===t))==null?void 0:p.label)||"Materials"}),a("div",{className:"flex items-center gap-2",children:[a("span",{className:"text-xs text-gray-400",children:[i.length," materials"]}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:"+ Import Material"})]})]})}),a("div",{className:"flex-1 overflow-y-auto scrollbar-thin p-3",children:[e("div",{className:"grid grid-cols-3 gap-3",children:i.map(u=>a("div",{onClick:()=>n(u.id),className:`group cursor-pointer rounded-lg overflow-hidden border transition-all ${r===u.id?"border-blue-500 ring-2 ring-blue-500/30":"border-slate-600 hover:border-slate-500"}`,children:[a("div",{className:`h-20 ${u.preview} relative`,children:[e("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"}),e("div",{className:"absolute top-2 right-2",children:e("span",{className:"text-xs bg-black/70 text-white px-1.5 py-0.5 rounded",children:u.type})})]}),e("div",{className:"p-2 bg-slate-900/50",children:e("div",{className:"text-xs font-medium text-white group-hover:text-blue-200 transition-colors",children:u.name})})]},u.id))}),i.length===0&&l&&e("div",{className:"text-center text-gray-500 mt-12",children:a("p",{className:"text-sm",children:['No materials found matching "',l,'"']})})]})]}),r&&a("div",{className:"w-64 bg-slate-900 border-l border-slate-700 flex flex-col",children:[e("div",{className:"p-3 border-b border-slate-700",children:a("div",{className:"flex items-center justify-between",children:[e("h4",{className:"text-sm font-medium text-white",children:"Material Properties"}),e("button",{onClick:()=>n(null),className:"text-gray-400 hover:text-white",children:e(d.XMark,{className:"w-4 h-4"})})]})}),a("div",{className:"flex-1 overflow-y-auto scrollbar-thin p-3 space-y-4",children:[a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Albedo"}),a("div",{className:"flex items-center gap-2",children:[e("div",{className:"w-8 h-8 bg-white border border-slate-600 rounded cursor-pointer"}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300",children:"Browse"})]})]}),a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Metallic"}),e("input",{type:"range",min:"0",max:"1",step:"0.01",defaultValue:"0.5",className:"w-full"})]}),a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Roughness"}),e("input",{type:"range",min:"0",max:"1",step:"0.01",defaultValue:"0.5",className:"w-full"})]}),a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Normal Map"}),a("div",{className:"flex items-center gap-2",children:[e("div",{className:"w-8 h-8 bg-blue-300 border border-slate-600 rounded cursor-pointer"}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300",children:"Browse"})]})]}),a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Emission"}),a("div",{className:"flex items-center gap-2",children:[e("div",{className:"w-8 h-8 bg-black border border-slate-600 rounded cursor-pointer"}),e("input",{type:"range",min:"0",max:"2",step:"0.1",defaultValue:"0",className:"flex-1"})]})]})]}),e("div",{className:"p-3 border-t border-slate-700",children:e("button",{className:"w-full bg-blue-600 hover:bg-blue-700 text-white text-xs py-2 rounded transition-colors",children:"Apply to Selection"})})]})]})}const pa=[{id:"grass",name:"Grass",texture:"grass_diffuse.jpg",active:!0},{id:"dirt",name:"Dirt Path",texture:"dirt_diffuse.jpg",active:!0},{id:"rock",name:"Rocky Stone",texture:"rock_diffuse.jpg",active:!0},{id:"sand",name:"Beach Sand",texture:"sand_diffuse.jpg",active:!1}],ga=[{id:"height",name:"Height",icon:d.AdjustmentsVertical,active:!0},{id:"smooth",name:"Smooth",icon:d.AdjustmentsHorizontal,active:!1},{id:"texture",name:"Paint Texture",icon:d.PaintBrush,active:!1},{id:"details",name:"Place Details",icon:d.Sparkles,active:!1}];function fa(){const[t,s]=N("height"),[r,n]=N(15),[l,o]=N(.5),[i,p]=N("grass");return a("div",{className:"h-full flex bg-slate-800",children:[a("div",{className:"w-56 bg-slate-900 border-r border-slate-700 flex flex-col",children:[a("div",{className:"p-3 border-b border-slate-700",children:[e("h3",{className:"text-sm font-medium text-white mb-3",children:"Terrain Tools"}),e("div",{className:"grid grid-cols-2 gap-2",children:ga.map(u=>a("button",{onClick:()=>s(u.id),className:`flex flex-col items-center p-2 rounded text-xs transition-colors ${t===u.id?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-slate-800"}`,children:[e(u.icon,{className:"w-5 h-5 mb-1"}),u.name]},u.id))})]}),a("div",{className:"p-3 border-b border-slate-700",children:[e("h4",{className:"text-xs font-medium text-gray-300 mb-2",children:"Brush Settings"}),a("div",{className:"space-y-3",children:[a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs text-gray-400",children:"Size"}),e("span",{className:"text-xs text-white",children:r})]}),e("input",{type:"range",min:"1",max:"50",value:r,onChange:u=>n(Number(u.target.value)),className:"w-full"})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs text-gray-400",children:"Strength"}),a("span",{className:"text-xs text-white",children:[(l*100).toFixed(0),"%"]})]}),e("input",{type:"range",min:"0",max:"1",step:"0.01",value:l,onChange:u=>o(Number(u.target.value)),className:"w-full"})]}),a("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"falloff",className:"text-blue-600"}),e("label",{htmlFor:"falloff",className:"text-xs text-gray-300",children:"Smooth Falloff"})]})]})]}),t==="texture"&&e("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:a("div",{className:"p-3",children:[a("div",{className:"flex items-center justify-between mb-2",children:[e("h4",{className:"text-xs font-medium text-gray-300",children:"Texture Layers"}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300",children:"+ Add"})]}),e("div",{className:"space-y-2",children:pa.map(u=>a("div",{onClick:()=>p(u.id),className:`flex items-center gap-2 p-2 rounded cursor-pointer transition-colors ${i===u.id?"bg-blue-600 text-white":"text-gray-300 hover:bg-slate-800 hover:text-white"}`,children:[e("div",{className:`w-3 h-3 rounded border-2 ${u.active?"bg-green-500 border-green-500":"border-gray-500"}`}),e("div",{className:"w-8 h-8 bg-gradient-to-br from-green-600 to-green-800 rounded border border-slate-600"}),a("div",{className:"flex-1",children:[e("div",{className:"text-xs font-medium",children:u.name}),e("div",{className:"text-xs text-gray-400",children:u.texture})]})]},u.id))})]})})]}),a("div",{className:"flex-1 flex flex-col",children:[e("div",{className:"p-3 border-b border-slate-700 bg-slate-900/50",children:a("div",{className:"flex items-center justify-between",children:[e("h3",{className:"text-sm font-medium text-white",children:"Terrain Properties"}),a("div",{className:"flex items-center gap-2",children:[e("button",{className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:"Generate Terrain"}),e("button",{className:"text-xs text-red-400 hover:text-red-300 transition-colors",children:"Clear All"})]})]})}),a("div",{className:"flex-1 overflow-y-auto scrollbar-thin p-3",children:[a("div",{className:"grid grid-cols-2 gap-6",children:[a("div",{className:"space-y-4",children:[e("h4",{className:"text-sm font-medium text-white",children:"Heightmap"}),a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Resolution"}),a("select",{className:"w-full bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded",children:[e("option",{children:"512x512"}),e("option",{children:"1024x1024"}),e("option",{children:"2048x2048"})]})]}),a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Height Scale"}),e("input",{type:"number",defaultValue:"100",className:"w-full bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"})]}),a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Import Heightmap"}),a("div",{className:"flex gap-2",children:[e("input",{type:"file",accept:"image/*",className:"hidden",id:"heightmap-upload"}),e("label",{htmlFor:"heightmap-upload",className:"flex-1 bg-slate-800 border border-slate-600 text-gray-400 text-xs p-1 rounded cursor-pointer hover:border-slate-500",children:"Choose file..."}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300",children:"Browse"})]})]})]}),a("div",{className:"space-y-4",children:[e("h4",{className:"text-sm font-medium text-white",children:"Procedural Generation"}),a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Noise Type"}),a("select",{className:"w-full bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded",children:[e("option",{children:"Perlin Noise"}),e("option",{children:"Simplex Noise"}),e("option",{children:"Ridged Noise"})]})]}),a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Octaves"}),e("input",{type:"range",min:"1",max:"8",defaultValue:"4",className:"w-full"})]}),a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Frequency"}),e("input",{type:"range",min:"0.001",max:"0.1",step:"0.001",defaultValue:"0.01",className:"w-full"})]}),a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Amplitude"}),e("input",{type:"range",min:"0.1",max:"2",step:"0.1",defaultValue:"1",className:"w-full"})]}),e("button",{className:"w-full bg-green-600 hover:bg-green-700 text-white text-xs py-2 rounded transition-colors",children:"Generate Terrain"})]})]}),a("div",{className:"mt-6 p-3 bg-slate-900/50 rounded-lg",children:[e("h4",{className:"text-sm font-medium text-white mb-2",children:"Terrain Statistics"}),a("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[a("div",{children:[e("span",{className:"text-gray-400",children:"Vertices:"}),e("span",{className:"text-white ml-1",children:"262,144"})]}),a("div",{children:[e("span",{className:"text-gray-400",children:"Triangles:"}),e("span",{className:"text-white ml-1",children:"524,288"})]}),a("div",{children:[e("span",{className:"text-gray-400",children:"Size:"}),e("span",{className:"text-white ml-1",children:"1000x1000m"})]})]})]})]})]})]})}const ba=[{id:"directional",name:"Directional Light",icon:d.Sun,description:"Sun-like infinite light"},{id:"point",name:"Point Light",icon:d.LightBulb,description:"Omnidirectional light source"},{id:"spot",name:"Spot Light",icon:d.Flashlight,description:"Cone-shaped light beam"},{id:"area",name:"Area Light",icon:d.Square,description:"Rectangular light source"}],gt=[{id:"sun",name:"Main Sun",type:"directional",intensity:1,color:"#ffffff",enabled:!0},{id:"fill",name:"Fill Light",type:"directional",intensity:.3,color:"#87ceeb",enabled:!0},{id:"street1",name:"Street Lamp 1",type:"point",intensity:2,color:"#ffaa44",enabled:!0},{id:"street2",name:"Street Lamp 2",type:"point",intensity:2,color:"#ffaa44",enabled:!1},{id:"spotlight1",name:"Security Light",type:"spot",intensity:5,color:"#ffffff",enabled:!0}];function xa(){const[t,s]=N("sun"),[r,n]=N("realtime"),[l,o]=N(!0),i=gt.find(p=>p.id===t);return a("div",{className:"h-full flex bg-slate-800",children:[a("div",{className:"w-64 bg-slate-900 border-r border-slate-700 flex flex-col",children:[a("div",{className:"p-3 border-b border-slate-700",children:[a("div",{className:"flex items-center justify-between mb-3",children:[e("h3",{className:"text-sm font-medium text-white",children:"Scene Lights"}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300",children:"+ Add Light"})]}),e("div",{className:"grid grid-cols-2 gap-1 mb-3",children:ba.map(p=>a("button",{className:"flex flex-col items-center p-2 bg-slate-800 hover:bg-slate-700 rounded text-xs text-gray-300 hover:text-white transition-colors",title:p.description,children:[e(p.icon,{className:"w-4 h-4 mb-1"}),p.name.split(" ")[0]]},p.id))})]}),e("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:e("div",{className:"space-y-1 p-2",children:gt.map(p=>a("div",{onClick:()=>s(p.id),className:`flex items-center gap-2 p-2 rounded cursor-pointer transition-colors ${t===p.id?"bg-blue-600 text-white":"text-gray-300 hover:bg-slate-800 hover:text-white"}`,children:[e("div",{className:`w-3 h-3 rounded border-2 ${p.enabled?"bg-yellow-500 border-yellow-500":"border-gray-500"}`}),a("div",{className:"flex-1",children:[e("div",{className:"text-sm font-medium",children:p.name}),e("div",{className:"text-xs text-gray-400 capitalize",children:p.type})]}),e("div",{className:"w-4 h-4 rounded border border-gray-600",style:{backgroundColor:p.color}})]},p.id))})})]}),a("div",{className:"flex-1 flex flex-col",children:[e("div",{className:"p-3 border-b border-slate-700 bg-slate-900/50",children:a("div",{className:"flex items-center justify-between",children:[e("h3",{className:"text-sm font-medium text-white",children:i?`${i.name} Properties`:"Lighting Properties"}),e("div",{className:"flex items-center gap-2",children:a("select",{value:r,onChange:p=>n(p.target.value),className:"bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded",children:[e("option",{value:"realtime",children:"Realtime"}),e("option",{value:"baked",children:"Baked"}),e("option",{value:"mixed",children:"Mixed"})]})})]})}),a("div",{className:"flex-1 overflow-y-auto scrollbar-thin p-3",children:[i?a("div",{className:"space-y-6",children:[a("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Basic Properties"}),a("div",{className:"space-y-3",children:[a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Light Type"}),a("select",{className:"w-full bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded",children:[e("option",{value:"directional",children:"Directional"}),e("option",{value:"point",children:"Point"}),e("option",{value:"spot",children:"Spot"}),e("option",{value:"area",children:"Area"})]})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Intensity"}),e("span",{className:"text-xs text-white",children:i.intensity})]}),e("input",{type:"range",min:"0",max:"10",step:"0.1",defaultValue:i.intensity,className:"w-full"})]}),a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Color"}),a("div",{className:"flex items-center gap-2",children:[e("input",{type:"color",defaultValue:i.color,className:"w-8 h-8 border border-slate-600 rounded cursor-pointer"}),e("input",{type:"text",defaultValue:i.color,className:"flex-1 bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"})]})]})]})]}),a("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Shadows"}),a("div",{className:"space-y-3",children:[a("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"cast-shadows",defaultChecked:!0,className:"text-blue-600"}),e("label",{htmlFor:"cast-shadows",className:"text-xs text-gray-300",children:"Cast Shadows"})]}),a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Shadow Resolution"}),a("select",{className:"w-full bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded",children:[e("option",{children:"512"}),e("option",{children:"1024"}),e("option",{children:"2048"}),e("option",{children:"4096"})]})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Shadow Bias"}),e("span",{className:"text-xs text-white",children:"0.001"})]}),e("input",{type:"range",min:"0",max:"0.01",step:"0.0001",defaultValue:"0.001",className:"w-full"})]})]})]}),i.type==="spot"&&a("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Spot Light"}),a("div",{className:"space-y-3",children:[a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Spot Angle"}),e("span",{className:"text-xs text-white",children:"30°"})]}),e("input",{type:"range",min:"1",max:"179",defaultValue:"30",className:"w-full"})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Inner Cone"}),e("span",{className:"text-xs text-white",children:"25°"})]}),e("input",{type:"range",min:"0",max:"30",defaultValue:"25",className:"w-full"})]})]})]})]}):e("div",{className:"text-center text-gray-500 mt-12",children:e("p",{className:"text-sm",children:"Select a light to edit its properties"})}),a("div",{className:"mt-6 p-3 bg-slate-900/50 rounded-lg",children:[a("div",{className:"flex items-center justify-between mb-3",children:[e("h4",{className:"text-sm font-medium text-white",children:"Environment"}),a("label",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",checked:l,onChange:p=>o(p.target.checked),className:"text-blue-600"}),e("span",{className:"text-xs text-gray-300",children:"Enable"})]})]}),l&&a("div",{className:"space-y-3",children:[a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Sky Material"}),a("select",{className:"w-full bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded",children:[e("option",{children:"Procedural Sky"}),e("option",{children:"HDRI Skybox"}),e("option",{children:"Gradient Sky"})]})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Ambient Intensity"}),e("span",{className:"text-xs text-white",children:"0.2"})]}),e("input",{type:"range",min:"0",max:"2",step:"0.1",defaultValue:"0.2",className:"w-full"})]})]})]})]})]})]})}const ft=[{id:"player",name:"Player Character",type:"rigidbody",mass:70,enabled:!0},{id:"crate1",name:"Wooden Crate",type:"rigidbody",mass:15,enabled:!0},{id:"floor",name:"Ground Plane",type:"static",mass:0,enabled:!0},{id:"platform",name:"Moving Platform",type:"kinematic",mass:50,enabled:!0},{id:"trigger1",name:"Door Trigger",type:"trigger",mass:0,enabled:!0}],va=[{id:"box",name:"Box Collider",icon:d.Square},{id:"sphere",name:"Sphere Collider",icon:d.Circle},{id:"capsule",name:"Capsule Collider",icon:d.Capsule},{id:"mesh",name:"Mesh Collider",icon:d.Mesh}],ya=[{id:"default",name:"Default",friction:.6,restitution:0},{id:"ice",name:"Ice",friction:.05,restitution:.1},{id:"rubber",name:"Rubber",friction:.8,restitution:.9},{id:"metal",name:"Metal",friction:.3,restitution:.2}];function wa(){const[t,s]=N("player"),[r,n]=N(!1),[l,o]=N("box"),[i,p]=N(60),u=ft.find(y=>y.id===t);return a("div",{className:"h-full flex bg-slate-800",children:[a("div",{className:"w-64 bg-slate-900 border-r border-slate-700 flex flex-col",children:[a("div",{className:"p-3 border-b border-slate-700",children:[a("div",{className:"flex items-center justify-between mb-3",children:[e("h3",{className:"text-sm font-medium text-white",children:"Physics Objects"}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300",children:"+ Add"})]}),a("div",{className:"flex items-center gap-2 mb-3",children:[e("button",{onClick:()=>n(!r),className:`flex items-center gap-1 px-2 py-1 text-xs rounded transition-colors ${r?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:r?a(ve,{children:[e("div",{className:"w-2 h-2 bg-white"}),"Stop"]}):a(ve,{children:[e(d.Play,{className:"w-3 h-3"}),"Play"]})}),e("button",{className:"px-2 py-1 bg-slate-700 hover:bg-slate-600 text-white text-xs rounded transition-colors",children:"Reset"})]})]}),e("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:e("div",{className:"space-y-1 p-2",children:ft.map(y=>a("div",{onClick:()=>s(y.id),className:`flex items-center gap-2 p-2 rounded cursor-pointer transition-colors ${t===y.id?"bg-blue-600 text-white":"text-gray-300 hover:bg-slate-800 hover:text-white"}`,children:[e("div",{className:`w-3 h-3 rounded border-2 ${y.enabled?"bg-green-500 border-green-500":"border-gray-500"}`}),a("div",{className:"flex-1",children:[e("div",{className:"text-sm font-medium",children:y.name}),a("div",{className:"text-xs text-gray-400 capitalize",children:[y.type," ",y.mass>0&&`• ${y.mass}kg`]})]}),e("div",{className:`w-2 h-2 rounded-full ${y.type==="rigidbody"?"bg-red-400":y.type==="kinematic"?"bg-yellow-400":y.type==="trigger"?"bg-purple-400":"bg-gray-400"}`})]},y.id))})})]}),a("div",{className:"flex-1 flex flex-col",children:[e("div",{className:"p-3 border-b border-slate-700 bg-slate-900/50",children:a("div",{className:"flex items-center justify-between",children:[e("h3",{className:"text-sm font-medium text-white",children:u?`${u.name} Properties`:"Physics Properties"}),a("div",{className:"flex items-center gap-2",children:[e("span",{className:"text-xs text-gray-400",children:"Step Rate:"}),a("select",{value:i,onChange:y=>p(Number(y.target.value)),className:"bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded",children:[e("option",{value:30,children:"30 Hz"}),e("option",{value:60,children:"60 Hz"}),e("option",{value:120,children:"120 Hz"})]})]})]})}),a("div",{className:"flex-1 overflow-y-auto scrollbar-thin p-3",children:[u?a("div",{className:"space-y-6",children:[a("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Rigidbody"}),a("div",{className:"space-y-3",children:[a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Body Type"}),a("select",{className:"w-full bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded",children:[e("option",{value:"rigidbody",children:"Dynamic"}),e("option",{value:"kinematic",children:"Kinematic"}),e("option",{value:"static",children:"Static"}),e("option",{value:"trigger",children:"Trigger"})]})]}),a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Mass (kg)"}),e("input",{type:"number",defaultValue:u.mass,min:"0.1",step:"0.1",className:"w-full bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Linear Drag"}),e("span",{className:"text-xs text-white",children:"0.1"})]}),e("input",{type:"range",min:"0",max:"10",step:"0.1",defaultValue:"0.1",className:"w-full"})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Angular Drag"}),e("span",{className:"text-xs text-white",children:"0.05"})]}),e("input",{type:"range",min:"0",max:"10",step:"0.01",defaultValue:"0.05",className:"w-full"})]}),a("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"gravity",defaultChecked:!0,className:"text-blue-600"}),e("label",{htmlFor:"gravity",className:"text-xs text-gray-300",children:"Use Gravity"})]}),a("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"freeze-rotation",className:"text-blue-600"}),e("label",{htmlFor:"freeze-rotation",className:"text-xs text-gray-300",children:"Freeze Rotation"})]})]})]}),a("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Collider"}),a("div",{className:"space-y-3",children:[a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Collider Type"}),e("div",{className:"grid grid-cols-2 gap-2",children:va.map(y=>a("button",{onClick:()=>o(y.id),className:`flex items-center gap-2 p-2 rounded text-xs transition-colors ${l===y.id?"bg-blue-600 text-white":"bg-slate-800 text-gray-300 hover:bg-slate-700 hover:text-white"}`,children:[e(y.icon,{className:"w-3 h-3"}),y.name.split(" ")[0]]},y.id))})]}),a("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"is-trigger",className:"text-blue-600"}),e("label",{htmlFor:"is-trigger",className:"text-xs text-gray-300",children:"Is Trigger"})]}),a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Size"}),a("div",{className:"grid grid-cols-3 gap-2",children:[e("input",{type:"number",placeholder:"X",defaultValue:"1",step:"0.1",className:"bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"}),e("input",{type:"number",placeholder:"Y",defaultValue:"1",step:"0.1",className:"bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"}),e("input",{type:"number",placeholder:"Z",defaultValue:"1",step:"0.1",className:"bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"})]})]})]})]}),a("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Physics Material"}),a("div",{className:"space-y-3",children:[a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Material Preset"}),e("select",{className:"w-full bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded",children:ya.map(y=>e("option",{value:y.id,children:y.name},y.id))})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Friction"}),e("span",{className:"text-xs text-white",children:"0.6"})]}),e("input",{type:"range",min:"0",max:"1",step:"0.01",defaultValue:"0.6",className:"w-full"})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Bounciness"}),e("span",{className:"text-xs text-white",children:"0.0"})]}),e("input",{type:"range",min:"0",max:"1",step:"0.01",defaultValue:"0",className:"w-full"})]})]})]})]}):e("div",{className:"text-center text-gray-500 mt-12",children:e("p",{className:"text-sm",children:"Select a physics object to edit its properties"})}),a("div",{className:"mt-6 p-3 bg-slate-900/50 rounded-lg",children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"World Settings"}),a("div",{className:"space-y-3",children:[a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Gravity"}),a("div",{className:"grid grid-cols-3 gap-2",children:[e("input",{type:"number",placeholder:"X",defaultValue:"0",className:"bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"}),e("input",{type:"number",placeholder:"Y",defaultValue:"-9.81",className:"bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"}),e("input",{type:"number",placeholder:"Z",defaultValue:"0",className:"bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"})]})]}),a("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"auto-sleep",defaultChecked:!0,className:"text-blue-600"}),e("label",{htmlFor:"auto-sleep",className:"text-xs text-gray-300",children:"Auto Sleep Objects"})]})]})]})]})]})]})}const Ee=[{id:"bgm",name:"Background Music",type:"music",file:"ambient_forest.ogg",playing:!0,volume:.6,loop:!0},{id:"footsteps",name:"Player Footsteps",type:"sfx",file:"footstep_grass.wav",playing:!1,volume:.8,loop:!1},{id:"wind",name:"Wind Ambience",type:"ambient",file:"wind_loop.ogg",playing:!0,volume:.3,loop:!0},{id:"ui-click",name:"UI Click Sound",type:"ui",file:"click_01.wav",playing:!1,volume:1,loop:!1},{id:"door-open",name:"Door Opening",type:"sfx",file:"door_creak.wav",playing:!1,volume:.7,loop:!1}],bt=[{id:"all",label:"All Audio",count:Ee.length},{id:"music",label:"Music",count:Ee.filter(t=>t.type==="music").length},{id:"sfx",label:"Sound Effects",count:Ee.filter(t=>t.type==="sfx").length},{id:"ambient",label:"Ambient",count:Ee.filter(t=>t.type==="ambient").length},{id:"ui",label:"UI Sounds",count:Ee.filter(t=>t.type==="ui").length}];function Na(){var k;const[t,s]=N("all"),[r,n]=N("bgm"),[l,o]=N(.8),[i,p]=N(""),u=Ee.filter(b=>{const D=t==="all"||b.type===t,S=b.name.toLowerCase().includes(i.toLowerCase());return D&&S}),y=Ee.find(b=>b.id===r);return a("div",{className:"h-full flex bg-slate-800",children:[a("div",{className:"w-48 bg-slate-900 border-r border-slate-700 flex flex-col",children:[a("div",{className:"p-3 border-b border-slate-700",children:[a("div",{className:"relative mb-3",children:[e(d.MagnifyingGlass,{className:"w-3 h-3 absolute left-2 top-1.5 text-gray-400"}),e("input",{type:"text",placeholder:"Search audio...",value:i,onChange:b=>p(b.target.value),className:"w-full pl-6 pr-2 py-1 bg-slate-800 border border-slate-600 rounded text-xs text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Master Volume"}),a("span",{className:"text-xs text-white",children:[Math.round(l*100),"%"]})]}),e("input",{type:"range",min:"0",max:"1",step:"0.01",value:l,onChange:b=>o(Number(b.target.value)),className:"w-full"})]})]}),e("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:e("div",{className:"space-y-1 p-2",children:bt.map(b=>a("button",{onClick:()=>s(b.id),className:`w-full flex items-center justify-between px-2 py-2 text-left text-xs rounded hover:bg-slate-800 transition-colors ${t===b.id?"bg-blue-600 text-white":"text-gray-300 hover:text-white"}`,children:[e("span",{children:b.label}),e("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${t===b.id?"text-white bg-blue-500":"text-gray-400 bg-slate-700"}`,children:b.count})]},b.id))})})]}),a("div",{className:"w-80 border-r border-slate-700 flex flex-col",children:[e("div",{className:"p-3 border-b border-slate-700 bg-slate-900/50",children:a("div",{className:"flex items-center justify-between",children:[e("h3",{className:"text-sm font-medium text-white",children:((k=bt.find(b=>b.id===t))==null?void 0:k.label)||"Audio Sources"}),a("div",{className:"flex items-center gap-2",children:[a("span",{className:"text-xs text-gray-400",children:[u.length," files"]}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:"+ Import"})]})]})}),a("div",{className:"flex-1 overflow-y-auto scrollbar-thin p-2",children:[e("div",{className:"space-y-2",children:u.map(b=>a("div",{onClick:()=>n(b.id),className:`p-3 rounded-lg border cursor-pointer transition-all group ${r===b.id?"border-blue-500 bg-blue-600/10":"border-slate-600/50 bg-slate-700/30 hover:border-slate-500 hover:bg-slate-700/50"}`,children:[a("div",{className:"flex items-center justify-between mb-2",children:[a("div",{className:"flex items-center gap-2",children:[e("div",{className:`w-2 h-2 rounded-full ${b.playing?"bg-green-500 animate-pulse":"bg-gray-500"}`}),e("span",{className:"text-sm font-medium text-white",children:b.name})]}),a("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e("button",{className:"p-1 hover:bg-slate-600 rounded text-gray-400 hover:text-white",children:e(d.Play,{className:"w-3 h-3"})}),e("button",{className:"p-1 hover:bg-slate-600 rounded text-gray-400 hover:text-white",children:e(d.Pencil,{className:"w-3 h-3"})})]})]}),a("div",{className:"text-xs text-gray-400 mb-2",children:[b.file," • ",b.type]}),a("div",{className:"flex items-center gap-2",children:[e("div",{className:"flex-1 h-1 bg-slate-600 rounded-full overflow-hidden",children:e("div",{className:"h-full bg-blue-500",style:{width:`${b.volume*100}%`}})}),a("span",{className:"text-xs text-gray-400 w-8",children:[Math.round(b.volume*100),"%"]})]})]},b.id))}),u.length===0&&i&&e("div",{className:"text-center text-gray-500 mt-12",children:a("p",{className:"text-sm",children:['No audio files found matching "',i,'"']})})]})]}),a("div",{className:"flex-1 flex flex-col",children:[e("div",{className:"p-3 border-b border-slate-700 bg-slate-900/50",children:a("div",{className:"flex items-center justify-between",children:[e("h3",{className:"text-sm font-medium text-white",children:y?`${y.name} Properties`:"Audio Properties"}),a("div",{className:"flex items-center gap-2",children:[e("button",{className:"p-1.5 hover:bg-slate-800 rounded text-gray-400 hover:text-green-400 transition-colors",children:e(d.Play,{className:"w-4 h-4"})}),e("button",{className:"p-1.5 hover:bg-slate-800 rounded text-gray-400 hover:text-red-400 transition-colors",children:e("div",{className:"w-4 h-4 bg-current"})})]})]})}),a("div",{className:"flex-1 overflow-y-auto scrollbar-thin p-3",children:[y?a("div",{className:"space-y-6",children:[a("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Basic Properties"}),a("div",{className:"space-y-3",children:[a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Audio Clip"}),a("div",{className:"flex items-center gap-2",children:[e("input",{type:"text",value:y.file,readOnly:!0,className:"flex-1 bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300",children:"Browse"})]})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Volume"}),a("span",{className:"text-xs text-white",children:[Math.round(y.volume*100),"%"]})]}),e("input",{type:"range",min:"0",max:"1",step:"0.01",defaultValue:y.volume,className:"w-full"})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Pitch"}),e("span",{className:"text-xs text-white",children:"1.0"})]}),e("input",{type:"range",min:"0.1",max:"3",step:"0.1",defaultValue:"1",className:"w-full"})]}),a("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"loop",defaultChecked:y.loop,className:"text-blue-600"}),e("label",{htmlFor:"loop",className:"text-xs text-gray-300",children:"Loop"})]}),a("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"play-on-awake",defaultChecked:y.playing,className:"text-blue-600"}),e("label",{htmlFor:"play-on-awake",className:"text-xs text-gray-300",children:"Play on Awake"})]})]})]}),a("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"3D Sound Settings"}),a("div",{className:"space-y-3",children:[a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Spatial Blend"}),e("input",{type:"range",min:"0",max:"1",step:"0.01",defaultValue:"1",className:"w-full"}),a("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e("span",{children:"2D"}),e("span",{children:"3D"})]})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Doppler Level"}),e("span",{className:"text-xs text-white",children:"1.0"})]}),e("input",{type:"range",min:"0",max:"5",step:"0.1",defaultValue:"1",className:"w-full"})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Min Distance"}),e("span",{className:"text-xs text-white",children:"1m"})]}),e("input",{type:"range",min:"0.1",max:"100",step:"0.1",defaultValue:"1",className:"w-full"})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Max Distance"}),e("span",{className:"text-xs text-white",children:"500m"})]}),e("input",{type:"range",min:"1",max:"1000",step:"1",defaultValue:"500",className:"w-full"})]}),a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Volume Rolloff"}),a("select",{className:"w-full bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded",children:[e("option",{children:"Logarithmic Rolloff"}),e("option",{children:"Linear Rolloff"}),e("option",{children:"Custom Rolloff"})]})]})]})]}),a("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Audio Effects"}),a("div",{className:"space-y-3",children:[a("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-xs text-gray-300",children:"Reverb Zone"}),e("input",{type:"checkbox",className:"text-blue-600"})]}),a("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-xs text-gray-300",children:"Low Pass Filter"}),e("input",{type:"checkbox",className:"text-blue-600"})]}),a("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-xs text-gray-300",children:"High Pass Filter"}),e("input",{type:"checkbox",className:"text-blue-600"})]}),a("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-xs text-gray-300",children:"Distortion"}),e("input",{type:"checkbox",className:"text-blue-600"})]})]})]})]}):e("div",{className:"text-center text-gray-500 mt-12",children:e("p",{className:"text-sm",children:"Select an audio source to edit its properties"})}),a("div",{className:"mt-6 p-3 bg-slate-900/50 rounded-lg",children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Audio Mixer Groups"}),a("div",{className:"space-y-2",children:[a("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-xs text-gray-300",children:"Master"}),e("span",{className:"text-xs text-white",children:"0 dB"})]}),a("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-xs text-gray-300",children:"Music"}),e("span",{className:"text-xs text-white",children:"-6 dB"})]}),a("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-xs text-gray-300",children:"SFX"}),e("span",{className:"text-xs text-white",children:"-3 dB"})]}),a("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-xs text-gray-300",children:"Voice"}),e("span",{className:"text-xs text-white",children:"0 dB"})]})]})]})]})]})]})}const Ca=[{id:"particle",name:"Particle System",icon:d.Sparkles,description:"Fire, smoke, magic effects"},{id:"post-processing",name:"Post Processing",icon:d.AdjustmentsHorizontal,description:"Color grading, bloom, etc."},{id:"lighting",name:"Lighting Effects",icon:d.LightBulb,description:"Volumetric fog, god rays"},{id:"water",name:"Water Effects",icon:d.Water,description:"Rivers, oceans, waterfalls"}],at=[{id:"fire1",name:"Campfire",type:"particle",enabled:!0,intensity:.8},{id:"smoke1",name:"Chimney Smoke",type:"particle",enabled:!0,intensity:.6},{id:"bloom",name:"Screen Bloom",type:"post-processing",enabled:!0,intensity:.4},{id:"fog",name:"Volumetric Fog",type:"lighting",enabled:!1,intensity:.3},{id:"water1",name:"Lake Surface",type:"water",enabled:!0,intensity:.7},{id:"rain",name:"Rain Particles",type:"particle",enabled:!1,intensity:1}],ka=[{id:"fire",name:"Fire",color:"#ff4400",icon:"🔥"},{id:"smoke",name:"Smoke",color:"#666666",icon:"💨"},{id:"sparks",name:"Sparks",color:"#ffaa00",icon:"✨"},{id:"snow",name:"Snow",color:"#ffffff",icon:"❄️"},{id:"magic",name:"Magic",color:"#aa44ff",icon:"🪄"},{id:"explosion",name:"Explosion",color:"#ff6600",icon:"💥"}];function Sa(){const[t,s]=N("fire1"),[r,n]=N("all"),[l,o]=N(!1),i=at.find(u=>u.id===t),p=at.filter(u=>r==="all"||u.type===r);return a("div",{className:"h-full flex bg-slate-800",children:[a("div",{className:"w-56 bg-slate-900 border-r border-slate-700 flex flex-col",children:[a("div",{className:"p-3 border-b border-slate-700",children:[e("h3",{className:"text-sm font-medium text-white mb-3",children:"Effect Types"}),a("div",{className:"space-y-1",children:[e("button",{onClick:()=>n("all"),className:`w-full text-left px-2 py-1 text-xs rounded transition-colors ${r==="all"?"bg-blue-600 text-white":"text-gray-300 hover:bg-slate-800 hover:text-white"}`,children:"All Effects"}),Ca.map(u=>a("button",{onClick:()=>n(u.id),className:`w-full flex items-center gap-2 px-2 py-1 text-xs rounded transition-colors ${r===u.id?"bg-blue-600 text-white":"text-gray-300 hover:bg-slate-800 hover:text-white"}`,title:u.description,children:[e(u.icon,{className:"w-3 h-3"}),u.name]},u.id))]})]}),r==="particle"&&a("div",{className:"p-3 border-b border-slate-700",children:[e("h4",{className:"text-xs font-medium text-gray-300 mb-2",children:"Quick Presets"}),e("div",{className:"grid grid-cols-2 gap-1",children:ka.map(u=>a("button",{className:"flex flex-col items-center p-2 bg-slate-800 hover:bg-slate-700 rounded text-xs text-gray-300 hover:text-white transition-colors",title:u.name,children:[e("span",{className:"text-base mb-1",children:u.icon}),e("span",{children:u.name})]},u.id))})]}),e("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:e("div",{className:"space-y-1 p-2",children:p.map(u=>a("div",{onClick:()=>s(u.id),className:`flex items-center gap-2 p-2 rounded cursor-pointer transition-colors ${t===u.id?"bg-blue-600 text-white":"text-gray-300 hover:bg-slate-800 hover:text-white"}`,children:[e("div",{className:`w-3 h-3 rounded border-2 ${u.enabled?"bg-green-500 border-green-500":"border-gray-500"}`}),a("div",{className:"flex-1",children:[e("div",{className:"text-sm font-medium",children:u.name}),e("div",{className:"text-xs text-gray-400 capitalize",children:u.type})]}),e("div",{className:`w-2 h-2 rounded-full ${u.type==="particle"?"bg-orange-400":u.type==="post-processing"?"bg-purple-400":u.type==="lighting"?"bg-yellow-400":"bg-blue-400"}`})]},u.id))})})]}),a("div",{className:"flex-1 flex flex-col",children:[e("div",{className:"p-3 border-b border-slate-700 bg-slate-900/50",children:a("div",{className:"flex items-center justify-between",children:[e("h3",{className:"text-sm font-medium text-white",children:i?`${i.name} Properties`:"Effects Properties"}),a("div",{className:"flex items-center gap-2",children:[e("button",{onClick:()=>o(!l),className:`flex items-center gap-1 px-2 py-1 text-xs rounded transition-colors ${l?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:l?a(ve,{children:[e("div",{className:"w-2 h-2 bg-white"}),"Stop"]}):a(ve,{children:[e(d.Play,{className:"w-3 h-3"}),"Play"]})}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:"+ Add Effect"})]})]})}),a("div",{className:"flex-1 overflow-y-auto scrollbar-thin p-3",children:[i?a("div",{className:"space-y-6",children:[a("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Basic Properties"}),a("div",{className:"space-y-3",children:[a("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"enabled",defaultChecked:i.enabled,className:"text-blue-600"}),e("label",{htmlFor:"enabled",className:"text-xs text-gray-300",children:"Enabled"})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Intensity"}),a("span",{className:"text-xs text-white",children:[(i.intensity*100).toFixed(0),"%"]})]}),e("input",{type:"range",min:"0",max:"1",step:"0.01",defaultValue:i.intensity,className:"w-full"})]})]})]}),i.type==="particle"&&a("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Particle System"}),a("div",{className:"space-y-3",children:[a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Max Particles"}),e("input",{type:"number",defaultValue:"1000",min:"1",max:"10000",className:"w-full bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Emission Rate"}),e("span",{className:"text-xs text-white",children:"50/sec"})]}),e("input",{type:"range",min:"1",max:"500",defaultValue:"50",className:"w-full"})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Lifetime"}),e("span",{className:"text-xs text-white",children:"5.0s"})]}),e("input",{type:"range",min:"0.1",max:"20",step:"0.1",defaultValue:"5",className:"w-full"})]}),a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Start Color"}),a("div",{className:"flex items-center gap-2",children:[e("input",{type:"color",defaultValue:"#ff4400",className:"w-8 h-8 border border-slate-600 rounded cursor-pointer"}),e("input",{type:"text",defaultValue:"#ff4400",className:"flex-1 bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"})]})]}),a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"End Color"}),a("div",{className:"flex items-center gap-2",children:[e("input",{type:"color",defaultValue:"#ff0000",className:"w-8 h-8 border border-slate-600 rounded cursor-pointer"}),e("input",{type:"text",defaultValue:"#ff0000",className:"flex-1 bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"})]})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Size"}),e("span",{className:"text-xs text-white",children:"1.0"})]}),e("input",{type:"range",min:"0.1",max:"10",step:"0.1",defaultValue:"1",className:"w-full"})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Speed"}),e("span",{className:"text-xs text-white",children:"2.0"})]}),e("input",{type:"range",min:"0",max:"20",step:"0.1",defaultValue:"2",className:"w-full"})]}),a("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"looping",defaultChecked:!0,className:"text-blue-600"}),e("label",{htmlFor:"looping",className:"text-xs text-gray-300",children:"Looping"})]})]})]}),i.type==="post-processing"&&a("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Post Processing"}),a("div",{className:"space-y-3",children:[a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Bloom Threshold"}),e("span",{className:"text-xs text-white",children:"1.0"})]}),e("input",{type:"range",min:"0",max:"5",step:"0.1",defaultValue:"1",className:"w-full"})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Bloom Intensity"}),e("span",{className:"text-xs text-white",children:"0.5"})]}),e("input",{type:"range",min:"0",max:"2",step:"0.1",defaultValue:"0.5",className:"w-full"})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Contrast"}),e("span",{className:"text-xs text-white",children:"1.0"})]}),e("input",{type:"range",min:"0",max:"2",step:"0.1",defaultValue:"1",className:"w-full"})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Saturation"}),e("span",{className:"text-xs text-white",children:"1.0"})]}),e("input",{type:"range",min:"0",max:"2",step:"0.1",defaultValue:"1",className:"w-full"})]}),a("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"vignette",className:"text-blue-600"}),e("label",{htmlFor:"vignette",className:"text-xs text-gray-300",children:"Vignette"})]}),a("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"chromatic-aberration",className:"text-blue-600"}),e("label",{htmlFor:"chromatic-aberration",className:"text-xs text-gray-300",children:"Chromatic Aberration"})]})]})]}),i.type==="lighting"&&a("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Lighting Effects"}),a("div",{className:"space-y-3",children:[a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Effect Type"}),a("select",{className:"w-full bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded",children:[e("option",{children:"Volumetric Fog"}),e("option",{children:"God Rays"}),e("option",{children:"Light Shafts"}),e("option",{children:"Atmospheric Scattering"})]})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Density"}),e("span",{className:"text-xs text-white",children:"0.3"})]}),e("input",{type:"range",min:"0",max:"1",step:"0.01",defaultValue:"0.3",className:"w-full"})]}),a("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Color"}),a("div",{className:"flex items-center gap-2",children:[e("input",{type:"color",defaultValue:"#87ceeb",className:"w-8 h-8 border border-slate-600 rounded cursor-pointer"}),e("input",{type:"text",defaultValue:"#87ceeb",className:"flex-1 bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"})]})]})]})]}),i.type==="water"&&a("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Water Effects"}),a("div",{className:"space-y-3",children:[a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Wave Height"}),e("span",{className:"text-xs text-white",children:"0.5"})]}),e("input",{type:"range",min:"0",max:"5",step:"0.1",defaultValue:"0.5",className:"w-full"})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Wave Speed"}),e("span",{className:"text-xs text-white",children:"1.0"})]}),e("input",{type:"range",min:"0",max:"5",step:"0.1",defaultValue:"1",className:"w-full"})]}),a("div",{children:[a("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Transparency"}),e("span",{className:"text-xs text-white",children:"0.8"})]}),e("input",{type:"range",min:"0",max:"1",step:"0.01",defaultValue:"0.8",className:"w-full"})]}),a("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"foam",defaultChecked:!0,className:"text-blue-600"}),e("label",{htmlFor:"foam",className:"text-xs text-gray-300",children:"Foam"})]}),a("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"reflections",defaultChecked:!0,className:"text-blue-600"}),e("label",{htmlFor:"reflections",className:"text-xs text-gray-300",children:"Reflections"})]})]})]})]}):e("div",{className:"text-center text-gray-500 mt-12",children:e("p",{className:"text-sm",children:"Select an effect to edit its properties"})}),a("div",{className:"mt-6 p-3 bg-slate-900/50 rounded-lg",children:[e("h4",{className:"text-sm font-medium text-white mb-2",children:"Performance"}),a("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[a("div",{children:[e("span",{className:"text-gray-400",children:"Active Effects:"}),e("span",{className:"text-white ml-1",children:at.filter(u=>u.enabled).length})]}),a("div",{children:[e("span",{className:"text-gray-400",children:"GPU Usage:"}),e("span",{className:"text-white ml-1",children:"45%"})]})]})]})]})]})]})}function Ma(){const[t,s]=N("select"),[r,n]=N(!1),[l,o]=N(!1),[i,p]=N(null),{selectedObject:u,setSelectedObject:y,setContextMenuHandler:k,addSceneObject:b,removeSceneObject:D,setTransformMode:S,selectedTool:g,setSelectedTool:m,selectedBottomTab:G,setSelectedBottomTab:M,rightPanelWidth:W,setRightPanelWidth:K,bottomPanelHeight:j,setBottomPanelHeight:I,isScenePanelOpen:F,setIsScenePanelOpen:R,isAssetPanelOpen:h,setIsAssetPanelOpen:E,setIsResizingPanels:V,hydrateFromLocalStorage:B}=ge();te(()=>{B()},[B]),te(()=>{k(Me)},[]),te(()=>{const C=c=>{c.key==="Delete"&&u&&(D(u),y(null),S("select"))};return document.addEventListener("keydown",C),()=>{document.removeEventListener("keydown",C)}},[u,D,y,S]);const Y=C=>{y(C),C&&S("move")},ae=(C,c)=>{if(C){const x=[{label:"Rename",action:()=>ee(C.id),icon:e(d.Pencil,{className:"w-4 h-4"}),shortcut:"F2"},{separator:!0},{label:"Copy",action:()=>Q(C.id),icon:e(d.Copy,{className:"w-4 h-4"}),shortcut:"Ctrl+C"},{label:"Duplicate",action:()=>ce(C.id),icon:e(d.DocumentDuplicate,{className:"w-4 h-4"}),shortcut:"Ctrl+D"},{label:"Delete",action:()=>re(C.id),icon:e(d.Trash,{className:"w-4 h-4"}),shortcut:"Del"},{separator:!0}],A=[];(C.type==="model"||C.type==="mesh")&&A.push({label:"Add Material",action:()=>H(C.id),icon:e(d.Cube,{className:"w-4 h-4"})},{label:"Add Script",action:()=>v(C.id),icon:e(d.CodeBracket,{className:"w-4 h-4"})},{label:"Add Physics",action:()=>P(C.id),icon:e(d.Lightning,{className:"w-4 h-4"})}),C.type==="terrain"&&A.push({label:"Edit Terrain",action:()=>$(C.id),icon:e(d.Mountain,{className:"w-4 h-4"})},{label:"Paint Texture",action:()=>se(C.id),icon:e(d.PaintBrush,{className:"w-4 h-4"})});const X=[{separator:!0},{label:"Color Code",action:()=>{},icon:e(d.ColorSwatch,{className:"w-4 h-4"}),submenu:[{label:"Red",action:()=>_(C.id,"red"),color:"#ef4444"},{label:"Orange",action:()=>_(C.id,"orange"),color:"#f97316"},{label:"Yellow",action:()=>_(C.id,"yellow"),color:"#eab308"},{label:"Green",action:()=>_(C.id,"green"),color:"#22c55e"},{label:"Blue",action:()=>_(C.id,"blue"),color:"#3b82f6"},{label:"Purple",action:()=>_(C.id,"purple"),color:"#a855f7"},{label:"Clear",action:()=>_(C.id,null),icon:e(d.XMark,{className:"w-3 h-3"})}]}];return[...x,...A,...X]}else{const x=[{label:"Create Object",action:()=>{},icon:e(d.PlusCircle,{className:"w-4 h-4"}),submenu:[{label:"Cube",action:()=>J("cube"),icon:e(d.Cube,{className:"w-4 h-4"})},{label:"Sphere",action:()=>J("sphere"),icon:e(d.Circle,{className:"w-4 h-4"})},{label:"Cylinder",action:()=>J("cylinder"),icon:e(d.Rectangle,{className:"w-4 h-4"})},{label:"Plane",action:()=>J("plane"),icon:e(d.Square2Stack,{className:"w-4 h-4"})},{separator:!0},{label:"Light",action:()=>J("light"),icon:e(d.LightBulb,{className:"w-4 h-4"})},{label:"Camera",action:()=>J("camera"),icon:e(d.Camera,{className:"w-4 h-4"})}]},{separator:!0},{label:"Paste",action:()=>de(),icon:e(d.Clipboard,{className:"w-4 h-4"}),shortcut:"Ctrl+V"},{separator:!0},{label:"Undo",action:()=>me(),icon:e(d.Undo,{className:"w-4 h-4"}),shortcut:"Ctrl+Z"},{label:"Redo",action:()=>ye(),icon:e(d.Redo,{className:"w-4 h-4"}),shortcut:"Ctrl+Y"}];return c==="viewport"?[...x,{separator:!0},{label:"Frame All",action:()=>Ye(),icon:e(d.ArrowsPointingOut,{className:"w-4 h-4"}),shortcut:"F"},{label:"Frame Selected",action:()=>Ze(),icon:e(d.MagnifyingGlass,{className:"w-4 h-4"}),shortcut:"Shift+F"},{separator:!0},{label:"Reset View",action:()=>Ke(),icon:e(d.ArrowPath,{className:"w-4 h-4"})},{label:"Top View",action:()=>De("top"),icon:e(d.ArrowUp,{className:"w-4 h-4"}),shortcut:"Numpad 7"},{label:"Front View",action:()=>De("front"),icon:e(d.ArrowRight,{className:"w-4 h-4"}),shortcut:"Numpad 1"},{label:"Right View",action:()=>De("right"),icon:e(d.ArrowDown,{className:"w-4 h-4"}),shortcut:"Numpad 3"}]:[...x,{separator:!0},{label:"Select All",action:()=>Be(),icon:e(d.CursorArrowRays,{className:"w-4 h-4"}),shortcut:"Ctrl+A"},{label:"Expand All",action:()=>Oe(),icon:e(d.PlusCircle,{className:"w-4 h-4"})},{label:"Collapse All",action:()=>$e(),icon:e(d.MinusCircle,{className:"w-4 h-4"})}]}},ee=C=>{console.log("Rename",C)},Q=C=>{console.log("Copy",C)},ce=C=>{console.log("Duplicate",C)},re=C=>{console.log("Delete",C),D(C)},H=C=>{console.log("Add Material",C),m("materials")},v=C=>{console.log("Add Script",C),M("scripts")},P=C=>{console.log("Add Physics",C),m("physics")},$=C=>{console.log("Edit Terrain",C),m("terrain")},se=C=>{console.log("Paint Texture",C),s("paint")},_=(C,c)=>{console.log("Color Code",C,c)},J=C=>{const c={name:C.charAt(0).toUpperCase()+C.slice(1),type:"mesh",position:[Math.random()*4-2,0,Math.random()*4-2],rotation:[0,0,0],scale:[1,1,1],geometry:C==="cube"?"box":C,material:{color:`hsl(${Math.random()*360}, 70%, 50%)`},visible:!0},x=b(c);y(x.id),S("move"),setTimeout(()=>{const A=document.querySelector("canvas");A&&A.focus()},100)},de=()=>{console.log("Paste")},me=()=>{console.log("Undo")},ye=()=>{console.log("Redo")},Be=()=>{console.log("Select All")},Ze=()=>{console.log("Focus Selected")},Ye=()=>{console.log("Frame All")},Ke=()=>{console.log("Reset View")},De=C=>{console.log("Set View",C)},Oe=()=>{console.log("Expand All")},$e=()=>{console.log("Collapse All")},Me=(C,c,x="scene")=>{C.preventDefault(),C.stopPropagation();const{clientX:A,clientY:X}=C,z=ae(c,x);p({position:{x:A,y:X},items:z})},Fe=()=>{p(null)},Qe=C=>{n(!0),V(!0),document.body.classList.add("dragging-vertical"),C.preventDefault()},Te=C=>{if(!r)return;C.preventDefault();const c=window.innerHeight-C.clientY,x=window.innerHeight*.85,A=80;if(!h&&c>120)E(!0),I(Math.max(200,c));else if(h&&c<A)E(!1),n(!1);else if(h){const z=Math.max(40,Math.min(x,c));I(z)}},Ge=()=>{n(!1),V(!1),document.body.classList.remove("dragging-vertical")},Je=C=>{o(!0),V(!0),document.body.classList.add("dragging-horizontal"),C.preventDefault()},Ie=C=>{if(!l)return;const c=window.innerWidth-C.clientX;!F&&c>150?(R(!0),K(Math.max(200,c)),m("scene")):F&&c<100?(R(!1),o(!1),m("select")):F&&K(Math.max(200,Math.min(600,c)))},Re=()=>{o(!1),V(!1),document.body.classList.remove("dragging-horizontal")};return te(()=>{if(r)return document.addEventListener("mousemove",Te),document.addEventListener("mouseup",Ge),()=>{document.removeEventListener("mousemove",Te),document.removeEventListener("mouseup",Ge)}},[r]),te(()=>{if(l)return document.addEventListener("mousemove",Ie),document.addEventListener("mouseup",Re),()=>{document.removeEventListener("mousemove",Ie),document.removeEventListener("mouseup",Re)}},[l]),a("div",{className:"fixed inset-0 pointer-events-none z-10",onContextMenu:C=>Me(C,null,"viewport"),children:[e(Zt,{}),e(Yt,{selectedTool:t,onToolSelect:s}),a("div",{className:`absolute right-0 top-0 bottom-0 pointer-events-auto no-select z-20 ${l?"":"transition-all duration-300 ease-in-out"}`,style:{width:F?W:48,height:"100vh"},suppressHydrationWarning:!0,children:[e("div",{className:`absolute top-0 w-1 resize-handle cursor-col-resize transition-all duration-200 ${l?"bg-blue-500/75 opacity-100":"bg-slate-700/50 opacity-0 hover:opacity-100 hover:bg-blue-500/75"}`,style:{left:F?"0px":"-4px",bottom:h?j:"40px",zIndex:F?5:1},onMouseDown:Je,suppressHydrationWarning:!0}),e("div",{className:`absolute top-0 bottom-0 w-12 ${F?"left-1":"left-0"}`,children:e(Kt,{selectedTool:g,onToolSelect:m,scenePanelOpen:F,onScenePanelToggle:()=>{R(!F),F&&m("select")}})}),F&&e("div",{className:"absolute left-13 right-0 top-0 bottom-0",children:e(ea,{selectedObject:u,onObjectSelect:Y,isOpen:F,onToggle:()=>{R(!F),F&&m("select")},selectedTool:g,onToolSelect:m,onContextMenu:Me})})]}),!F&&e("div",{className:"absolute top-1 w-6 pointer-events-auto z-50",style:{right:47},children:e("button",{onClick:()=>R(!0),className:"w-6 h-8 text-gray-400 hover:text-blue-400 transition-colors flex items-center justify-center",style:{backgroundColor:"#1e293b",borderLeft:"1px solid #475569",borderTop:"1px solid #475569",borderBottom:"1px solid #475569",borderTopLeftRadius:"6px",borderBottomLeftRadius:"6px"},children:e("div",{className:"w-3 h-3 flex items-center justify-center",children:e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-3 h-3",children:e("path",{d:"m15 18-6-6 6-6"})})})})}),e("div",{className:`absolute left-0 pointer-events-auto h-1 z-50 cursor-row-resize ${r?"bg-blue-500/75 opacity-100 transition-none":"bg-slate-700/50 opacity-0 hover:opacity-100 hover:bg-blue-500/75 transition-all duration-200"}`,style:{right:F?W-4:48,bottom:h?j:40},onMouseDown:Qe,suppressHydrationWarning:!0}),a("div",{className:`absolute bottom-0 left-0 pointer-events-auto no-select z-10 ${l||r?"":"transition-all duration-300 ease-in-out"}`,style:{right:F?W-4:48,height:h?j:40},suppressHydrationWarning:!0,children:[e(ra,{activeTab:G,onTabChange:C=>{M(C),h||E(!0)},isAssetPanelOpen:h,onToggleAssetPanel:()=>E(!h),rightPanelWidth:W,isScenePanelOpen:F}),h&&a("div",{className:"flex-1 bg-gray-900 overflow-hidden",style:{height:j-40},children:[G==="assets"&&e(aa,{onContextMenu:Me}),G==="scripts"&&e(oa,{}),G==="animation"&&e(ca,{}),G==="node-editor"&&e(la,{}),G==="timeline"&&e(da,{}),G==="console"&&e(ma,{}),G==="materials"&&e(ha,{}),G==="terrain"&&e(fa,{}),G==="lighting"&&e(xa,{}),G==="physics"&&e(wa,{}),G==="audio"&&e(Na,{}),G==="effects"&&e(Sa,{})]})]}),i&&e(Qt,{items:i.items,position:i.position,onClose:Fe})]})}function Ta({sceneObj:t}){const s=ue(),{selectedObject:r,setSelectedObject:n,setTransformMode:l,updateSceneObject:o}=ge(),i=r===t.id;te(()=>{s.current&&t.id&&(s.current.userData.sceneObjectId=t.id)},[t.id]);const p=y=>{y.stopPropagation(),n(t.id),l("move")},u=()=>{switch(t.geometry){case"box":return e("boxGeometry",{args:[1,1,1]});case"sphere":return e("sphereGeometry",{args:[.5,32,32]});case"cylinder":return e("cylinderGeometry",{args:[.5,.5,1,32]});case"plane":return e("planeGeometry",{args:[1,1]});default:return e("boxGeometry",{args:[1,1,1]})}};return t.visible?a("mesh",{ref:s,position:t.position,rotation:t.rotation,scale:t.scale,onClick:p,userData:{sceneObjectId:t.id},children:[u(),e("meshStandardMaterial",{color:i?"#4FC3F7":t.material.color,emissive:i?"#1E88E5":"#000000",emissiveIntensity:i?.2:0})]}):null}function La(){const{sceneObjects:t}=ge();return e(ve,{children:t.map(s=>e(Ta,{sceneObj:s},s.id))})}function Oa(){const{contextMenuHandler:t,rightPanelWidth:s,bottomPanelHeight:r,isScenePanelOpen:n,isAssetPanelOpen:l}=ge();te(()=>{console.log("Engine starting...")},[]);const o={top:0,left:0,right:n?s-4:47,bottom:l?r-1:40};return a(ve,{children:[e(Wt,{}),e(Vt,{}),e(Ht,{}),e(Ut,{}),e(_t,{}),e(qt,{}),e(Ma,{}),a(zt,{onContextMenu:t,viewportBounds:o,children:[e(La,{}),a("mesh",{position:[0,-1,0],rotation:[-Math.PI/2,0,0],children:[e("planeGeometry",{args:[10,10]}),e("meshStandardMaterial",{color:"#666666"})]})]})]})}export{Oa as default};
