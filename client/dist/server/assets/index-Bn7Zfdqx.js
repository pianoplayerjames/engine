import{jsx as e,jsxs as s,Fragment as we}from"react/jsx-runtime";import Ge,{useRef as ge,useState as C,useEffect as _,Suspense as Dt,createContext as Ft,useContext as Bt,useCallback as je,useMemo as Rt}from"react";import{Canvas as Ot}from"@react-three/fiber";import{Grid as zt,OrbitControls as It,TransformControls as $t,Stats as Wt,GizmoHelper as Vt,GizmoViewport as Ht,Environment as Gt}from"@react-three/drei";import{subscribe as bt,proxy as Te,useSnapshot as me}from"valtio";import*as fe from"three";import{GLTFLoader as Ut,OBJLoader as _t,FBXLoader as Xt}from"three-stdlib";class Kt{constructor(){this.pluginStores=new Map,this.saveTimeout=null,this.isEnabled=!0,this.debounceTime=1e3,this.projectManager=null,this.lastSavedData=null}setProjectManager(r){this.projectManager=r,console.log("üîó AutoSaveManager connected to ProjectManager")}registerStore(r,a,n={}){const o={store:a,extractSaveData:n.extractSaveData||(()=>({...a})),restoreData:n.restoreData||(l=>Object.assign(a,l)),...n};return this.pluginStores.set(r,o),bt(a,()=>{var l;if(!this.isEnabled){console.log(`üîá Auto-save disabled for ${r}`);return}if(r==="editor"&&((l=a.panels)!=null&&l.isResizingPanels)){console.log("‚è∏Ô∏è Skipping auto-save during panel resize");return}console.log(`üìù ${r} store changed, scheduling auto-save`),this.scheduleAutoSave()}),console.log(`üîå Registered ${r} store for auto-save`),o}unregisterStore(r){this.pluginStores.delete(r),console.log(`üîå Unregistered ${r} store`)}scheduleAutoSave(){console.log("‚è∞ Scheduling auto-save with debounce"),this.saveTimeout&&(console.log("üîÑ Clearing existing auto-save timeout"),clearTimeout(this.saveTimeout)),this.saveTimeout=setTimeout(()=>{console.log("‚ö° Auto-save timeout fired, performing save"),this.performAutoSave()},this.debounceTime)}cancelPendingAutoSave(){this.saveTimeout&&(console.log("üö´ Canceling pending auto-save"),clearTimeout(this.saveTimeout),this.saveTimeout=null)}hasDataChanged(r,a){if(!a)return!0;try{const n=JSON.stringify(r),o=JSON.stringify(a);return n!==o}catch(n){return console.warn("Error comparing save data:",n),!0}}async performAutoSave(){var a;if(console.log("üöÄ AutoSaveManager.performAutoSave() called"),!this.isEnabled||!this.projectManager){console.log("‚ùå Auto-save skipped - disabled or no project manager");return}const r=this.pluginStores.get("editor");if(r&&((a=r.store.panels)!=null&&a.isResizingPanels)){console.log("‚è∏Ô∏è Skipping auto-save - panels are being resized");return}try{console.log("üìä Getting current store data");const n=this.getAllStoreData();if(!this.hasDataChanged(n,this.lastSavedData)){console.log("‚è∏Ô∏è Skipping auto-save - no changes detected");return}console.log("üíæ Data changed, calling ProjectManager.autoSaveCurrentProject()"),await this.projectManager.autoSaveCurrentProject(),this.lastSavedData=JSON.parse(JSON.stringify(n)),console.log("‚úÖ Auto-save completed via project system")}catch(n){console.warn("‚ùå Auto-save failed:",n)}}loadFromProject(r){if(console.log("üîÑ AutoSaveManager loadFromProject called with:",r),console.log("üîå Registered stores:",Array.from(this.pluginStores.keys())),!r){console.warn("‚ùå No project data provided to loadFromProject");return}for(const[a,n]of this.pluginStores)try{let o=null;r[a]?(o=r[a],console.log(`üìÇ Found ${a} data directly:`,o)):a==="scene"&&r.scene?(o=r.scene,console.log("üìÇ Found scene data:",o)):a==="editor"&&r.editor?(o=r.editor,console.log("üìÇ Found editor data:",o)):a==="render"&&r.render?(o=r.render,console.log("üìÇ Found render data:",o)):console.log(`‚ùå No data found for ${a} plugin`),o&&(console.log(`üîÑ Restoring ${a} state with:`,o),n.restoreData(o),console.log(`‚úÖ ${a} state loaded from project`))}catch(o){console.warn(`‚ùå Failed to load ${a} state from project:`,o)}setTimeout(()=>{this.lastSavedData=JSON.parse(JSON.stringify(this.getAllStoreData())),console.log("üìã Baseline data set for change detection")},100)}getAllStoreData(){const r={};for(const[a,n]of this.pluginStores)try{r[a]=n.extractSaveData()}catch(o){console.warn(`Failed to extract ${a} data:`,o)}return r}async saveNow(){this.saveTimeout&&(clearTimeout(this.saveTimeout),this.saveTimeout=null),await this.performAutoSave()}enable(){this.isEnabled=!0,console.log("‚úÖ Auto-save enabled")}disable(){this.isEnabled=!1,this.saveTimeout&&(clearTimeout(this.saveTimeout),this.saveTimeout=null),console.log("‚ùå Auto-save disabled")}hasUnsavedChanges(){try{const r=this.getAllStoreData();return this.hasDataChanged(r,this.lastSavedData)}catch(r){return console.warn("Error checking for unsaved changes:",r),!1}}getSaveStatus(){return{isEnabled:this.isEnabled,hasProjectManager:!!this.projectManager,registeredStores:Array.from(this.pluginStores.keys()),pendingSave:!!this.saveTimeout,hasUnsavedChanges:this.hasUnsavedChanges()}}}const Se=new Kt;typeof window<"u"&&(window.autoSaveManager=Se,console.log("AutoSaveManager exposed globally: window.autoSaveManager"));const Qe=Object.freeze(Object.defineProperty({__proto__:null,autoSaveManager:Se},Symbol.toStringTag,{value:"Module"}));let De={scene:null,renderer:null};const U=Te({environment:{preset:null,intensity:1,type:"color",environmentType:null},camera:{position:[3,3,3],rotation:[0,0,0],fov:60,near:.1,far:1e3,target:[0,0,0],aspect:16/9},lighting:{ambient:{intensity:.5,color:"#ffffff"},lights:new Map,shadowsEnabled:!0},settings:{shadows:!0,antialias:!0,alpha:!1,powerPreference:"high-performance",physicallyCorrectLights:!0,outputEncoding:"sRGB",toneMapping:"ACES",toneMappingExposure:1},effects:new Map,performance:{fps:0,frameTime:0,drawCalls:0,triangles:0,memory:0,lastUpdate:0}}),Ne={setCamera:t=>{Object.assign(U.camera,t)},setCameraPosition:(t,r,a)=>{U.camera.position[0]=t,U.camera.position[1]=r,U.camera.position[2]=a},setCameraRotation:(t,r,a)=>{U.camera.rotation[0]=t,U.camera.rotation[1]=r,U.camera.rotation[2]=a},setCameraTarget:(t,r,a)=>{U.camera.target[0]=t,U.camera.target[1]=r,U.camera.target[2]=a},addLight:(t,r)=>{U.lighting.lights.set(t,r)},removeLight:t=>{U.lighting.lights.delete(t)},updateLight:(t,r)=>{const a=U.lighting.lights.get(t);a&&Object.assign(a,r)},setAmbientLight:(t,r)=>{U.lighting.ambient.intensity=t,U.lighting.ambient.color=r},updateSettings:t=>{Object.assign(U.settings,t)},setEnvironment:(t,r=1,a="hdr",n="preset")=>{U.environment.preset=t,U.environment.intensity=r,U.environment.type=a,U.environment.environmentType=n},setEnvironmentIntensity:t=>{U.environment.intensity=t},clearEnvironment:()=>{U.environment.preset=null,U.environment.intensity=1,U.environment.type="color",U.environment.environmentType=null},addEffect:(t,r)=>{U.effects.set(t,r)},removeEffect:t=>{U.effects.delete(t)},updateEffect:(t,r)=>{const a=U.effects.get(t);a&&Object.assign(a,r)},updatePerformance:t=>{Object.assign(U.performance,{...t,lastUpdate:performance.now()})},resize:(t,r)=>{De.renderer&&De.renderer.setSize(t,r),U.camera.aspect=t/r},setScene:t=>{De.scene=t},setRenderer:t=>{De.renderer=t},getScene:()=>De.scene,getRenderer:()=>De.renderer,setShadowsEnabled:t=>{U.lighting.shadowsEnabled=t,U.settings.shadows=t},batchUpdateLights:t=>{t.forEach(({id:r,updates:a})=>{Ne.updateLight(r,a)})},applyEnvironmentPreset:t=>{const a={sunset:{preset:"sunset",intensity:1.2,type:"hdr",environmentType:"preset"},studio:{preset:null,intensity:1,type:"color",environmentType:"room"},forest:{preset:"forest",intensity:.8,type:"hdr",environmentType:"preset"}}[t];a&&Object.assign(U.environment,a)}};if(typeof window<"u"){let t=0,r=0;const a=()=>{const n=performance.now(),o=n-t;t=n,r++,r%60===0&&Ne.updatePerformance({fps:Math.round(1e3/o),frameTime:o,drawCalls:0,triangles:0,memory:0}),requestAnimationFrame(a)};requestAnimationFrame(a)}typeof window<"u"&&setTimeout(()=>{Se.registerStore("render",U,{extractSaveData:()=>({camera:{...U.camera},environment:{...U.environment},lighting:{ambient:{...U.lighting.ambient},shadowsEnabled:U.lighting.shadowsEnabled},settings:{...U.settings}}),restoreData:t=>{t.camera&&Object.assign(U.camera,t.camera),t.environment&&Object.assign(U.environment,t.environment),t.lighting&&(t.lighting.ambient&&Object.assign(U.lighting.ambient,t.lighting.ambient),t.lighting.shadowsEnabled!==void 0&&(U.lighting.shadowsEnabled=t.lighting.shadowsEnabled)),t.settings&&Object.assign(U.settings,t.settings)}})},100);const xt="engine-ui-settings",at={panels:{rightPanelWidth:304,bottomPanelHeight:256,scenePropertiesHeight:300,assetsLibraryWidth:250,rightPropertiesMenuPosition:"right"},settings:{gridSettings:{enabled:!0,size:100,cellSize:1,cellThickness:1,cellColor:"#6B7280",sectionSize:10,sectionThickness:2,sectionColor:"#9CA3AF",position:[0,-1,0],fadeDistance:50,fadeStrength:.5,infiniteGrid:!0},viewportSettings:{backgroundColor:"#1a202c"}},bottomTabs:{selectedTab:"assets",tabOrder:["assets","scripts","animation","node-editor","timeline","console","materials","terrain","lighting","physics","audio","effects"]},toolbar:{selectedTool:"scene",tabOrder:["scene","light","effects","folder","star","wifi","cloud","monitor"],bottomTabOrder:["add","settings","fullscreen"]},topLeftMenu:{selectedItem:null}},Zt=()=>{try{const t=localStorage.getItem(xt);if(t){const r=JSON.parse(t);return vt(at,r)}}catch(t){console.warn("Failed to load UI settings from localStorage:",t)}return at},qt=t=>{try{localStorage.setItem(xt,JSON.stringify(t))}catch(r){console.warn("Failed to save UI settings to localStorage:",r)}},nt=(t,r)=>{const a=Zt(),n=Yt(a,t,r);return qt(n),n},vt=(t,r)=>{const a={...t};return Ue(t)&&Ue(r)&&Object.keys(r).forEach(n=>{Ue(r[n])&&n in t?a[n]=vt(t[n],r[n]):a[n]=r[n]}),a},Ue=t=>t&&typeof t=="object"&&!Array.isArray(t),Yt=(t,r,a)=>{const n=r.split("."),o={...t};let l=o;for(let i=0;i<n.length-1;i++){const d=n[i];!(d in l)||!Ue(l[d])?l[d]={}:l[d]={...l[d]},l=l[d]}return l[n[n.length-1]]=a,o},xe={panels:{rightPanelWidth:304,bottomPanelHeight:256,scenePropertiesHeight:300,assetsLibraryWidth:250,rightPropertiesMenuPosition:"right"},settings:{gridSettings:{enabled:!0,size:100,cellSize:1,cellThickness:1,cellColor:"#6B7280",sectionSize:10,sectionThickness:2,sectionColor:"#9CA3AF",position:[0,-1,0],fadeDistance:50,fadeStrength:.5,infiniteGrid:!0},viewportSettings:{backgroundColor:"#1a202c"}},bottomTabs:{selectedTab:"assets",tabOrder:["assets","scripts","animation","node-editor","timeline","console","materials","terrain","lighting","physics","audio","effects"]},toolbar:{selectedTool:"scene",tabOrder:["scene","light","effects","folder","star","wifi","cloud","monitor"],bottomTabOrder:["add","settings","fullscreen"]},topLeftMenu:{selectedItem:null}},D=Te({isOpen:!1,mode:"scene",ui:{rightPanelWidth:xe.panels.rightPanelWidth,bottomPanelHeight:xe.panels.bottomPanelHeight,scenePropertiesHeight:xe.panels.scenePropertiesHeight,assetsLibraryWidth:xe.panels.assetsLibraryWidth,rightPropertiesMenuPosition:xe.panels.rightPropertiesMenuPosition,selectedTool:xe.toolbar.selectedTool,selectedBottomTab:xe.bottomTabs.selectedTab,bottomTabOrder:xe.bottomTabs.tabOrder,toolbarTabOrder:xe.toolbar.tabOrder,toolbarBottomTabOrder:xe.toolbar.bottomTabOrder,topLeftMenuSelected:xe.topLeftMenu.selectedItem},camera:{position:[0,0,5],target:[0,0,0],zoom:1,fov:75},panels:{hierarchy:!0,inspector:!0,console:!1,assets:!1,isScenePanelOpen:!0,isAssetPanelOpen:!0,isResizingPanels:!1},selection:{entity:null,object:null,transformMode:"select"},sceneObjects:[{id:"cube-1",name:"Cube",type:"mesh",position:[0,0,0],rotation:[0,0,0],scale:[1,1,1],geometry:"box",material:{color:"#FFA500"},visible:!0},{id:"sphere-1",name:"Sphere",type:"mesh",position:[2,0,0],rotation:[0,0,0],scale:[1,1,1],geometry:"sphere",material:{color:"#ADD8E6"},visible:!0}],settings:{grid:xe.settings.gridSettings,viewport:xe.settings.viewportSettings,editor:{gridSize:1,snapToGrid:!1,showGrid:!0,showWireframe:!1,cameraSpeed:1}},console:{messages:[],handler:null}}),ne={toggle:()=>{D.isOpen=!D.isOpen},open:()=>{D.isOpen=!0},close:()=>{D.isOpen=!1},setMode:t=>{D.mode=t},togglePanel:t=>{D.panels[t]=!D.panels[t]},setIsScenePanelOpen:t=>{D.panels.isScenePanelOpen=t},setIsAssetPanelOpen:t=>{D.panels.isAssetPanelOpen=t},setIsResizingPanels:t=>{D.panels.isResizingPanels=t},setSelectedEntity:t=>{D.selection.entity=t},setSelectedObject:t=>{D.selection.object=t},setTransformMode:t=>{D.selection.transformMode=t},updateEditorSettings:t=>{Object.assign(D.settings.editor,t)},updateGridSettings:t=>{Object.assign(D.settings.grid,t),nt("settings.gridSettings",D.settings.grid)},updateViewportSettings:t=>{Object.assign(D.settings.viewport,t),nt("settings.viewportSettings",D.settings.viewport)},setRightPanelWidth:t=>{D.ui.rightPanelWidth=t},setBottomPanelHeight:t=>{D.ui.bottomPanelHeight=t},setScenePropertiesHeight:t=>{D.ui.scenePropertiesHeight=t},setAssetsLibraryWidth:t=>{D.ui.assetsLibraryWidth=t},setRightPropertiesMenuPosition:t=>{D.ui.rightPropertiesMenuPosition=t},setSelectedTool:t=>{D.ui.selectedTool=t},setSelectedBottomTab:t=>{D.ui.selectedBottomTab=t},setBottomTabOrder:t=>{D.ui.bottomTabOrder=t},setToolbarTabOrder:t=>{D.ui.toolbarTabOrder=t},setToolbarBottomTabOrder:t=>{D.ui.toolbarBottomTabOrder=t},setTopLeftMenuSelected:t=>{D.ui.topLeftMenuSelected=t},setCameraPosition:t=>{D.camera.position=t},setCameraTarget:t=>{D.camera.target=t},setCameraZoom:t=>{D.camera.zoom=t},setCameraFOV:t=>{D.camera.fov=t},addConsoleMessage:(t,r="info")=>{D.console.messages.push({id:Date.now(),message:t,type:r,timestamp:new Date().toLocaleTimeString()})},clearConsole:()=>{D.console.messages.length=0},setContextMenuHandler:t=>{D.console.handler=t},addSceneObject:t=>{const r={id:`${t.type}-${Date.now()}`,...t};return D.sceneObjects.push(r),r},removeSceneObject:t=>{const r=D.sceneObjects.findIndex(a=>a.id===t);r>=0&&D.sceneObjects.splice(r,1)},updateSceneObject:(t,r)=>{const a=D.sceneObjects.find(n=>n.id===t);a&&Object.assign(a,r)}};typeof window<"u"&&setTimeout(()=>{Se.registerStore("editor",D,{extractSaveData:()=>({ui:{...D.ui},camera:{...D.camera},settings:{...D.settings},panels:{...D.panels},sceneObjects:[...D.sceneObjects]}),restoreData:t=>{t.ui&&Object.assign(D.ui,t.ui),t.camera&&Object.assign(D.camera,t.camera),t.settings&&Object.assign(D.settings,t.settings),t.panels&&Object.assign(D.panels,t.panels),t.sceneObjects&&(D.sceneObjects=t.sceneObjects)}})},100);const Jt=Ge.memo(()=>{const{environment:t}=me(U),[r,a]=C(null);return _(()=>{const n=setTimeout(()=>{a(t.preset&&t.type==="hdr"?t.preset:null)},50);return()=>clearTimeout(n)},[t.preset,t.type]),r?e(Gt,{preset:r,background:!0,environmentIntensity:t.intensity,resolution:256}):null});function ot({children:t,style:r={},onContextMenu:a}){const n=ge(),o=ge(),l=ge(),{camera:i,lighting:d,settings:c,environment:f}=me(U),{selection:p,settings:x}=me(D),{entity:w,transformMode:b}=p,{grid:m,viewport:S}=x,{ambient:H}=d,v=()=>{var A;const y=(A=n.current)==null?void 0:A.object;y&&(Ne.setCameraPosition(y.position.x,y.position.y,y.position.z),Ne.setCameraTarget(n.current.target.x,n.current.target.y,n.current.target.z),console.log("üì∑ Camera position synced:",{position:[y.position.x,y.position.y,y.position.z],target:[n.current.target.x,n.current.target.y,n.current.target.z]}))},j=y=>{if(!l.current||!y)return null;const A=M=>{var L;if(((L=M.userData)==null?void 0:L.sceneObjectId)===y)return M;for(const W of M.children){const R=A(W);if(R)return R}return null};return A(l.current)},[O,z]=C(null);_(()=>{if(!w){z(null);return}const y=()=>{const A=j(w);return A?(z(A),!0):!1};if(!y()){const A=setTimeout(()=>{y()},50);return()=>clearTimeout(A)}},[w,l.current]),_(()=>{const y=()=>{const M=['div[style*="position:absolute"][style*="top:0px"][style*="left:0px"]','div[style*="position: absolute"][style*="top: 0px"][style*="left: 0px"]','div[style*="z-index"][style*="position"][style*="top"]',".stats-panel"];let L=null;for(const W of M)if(L=document.querySelector(W),L&&(L.textContent.includes("FPS")||L.children.length>0))break;return L&&L.style.position!=="fixed"?(L.style.position="fixed",L.style.top="10px",L.style.left="50%",L.style.transform="translateX(-50%)",L.style.zIndex="100",!0):!1},A=new MutationObserver(()=>{y()&&A.disconnect()});return A.observe(document.body,{childList:!0,subtree:!0}),()=>{A.disconnect()}},[]),_(()=>{const y=Ne.getRenderer();y&&y.setClearColor(S.backgroundColor)},[S.backgroundColor]);const q=({scene:y,gl:A,camera:M})=>{l.current=y,Ne.setScene(y),Ne.setRenderer(A),A.shadowMap.enabled=c.shadows,A.physicallyCorrectLights=c.physicallyCorrectLights,A.setClearColor(S.backgroundColor)};return e("div",{style:{width:"100%",height:"100%",backgroundColor:S.backgroundColor,transition:"none",...r},onMouseEnter:()=>{const y=document.querySelector("canvas");y&&y.focus()},children:s(Ot,{camera:{position:i.position,fov:i.fov,near:i.near,far:i.far},gl:{antialias:c.antialias,alpha:c.alpha,powerPreference:c.powerPreference},shadows:c.shadows,dpr:[1,2],flat:!0,resize:{scroll:!1,debounce:0},onCreated:q,style:{backgroundColor:S.backgroundColor,outline:"none"},onContextMenu:y=>{y.preventDefault(),a&&a(y,null,"viewport")},onPointerMissed:()=>{ne.setSelectedEntity(null)},tabIndex:0,children:[e("ambientLight",{intensity:d.ambient.intensity,color:d.ambient.color}),e("directionalLight",{position:[10,10,5],intensity:1,castShadow:c.shadows}),e(Dt,{fallback:null,children:e(Jt,{})}),m.enabled&&e(zt,{position:m.position,args:[m.size,m.size],cellSize:m.cellSize,cellThickness:m.cellThickness,cellColor:m.cellColor,sectionSize:m.sectionSize,sectionThickness:m.sectionThickness,sectionColor:m.sectionColor,fadeDistance:m.fadeDistance,fadeStrength:m.fadeStrength,followCamera:!1,infiniteGrid:m.infiniteGrid}),t,e(It,{ref:n,target:i.target,enablePan:!0,enableZoom:!0,enableRotate:!0,mouseButtons:{LEFT:fe.MOUSE.ROTATE,MIDDLE:fe.MOUSE.DOLLY,RIGHT:null},enabled:!0,onChange:v,onEnd:v}),O&&b!=="select"&&e($t,{ref:o,object:O,mode:b==="move"?"translate":b==="rotate"?"rotate":"scale",size:1,showX:!0,showY:!0,showZ:!0,onMouseDown:()=>n.current&&(n.current.enabled=!1),onMouseUp:()=>n.current&&(n.current.enabled=!0),onChange:()=>{O&&w&&ne.updateSceneObject(w,{position:O.position.toArray(),rotation:O.rotation.toArray(),scale:O.scale.toArray()})}}),e(Wt,{showPanel:0}),e(Vt,{alignment:"bottom-right",margin:[80,80],children:e(Ht,{axisColors:["#ff4757","#2ed573","#3742fa"],labelColor:"white",hideNegativeAxes:!1,hideAxisHeads:!1})})]})})}function Qt({children:t,embedded:r=!1,style:a={},onContextMenu:n,viewportBounds:o}){if(r)return e(ot,{style:a,onContextMenu:n,children:t});const l=o?{position:"fixed",top:o.top||0,left:o.left||0,right:o.right||0,bottom:o.bottom||0,width:"auto",height:"auto"}:{width:"100vw",height:"100vh"};return e(ot,{style:{...l,...a},onContextMenu:n,children:t})}const F=Te({keyboard:{keys:new Map,pressed:new Map,released:new Map,modifiers:{shift:!1,ctrl:!1,alt:!1,meta:!1}},mouse:{position:{x:0,y:0},delta:{x:0,y:0},buttons:new Map,wheel:{x:0,y:0},locked:!1},gamepads:{connected:new Map,events:{connected:new Map,disconnected:new Map}},touch:{touches:new Map,gestures:{pinch:{scale:1,delta:0},pan:{x:0,y:0,deltaX:0,deltaY:0}}},context:{current:"game",bindings:new Map}}),Be={setKeyDown:t=>{switch(F.keyboard.keys.set(t,!0),F.keyboard.pressed.set(t,!0),t.toLowerCase()){case"shift":F.keyboard.modifiers.shift=!0;break;case"control":F.keyboard.modifiers.ctrl=!0;break;case"alt":F.keyboard.modifiers.alt=!0;break;case"meta":F.keyboard.modifiers.meta=!0;break}},setKeyUp:t=>{switch(F.keyboard.keys.set(t,!1),F.keyboard.released.set(t,!0),t.toLowerCase()){case"shift":F.keyboard.modifiers.shift=!1;break;case"control":F.keyboard.modifiers.ctrl=!1;break;case"alt":F.keyboard.modifiers.alt=!1;break;case"meta":F.keyboard.modifiers.meta=!1;break}},setMousePosition:(t,r)=>{F.mouse.delta.x=t-F.mouse.position.x,F.mouse.delta.y=r-F.mouse.position.y,F.mouse.position.x=t,F.mouse.position.y=r},setMouseButton:(t,r)=>{F.mouse.buttons.set(t,r)},setMouseWheel:(t,r)=>{F.mouse.wheel.x=t,F.mouse.wheel.y=r},setMouseLocked:t=>{F.mouse.locked=t},addTouch:(t,r,a,n=1)=>{F.touch.touches.set(t,{x:r,y:a,pressure:n,startTime:Date.now()})},updateTouch:(t,r,a,n=1)=>{const o=F.touch.touches.get(t);o&&Object.assign(o,{x:r,y:a,pressure:n})},removeTouch:t=>{F.touch.touches.delete(t)},updatePinchGesture:(t,r)=>{F.touch.gestures.pinch.scale=t,F.touch.gestures.pinch.delta=r},updatePanGesture:(t,r,a,n)=>{F.touch.gestures.pan.x=t,F.touch.gestures.pan.y=r,F.touch.gestures.pan.deltaX=a,F.touch.gestures.pan.deltaY=n},updateGamepads:()=>{if(!navigator.getGamepads)return;const t=navigator.getGamepads();for(let r=0;r<t.length;r++){const a=t[r];a&&F.gamepads.connected.set(r,{id:a.id,index:a.index,connected:a.connected,buttons:a.buttons.map(n=>({pressed:n.pressed,touched:n.touched,value:n.value})),axes:[...a.axes],timestamp:a.timestamp})}},setGamepadConnected:t=>{F.gamepads.events.connected.set(t.index,t)},setGamepadDisconnected:t=>{F.gamepads.events.disconnected.set(t.index,t),F.gamepads.connected.delete(t.index)},setInputContext:t=>{F.context.current=t},addInputBinding:(t,r,a="game")=>{const n=F.context.bindings.get(a)||new Map;n.set(t,r),F.context.bindings.set(a,n)},removeInputBinding:(t,r="game")=>{const a=F.context.bindings.get(r);a&&a.delete(t)},clearFrameEvents:()=>{F.keyboard.pressed.clear(),F.keyboard.released.clear(),F.gamepads.events.connected.clear(),F.gamepads.events.disconnected.clear(),F.mouse.delta.x=0,F.mouse.delta.y=0,F.mouse.wheel.x=0,F.mouse.wheel.y=0,F.touch.gestures.pinch.delta=0,F.touch.gestures.pan.deltaX=0,F.touch.gestures.pan.deltaY=0},isKeyDown:t=>F.keyboard.keys.get(t)||!1,wasKeyPressed:t=>F.keyboard.pressed.get(t)||!1,wasKeyReleased:t=>F.keyboard.released.get(t)||!1,isMouseButtonDown:t=>F.mouse.buttons.get(t)||!1,getGamepad:t=>F.gamepads.connected.get(t),isGamepadButtonPressed:(t,r)=>{var n;const a=F.gamepads.connected.get(t);return((n=a==null?void 0:a.buttons[r])==null?void 0:n.pressed)||!1},getGamepadAxis:(t,r)=>{const a=F.gamepads.connected.get(t);return(a==null?void 0:a.axes[r])||0},wasGamepadConnected:t=>F.gamepads.events.connected.has(t),wasGamepadDisconnected:t=>F.gamepads.events.disconnected.has(t),getActiveKeys:()=>{const t=[];return F.keyboard.keys.forEach((r,a)=>{r&&t.push(a)}),t},getMouseMovement:()=>({x:F.mouse.delta.x,y:F.mouse.delta.y,magnitude:Math.sqrt(F.mouse.delta.x**2+F.mouse.delta.y**2)}),isComboPressed:t=>t.every(r=>Be.isKeyDown(r))};if(typeof window<"u"){let t=0;const r=()=>{const a=performance.now();a-t>16&&(Be.updateGamepads(),t=a),requestAnimationFrame(r)};requestAnimationFrame(r),window.addEventListener("gamepadconnected",a=>{Be.setGamepadConnected(a.gamepad)}),window.addEventListener("gamepaddisconnected",a=>{Be.setGamepadDisconnected(a.gamepad)})}function er(){const{setKeyDown:t,setKeyUp:r,setMousePosition:a,setMouseButton:n,setMouseWheel:o,updateGamepads:l,setGamepadConnected:i,setGamepadDisconnected:d}=Be;return _(()=>{const c=v=>{console.log("Key down:",v.code),v.preventDefault(),t(v.code)},f=v=>{v.preventDefault(),r(v.code)},p=v=>{a(v.clientX,v.clientY)},x=v=>{n(v.button,!0)},w=v=>{n(v.button,!1)},b=v=>{o(v.deltaX,v.deltaY)},m=v=>{i(v.gamepad)},S=v=>{d(v.gamepad)},H=setInterval(()=>{l()},16);return window.addEventListener("keydown",c),window.addEventListener("keyup",f),window.addEventListener("mousemove",p),window.addEventListener("mousedown",x),window.addEventListener("mouseup",w),window.addEventListener("wheel",b),window.addEventListener("gamepadconnected",m),window.addEventListener("gamepaddisconnected",S),()=>{window.removeEventListener("keydown",c),window.removeEventListener("keyup",f),window.removeEventListener("mousemove",p),window.removeEventListener("mousedown",x),window.removeEventListener("mouseup",w),window.removeEventListener("wheel",b),window.removeEventListener("gamepadconnected",m),window.removeEventListener("gamepaddisconnected",S),clearInterval(H)}},[t,r,a,n,o,l,i,d]),null}let he={context:null};const I=Te({context:{masterVolume:1,enabled:!0,suspended:!1},assets:{sounds:new Map,music:new Map,buffers:new Map},sources:{active:new Map,pool:[],maxSources:32},spatial:{listener:{position:[0,0,0],orientation:[0,0,-1,0,1,0],velocity:[0,0,0]},sources:new Map},groups:{master:{gain:1,muted:!1},sfx:{gain:1,muted:!1},music:{gain:.7,muted:!1},voice:{gain:1,muted:!1},ambient:{gain:.8,muted:!1}},analysis:{enabled:!1,frequency:new Uint8Array(256),waveform:new Float32Array(256),volume:0,peak:0}}),Pe={initAudio:async()=>{if(he.context)return he.context;try{const t=new(window.AudioContext||window.webkitAudioContext);return he.context=t,t.state==="suspended"&&(await t.resume(),I.context.suspended=!1),Pe._setupMasterGain(),t}catch(t){return console.error("Failed to initialize audio context:",t),I.context.enabled=!1,null}},_setupMasterGain:()=>{const t=he.context;t&&(t.masterGain||(t.masterGain=t.createGain(),t.masterGain.connect(t.destination),t.masterGain.gain.value=I.context.masterVolume))},resumeContext:async()=>{const t=he.context;t&&t.state==="suspended"&&(await t.resume(),I.context.suspended=!1)},suspendContext:async()=>{const t=he.context;t&&t.state==="running"&&(await t.suspend(),I.context.suspended=!0)},loadSound:async(t,r,a="sfx")=>{const n=he.context;if(n||await Pe.initAudio(),I.assets.sounds.has(t))return I.assets.sounds.get(t);try{const l=await(await fetch(r)).arrayBuffer(),i=await n.decodeAudioData(l),d={id:t,url:r,buffer:i,group:a,duration:i.duration,channels:i.numberOfChannels,sampleRate:i.sampleRate,loadedAt:Date.now()};return I.assets.sounds.set(t,d),I.assets.buffers.set(t,i),d}catch(o){throw console.error(`Failed to load sound ${t}:`,o),o}},playSound:(t,r={})=>{var b;const a=he.context,n=I.assets.sounds.get(t),o=I.assets.buffers.get(t);if(!a||!n||!o)return console.warn(`Sound ${t} not found or context not initialized`),null;const l=Pe._createSourceNode();l.buffer=o;const i=a.createGain();l.connect(i);const d=r.volume!==void 0?r.volume:1,c=((b=I.groups[n.group])==null?void 0:b.gain)||1;i.gain.value=d*c*I.context.masterVolume,r.loop&&(l.loop=!0),r.loopStart&&(l.loopStart=r.loopStart),r.loopEnd&&(l.loopEnd=r.loopEnd),r.playbackRate&&(l.playbackRate.value=r.playbackRate),r.position&&r.position.length===3?Pe._create3DSource(l,r.position,r).connect(a.masterGain||a.destination):i.connect(a.masterGain||a.destination);const f=()=>{I.sources.active.delete(l),r.position&&I.spatial.sources.delete(l)};l.onended=f;const p=r.when||0,x=r.offset||0,w=r.duration;return w?l.start(p,x,w):l.start(p,x),I.sources.active.set(l,{id:t,startTime:a.currentTime+p,group:n.group,gainNode:i,options:r}),l},_createSourceNode:()=>{const t=he.context;return I.sources.pool.length>0?I.sources.pool.pop():t.createBufferSource()},_create3DSource:(t,r,a={})=>{const o=he.context.createPanner();return o.panningModel=a.panningModel||"HRTF",o.distanceModel=a.distanceModel||"inverse",o.refDistance=a.refDistance||1,o.maxDistance=a.maxDistance||1e4,o.rolloffFactor=a.rolloffFactor||1,o.coneInnerAngle=a.coneInnerAngle||360,o.coneOuterAngle=a.coneOuterAngle||0,o.coneOuterGain=a.coneOuterGain||0,o.positionX.value=r[0],o.positionY.value=r[1],o.positionZ.value=r[2],a.orientation&&(o.orientationX.value=a.orientation[0],o.orientationY.value=a.orientation[1],o.orientationZ.value=a.orientation[2]),t.connect(o),I.spatial.sources.set(t,{panner:o,position:[...r],options:a}),o},stopSound:t=>{typeof t=="string"?I.sources.active.forEach((r,a)=>{r.id===t&&a.stop()}):t.stop()},stopAllSounds:(t=null)=>{I.sources.active.forEach((r,a)=>{(!t||r.group===t)&&a.stop()})},setMasterVolume:t=>{I.context.masterVolume=Math.max(0,Math.min(1,t));const r=he.context;r&&r.masterGain&&(r.masterGain.gain.value=I.context.masterVolume)},setGroupVolume:(t,r)=>{I.groups[t]&&(I.groups[t].gain=Math.max(0,Math.min(1,r)),I.sources.active.forEach(a=>{if(a.group===t&&a.gainNode){const n=a.options,o=n.volume!==void 0?n.volume:1;a.gainNode.gain.value=o*r*I.context.masterVolume}}))},muteGroup:(t,r=!0)=>{I.groups[t]&&(I.groups[t].muted=r,Pe.setGroupVolume(t,r?0:I.groups[t].gain))},setListenerPosition:(t,r,a)=>{I.spatial.listener.position[0]=t,I.spatial.listener.position[1]=r,I.spatial.listener.position[2]=a;const n=he.context;n&&n.listener&&(n.listener.positionX?(n.listener.positionX.value=t,n.listener.positionY.value=r,n.listener.positionZ.value=a):n.listener.setPosition(t,r,a))},setListenerOrientation:(t,r,a,n,o,l)=>{I.spatial.listener.orientation[0]=t,I.spatial.listener.orientation[1]=r,I.spatial.listener.orientation[2]=a,I.spatial.listener.orientation[3]=n,I.spatial.listener.orientation[4]=o,I.spatial.listener.orientation[5]=l;const i=he.context;i&&i.listener&&(i.listener.forwardX?(i.listener.forwardX.value=t,i.listener.forwardY.value=r,i.listener.forwardZ.value=a,i.listener.upX.value=n,i.listener.upY.value=o,i.listener.upZ.value=l):i.listener.setOrientation(t,r,a,n,o,l))},updateSourcePosition:(t,r)=>{const a=I.spatial.sources.get(t);a&&(a.position[0]=r[0],a.position[1]=r[1],a.position[2]=r[2],a.panner.positionX.value=r[0],a.panner.positionY.value=r[1],a.panner.positionZ.value=r[2])},enableAnalysis:()=>{const t=he.context;t&&(t.analyser||(t.analyser=t.createAnalyser(),t.analyser.fftSize=512,t.analyser.smoothingTimeConstant=.8,t.masterGain&&t.masterGain.connect(t.analyser)),I.analysis.enabled=!0,Pe._startAnalysis())},disableAnalysis:()=>{I.analysis.enabled=!1},_startAnalysis:()=>{const t=he.context;if(!t||!t.analyser||!I.analysis.enabled)return;const r=t.analyser,a=()=>{if(!I.analysis.enabled)return;r.getByteFrequencyData(I.analysis.frequency),r.getFloatTimeDomainData(I.analysis.waveform);let n=0,o=0;for(let l=0;l<I.analysis.waveform.length;l++){const i=Math.abs(I.analysis.waveform[l]);n+=i,o=Math.max(o,i)}I.analysis.volume=n/I.analysis.waveform.length,I.analysis.peak=o,requestAnimationFrame(a)};requestAnimationFrame(a)},isPlaying:t=>{for(const[r,a]of I.sources.active)if(a.id===t)return!0;return!1},getActiveSourceCount:()=>I.sources.active.size,preloadSounds:async t=>{const r=t.map(({id:a,url:n,group:o})=>Pe.loadSound(a,n,o));return Promise.allSettled(r)},getContext:()=>he.context};typeof window<"u"&&setInterval(()=>{const t=he.context;t&&I.sources.active.forEach((r,a)=>{var n;(a.playbackState===a.FINISHED_STATE||r.startTime+(((n=a.buffer)==null?void 0:n.duration)||0)<t.currentTime)&&(I.sources.active.delete(a),I.spatial.sources.delete(a),I.sources.pool.length<I.sources.maxSources/2&&I.sources.pool.push(a))})},1e3);function tr(){const{initAudio:t,getContext:r}=Pe;return _(()=>{const a=async()=>{r()||(await t(),document.removeEventListener("click",a),document.removeEventListener("keydown",a))};return document.addEventListener("click",a),document.addEventListener("keydown",a),()=>{document.removeEventListener("click",a),document.removeEventListener("keydown",a)}},[t,r]),null}const k=Te({time:{current:0,delta:0,lastFrame:0,scale:1,paused:!1,startTime:0},performance:{frameCount:0,fps:0,avgFrameTime:0,maxFrameTime:0,minFrameTime:1/0,last60Frames:[]},timers:{oneShot:new Map,recurring:new Map,frame:new Map},loop:{animationFrameId:null,isRunning:!1,callbacks:new Map,systems:[]},scheduling:{timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,realTime:Date.now(),gameTime:0,events:new Map}}),Ce={start:()=>{if(k.loop.isRunning)return;k.loop.isRunning=!0,k.time.lastFrame=performance.now(),k.time.startTime=k.time.lastFrame;const t=r=>{if(!k.loop.isRunning)return;const a=r-k.time.lastFrame,n=a*k.time.scale,o=k.time.paused?0:n;k.time.delta=o,k.time.current+=o,k.time.lastFrame=r,Ce._updatePerformance(a,r),Ce._updateTimers(o,r),k.loop.systems.forEach(l=>{try{l(o,k.time.current,r)}catch(i){console.error("System update error:",i)}}),k.loop.callbacks.forEach(l=>{try{l(o,k.time.current,r)}catch(i){console.error("Loop callback error:",i)}}),typeof window<"u"&&window.inputActions&&window.inputActions.clearFrameEvents(),k.loop.animationFrameId=requestAnimationFrame(t)};k.loop.animationFrameId=requestAnimationFrame(t)},stop:()=>{k.loop.animationFrameId&&(cancelAnimationFrame(k.loop.animationFrameId),k.loop.animationFrameId=null),k.loop.isRunning=!1},pause:()=>{k.time.paused=!0},resume:()=>{k.time.paused=!1,k.time.lastFrame=performance.now()},togglePause:()=>{k.time.paused?Ce.resume():Ce.pause()},setTimeScale:t=>{k.time.scale=Math.max(0,t)},reset:()=>{k.time.current=0,k.time.delta=0,k.performance.frameCount=0,k.performance.fps=0,k.performance.avgFrameTime=0,k.performance.maxFrameTime=0,k.performance.minFrameTime=1/0,k.performance.last60Frames.length=0,k.time.startTime=performance.now()},_updatePerformance:(t,r)=>{k.performance.frameCount++,k.performance.maxFrameTime=Math.max(k.performance.maxFrameTime,t),k.performance.minFrameTime=Math.min(k.performance.minFrameTime,t);const a=k.performance.frameCount;if(k.performance.avgFrameTime=(k.performance.avgFrameTime*(a-1)+t)/a,k.performance.last60Frames.push(r),k.performance.last60Frames.length>60&&k.performance.last60Frames.shift(),k.performance.last60Frames.length>=2){const n=r-k.performance.last60Frames[0];k.performance.fps=Math.round((k.performance.last60Frames.length-1)*1e3/n)}},setTimeout:(t,r,a)=>{const n={callback:r,delay:a,startTime:k.time.current,triggered:!1};return k.timers.oneShot.set(t,n),t},setInterval:(t,r,a)=>{const n={callback:r,interval:a,lastTrigger:k.time.current,active:!0};return k.timers.recurring.set(t,n),t},setFrameTimer:(t,r,a)=>{const n={callback:r,frameInterval:a,lastFrame:k.performance.frameCount,active:!0};return k.timers.frame.set(t,n),t},clearTimer:t=>{k.timers.oneShot.delete(t),k.timers.recurring.delete(t),k.timers.frame.delete(t)},_updateTimers:(t,r)=>{const a=k.time.current,n=k.performance.frameCount,o=[];k.timers.oneShot.forEach((l,i)=>{!l.triggered&&a-l.startTime>=l.delay&&(l.triggered=!0,l.callback(a,t),o.push(i))}),o.forEach(l=>{k.timers.oneShot.delete(l)}),k.timers.recurring.forEach((l,i)=>{l.active&&a-l.lastTrigger>=l.interval&&(l.callback(a,t),l.lastTrigger=a)}),k.timers.frame.forEach((l,i)=>{l.active&&n-l.lastFrame>=l.frameInterval&&(l.callback(n,t),l.lastFrame=n)})},registerSystem:(t,r=0)=>{const a={callback:t,priority:r},n=k.loop.systems.findIndex(o=>o.priority>r);return n===-1?k.loop.systems.push(a):k.loop.systems.splice(n,0,a),()=>{const o=k.loop.systems.indexOf(a);o>=0&&k.loop.systems.splice(o,1)}},registerCallback:(t,r)=>(k.loop.callbacks.set(t,r),()=>{k.loop.callbacks.delete(t)}),unregisterCallback:t=>{k.loop.callbacks.delete(t)},updateRealTime:()=>{k.scheduling.realTime=Date.now()},setGameTime:t=>{k.scheduling.gameTime=t},advanceGameTime:t=>{k.scheduling.gameTime+=t},scheduleEvent:(t,r,a,n=!1)=>{const o={callback:r,triggerTime:a,useGameTime:n,triggered:!1};k.scheduling.events.set(t,o)},cancelEvent:t=>{k.scheduling.events.delete(t)},_processScheduledEvents:()=>{const t=[];k.scheduling.events.forEach((r,a)=>{if(r.triggered)return;const n=r.useGameTime?k.scheduling.gameTime:k.scheduling.realTime;n>=r.triggerTime&&(r.triggered=!0,r.callback(n),t.push(a))}),t.forEach(r=>{k.scheduling.events.delete(r)})},now:()=>k.time.current,dt:()=>k.time.delta,since:t=>k.time.current-t,realTime:()=>k.scheduling.realTime,gameTime:()=>k.scheduling.gameTime,formatTime:(t,r="mm:ss")=>{const a=Math.floor(t/1e3),n=Math.floor(a/60),o=a%60,l=Math.floor(t%1e3);switch(r){case"mm:ss":return`${n.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`;case"mm:ss.ms":return`${n.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}.${l.toString().padStart(3,"0")}`;case"seconds":return(t/1e3).toFixed(2);default:return t.toString()}},lerp:(t,r,a)=>t+(r-t)*a,smoothstep:(t,r,a)=>{const n=Math.max(0,Math.min(1,(a-t)/(r-t)));return n*n*(3-2*n)},easeInOut:t=>t<.5?4*t*t*t:1-Math.pow(-2*t+2,3)/2};typeof window<"u"&&(setInterval(()=>{Ce.updateRealTime(),Ce._processScheduledEvents()},1e3),document.addEventListener("visibilitychange",()=>{document.hidden?Ce.pause():Ce.resume()}));function rr(){const{start:t,stop:r}=Ce;return _(()=>(t(),()=>{r()}),[]),_(()=>{const a=Be.clearFrameEvents;return bt(k,()=>{k.deltaTime>0&&a()})},[]),_(()=>{const a=()=>{const{pause:n,resume:o}=Ce,{isPaused:l,isRunning:i}=k.loop;document.hidden&&i&&!l?n():!document.hidden&&i&&l&&o()};return document.addEventListener("visibilitychange",a),()=>{document.removeEventListener("visibilitychange",a)}},[]),null}const B=Te({entities:new Map,entityCounter:0,sceneRoot:null,selectedEntity:null,spatialIndex:new Map,components:{transform:new Map,mesh:new Map,light:new Map,camera:new Map,script:new Map,physics:new Map,audio:new Map},queryCache:new Map,cacheVersion:0}),ce={createEntity:(t="Entity")=>{const r=B.entityCounter+1,a={id:r,name:`${t}_${r}`,active:!0,parent:null,children:[],components:new Set};return B.entities.set(r,a),B.entityCounter=r,ce.invalidateQueryCache(),r},destroyEntity:t=>{const r=B.entities.get(t);r&&(r.components.forEach(a=>{ce.removeComponent(t,a)}),r.parent&&ce.removeChild(r.parent,t),r.children.forEach(a=>{ce.destroyEntity(a)}),B.entities.delete(t),ce.invalidateQueryCache())},getEntity:t=>B.entities.get(t),setEntityActive:(t,r)=>{const a=B.entities.get(t);a&&(a.active=r,ce.invalidateQueryCache())},addChild:(t,r)=>{const a=B.entities.get(t),n=B.entities.get(r);!a||!n||(n.parent&&ce.removeChild(n.parent,r),a.children.push(r),n.parent=t)},removeChild:(t,r)=>{const a=B.entities.get(t),n=B.entities.get(r);if(!a||!n)return;const o=a.children.indexOf(r);o>=0&&a.children.splice(o,1),n.parent=null},addComponent:(t,r,a={})=>{const n=B.entities.get(t);n&&(B.components[r].set(t,a),n.components.add(r),ce.invalidateQueryCache())},removeComponent:(t,r)=>{const a=B.entities.get(t);a&&(B.components[r].delete(t),a.components.delete(r),ce.invalidateQueryCache())},getComponent:(t,r)=>{var a;return(a=B.components[r])==null?void 0:a.get(t)},updateComponent:(t,r,a)=>{var o;const n=(o=B.components[r])==null?void 0:o.get(t);n&&Object.assign(n,a)},hasComponent:(t,r)=>{var a;return((a=B.components[r])==null?void 0:a.has(t))||!1},getEntitiesWith:(...t)=>{const r=t.sort().join(","),a=B.queryCache.get(r);if(a&&a.version===B.cacheVersion)return a.result;const n=[];return B.entities.forEach((o,l)=>{t.every(d=>o.components.has(d))&&o.active&&n.push({id:l,entity:o,components:t.reduce((d,c)=>(d[c]=B.components[c].get(l),d),{})})}),B.queryCache.set(r,{result:n,version:B.cacheVersion}),n},getEntitiesWithAny:(...t)=>{const r=[];return B.entities.forEach((a,n)=>{if(t.some(l=>a.components.has(l))&&a.active){const l=t.reduce((i,d)=>(a.components.has(d)&&(i[d]=B.components[d].get(n)),i),{});r.push({id:n,entity:a,components:l})}}),r},selectEntity:t=>{B.selectedEntity=t},setSceneRoot:t=>{B.sceneRoot=t},clear:()=>{B.entities.clear(),B.entityCounter=0,B.selectedEntity=null,B.sceneRoot=null,Object.values(B.components).forEach(t=>{t.clear()}),B.queryCache.clear(),B.cacheVersion=0},invalidateQueryCache:()=>{B.cacheVersion++},batchUpdate:t=>{t.forEach(r=>{switch(r.type){case"createEntity":ce.createEntity(r.name);break;case"addComponent":ce.addComponent(r.entityId,r.componentType,r.data);break;case"updateComponent":ce.updateComponent(r.entityId,r.componentType,r.updates);break}})},updateSpatialIndex:(t,r)=>{B.spatialIndex.set(t,r)},removeSpatialIndex:t=>{B.spatialIndex.delete(t)},getEntitiesInRegion:t=>{const r=[];return B.spatialIndex.forEach((a,n)=>{if(sr(t,a)){const o=B.entities.get(n);o&&o.active&&r.push(n)}}),r}};function sr(t,r){return!(t.max.x<r.min.x||t.min.x>r.max.x||t.max.y<r.min.y||t.min.y>r.max.y||t.max.z<r.min.z||t.min.z>r.max.z)}typeof window<"u"&&setTimeout(()=>{Se.registerStore("scene",B,{extractSaveData:()=>({entities:Array.from(B.entities.entries()),entityCounter:B.entityCounter,sceneRoot:B.sceneRoot,selectedEntity:B.selectedEntity,components:Object.fromEntries(Object.entries(B.components).map(([t,r])=>[t,Array.from(r.entries())]))}),restoreData:t=>{t.entities&&(B.entities=new Map(t.entities)),t.entityCounter!==void 0&&(B.entityCounter=t.entityCounter),t.sceneRoot!==void 0&&(B.sceneRoot=t.sceneRoot),t.selectedEntity!==void 0&&(B.selectedEntity=t.selectedEntity),t.components&&Object.entries(t.components).forEach(([r,a])=>{B.components[r]&&(B.components[r]=new Map(a))})}})},100);function ar(){const{createEntity:t,addComponent:r,setSceneRoot:a}=ce;return _(()=>{const n=t("SceneRoot");return a(n),r(n,"transform",{position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]}),()=>{}},[t,r,a]),null}const V=Te({world:{instance:null,gravity:[0,-9.81,0],timeStep:1/60,maxSubSteps:10,enabled:!0,paused:!1},bodies:new Map,collisions:{current:[],matrix:new Map,callbacks:new Map},settings:{broadphase:"naive",solver:"gs",iterations:10,tolerance:1e-7,allowSleep:!0,sleepSpeedLimit:.1,sleepTimeLimit:1,contactSkin:.05},raycasting:{results:[],queries:new Map},performance:{stepTime:0,bodyCount:0,constraintCount:0,collisionPairCount:0}}),Ee={initPhysics:()=>{const t={bodies:[],gravity:V.world.gravity,step:r=>{const a=performance.now();t.bodies.forEach(n=>{if(!n.static&&n.velocity&&V.world.enabled){n.velocity[1]+=t.gravity[1]*r,n.position[0]+=n.velocity[0]*r,n.position[1]+=n.velocity[1]*r,n.position[2]+=n.velocity[2]*r,n.position[1]<0&&n.velocity[1]<0&&(n.position[1]=0,n.velocity[1]*=-n.material.restitution,Ee._triggerCollision(n.entityId,"ground"));const o=.99;n.velocity[0]*=o,n.velocity[1]*=o,n.velocity[2]*=o}}),V.performance.stepTime=performance.now()-a,V.performance.bodyCount=t.bodies.length}};V.world.instance=t},setGravity:(t,r,a)=>{V.world.gravity[0]=t,V.world.gravity[1]=r,V.world.gravity[2]=a,V.world.instance&&(V.world.instance.gravity=[t,r,a])},setEnabled:t=>{V.world.enabled=t},setPaused:t=>{V.world.paused=t},createRigidBody:(t,r={})=>{const a={entityId:t,position:r.position?[...r.position]:[0,0,0],rotation:r.rotation?[...r.rotation]:[0,0,0],velocity:r.velocity?[...r.velocity]:[0,0,0],angularVelocity:r.angularVelocity?[...r.angularVelocity]:[0,0,0],mass:r.mass||1,static:r.static||!1,kinematic:r.kinematic||!1,shape:{type:r.shape||"box",size:r.size?[...r.size]:[1,1,1],radius:r.radius||.5},material:{friction:r.friction||.4,restitution:r.restitution||.3,density:r.density||1},collisionGroup:r.collisionGroup||1,collisionMask:r.collisionMask||-1,sleeping:!1,sleepTime:0,forces:[],impulses:[]};return V.world.instance&&V.world.instance.bodies.push(a),V.bodies.set(t,a),a},removeRigidBody:t=>{if(V.bodies.get(t)){if(V.world.instance){const a=V.world.instance.bodies.findIndex(n=>n.entityId===t);a>=0&&V.world.instance.bodies.splice(a,1)}V.bodies.delete(t)}},updateRigidBody:(t,r)=>{const a=V.bodies.get(t);a&&Object.assign(a,r)},getRigidBody:t=>V.bodies.get(t),applyForce:(t,r,a)=>{const n=V.bodies.get(t);!n||n.static||n.forces.push({force:[...r],point:a?[...a]:null})},applyImpulse:(t,r,a)=>{const n=V.bodies.get(t);!n||n.static||(n.velocity[0]+=r[0]/n.mass,n.velocity[1]+=r[1]/n.mass,n.velocity[2]+=r[2]/n.mass)},applyTorque:(t,r)=>{const a=V.bodies.get(t);!a||a.static||(a.angularVelocity[0]+=r[0],a.angularVelocity[1]+=r[1],a.angularVelocity[2]+=r[2])},setVelocity:(t,r)=>{const a=V.bodies.get(t);a&&(a.velocity[0]=r[0],a.velocity[1]=r[1],a.velocity[2]=r[2])},setPosition:(t,r)=>{const a=V.bodies.get(t);a&&(a.position[0]=r[0],a.position[1]=r[1],a.position[2]=r[2])},setRotation:(t,r)=>{const a=V.bodies.get(t);a&&(a.rotation[0]=r[0],a.rotation[1]=r[1],a.rotation[2]=r[2])},step:t=>{if(!V.world.instance||!V.world.enabled||V.world.paused)return;const r=Math.min(t,V.world.timeStep),a=Math.ceil(t/r),n=Math.min(a,V.world.maxSubSteps);for(let o=0;o<n;o++)V.world.instance.step(r);Ee._processForces(),Ee.detectCollisions()},_processForces:()=>{V.bodies.forEach(t=>{t.static||(t.forces.forEach(({force:r,point:a})=>{t.velocity[0]+=r[0]/t.mass*V.world.timeStep,t.velocity[1]+=r[1]/t.mass*V.world.timeStep,t.velocity[2]+=r[2]/t.mass*V.world.timeStep}),t.forces.length=0,t.impulses.length=0)})},detectCollisions:()=>{const t=Array.from(V.bodies.values()),r=[];for(let a=0;a<t.length;a++)for(let n=a+1;n<t.length;n++){const o=t[a],l=t[n];if(!(o.collisionGroup&l.collisionMask)||!(l.collisionGroup&o.collisionMask))continue;const i=Math.sqrt(Math.pow(o.position[0]-l.position[0],2)+Math.pow(o.position[1]-l.position[1],2)+Math.pow(o.position[2]-l.position[2],2)),d=(o.shape.size[0]+l.shape.size[0])/2;if(i<d){const c={bodyA:o.entityId,bodyB:l.entityId,distance:i,normal:[(l.position[0]-o.position[0])/i,(l.position[1]-o.position[1])/i,(l.position[2]-o.position[2])/i],penetration:d-i};r.push(c),Ee._triggerCollision(o.entityId,l.entityId,c)}}V.collisions.current=r,V.performance.collisionPairCount=r.length},_triggerCollision:(t,r,a=null)=>{const n=V.collisions.callbacks.get(t);n&&n(t,r,a)},onCollision:(t,r)=>{V.collisions.callbacks.set(t,r)},offCollision:t=>{V.collisions.callbacks.delete(t)},raycast:(t,r,a={})=>{const n=Array.from(V.bodies.values()),o=[];return n.forEach(l=>{const i=l.position,d={body:l.entityId,point:i,normal:[0,1,0],distance:Math.sqrt(Math.pow(i[0]-t[0],2)+Math.pow(i[1]-t[1],2)+Math.pow(i[2]-t[2],2))};o.push(d)}),o.sort((l,i)=>l.distance-i.distance),V.raycasting.results=o,o},addRayQuery:(t,r,a,n={})=>{V.raycasting.queries.set(t,{from:r,to:a,options:n,results:[]})},removeRayQuery:t=>{V.raycasting.queries.delete(t)},updateRayQueries:()=>{V.raycasting.queries.forEach((t,r)=>{t.results=Ee.raycast(t.from,t.to,t.options)})},updateSettings:t=>{Object.assign(V.settings,t)},createConstraint:(t,r,a,n={})=>({bodyA:t,bodyB:r,type:a,options:n})};typeof window<"u"&&setInterval(()=>{V.raycasting.queries.size>0&&Ee.updateRayQueries()},16);function nr(){const{initPhysics:t,step:r}=Ee,{deltaTime:a}=me(k);return _(()=>{t()},[t]),_(()=>{a>0&&r(a/1e3)},[a,r]),null}const J=Te({assets:{textures:new Map,models:new Map,sounds:new Map,materials:new Map,animations:new Map,fonts:new Map},loading:{active:new Map,queue:[],progress:{total:0,loaded:0,percentage:0}},metadata:{loaded:new Map,errors:new Map,dependencies:new Map},cache:{maxSize:100*1024*1024,currentSize:0,enabled:!0,strategy:"lru"}}),de={loadAsset:async(t,r,a,n={})=>{if(de.isLoaded(t))return de.getAsset(t,a);J.loading.active.set(t,{type:a,url:r,progress:0,startTime:Date.now()});try{let o;switch(a){case"texture":o=await de._loadTexture(t,r,n);break;case"model":o=await de._loadModel(t,r,n);break;case"sound":o=await de._loadSound(t,r,n);break;default:throw new Error(`Unsupported asset type: ${a}`)}return J.assets[`${a}s`].set(t,o),J.metadata.loaded.set(t,{...o,loadedAt:Date.now(),accessCount:0,lastAccessed:Date.now()}),o.size&&(J.cache.currentSize+=o.size),J.loading.active.delete(t),de.updateProgress(),o}catch(o){throw J.metadata.errors.set(t,o.message),J.loading.active.delete(t),de.updateProgress(),o}},_loadTexture:async(t,r,a={})=>{const o=await(await fetch(r)).blob(),l=URL.createObjectURL(o);return{id:t,url:l,originalUrl:r,type:"texture",format:a.format||"auto",flipY:a.flipY!==!1,wrapS:a.wrapS||"repeat",wrapT:a.wrapT||"repeat",minFilter:a.minFilter||"linear",magFilter:a.magFilter||"linear",size:o.size}},_loadModel:async(t,r,a={})=>{const o=await(await fetch(r)).arrayBuffer();return{id:t,url:r,type:"model",data:o,format:a.format||r.split(".").pop().toLowerCase(),size:o.byteLength}},_loadSound:async(t,r,a={})=>{const o=await(await fetch(r)).arrayBuffer();return{id:t,url:r,type:"sound",data:o,format:a.format||r.split(".").pop().toLowerCase(),volume:a.volume||1,loop:a.loop||!1,size:o.byteLength}},loadAssets:async t=>{const r=new Map;t.forEach(o=>{o.dependencies&&r.set(o.id,o.dependencies)});const a=de._topologicalSort(t,r);J.loading.progress.total=a.length,J.loading.progress.loaded=0;const n=[];for(const o of a)try{const l=await de.loadAsset(o.id,o.url,o.type,o.options);n.push({status:"fulfilled",value:l}),J.loading.progress.loaded++}catch(l){n.push({status:"rejected",reason:l})}return n},getAsset:(t,r)=>{const a=J.assets[`${r}s`].get(t);if(a){const n=J.metadata.loaded.get(t);n&&(n.accessCount++,n.lastAccessed=Date.now())}return a},getTexture:t=>de.getAsset(t,"texture"),getModel:t=>de.getAsset(t,"model"),getSound:t=>de.getAsset(t,"sound"),getMaterial:t=>de.getAsset(t,"material"),unloadAsset:t=>{let r=0;Object.entries(J.assets).forEach(([a,n])=>{var l;const o=n.get(t);o&&(o.size&&(r+=o.size),a==="textures"&&((l=o.url)!=null&&l.startsWith("blob:"))&&URL.revokeObjectURL(o.url),n.delete(t))}),J.metadata.loaded.delete(t),J.metadata.errors.delete(t),J.cache.currentSize=Math.max(0,J.cache.currentSize-r)},clearCache:()=>{J.assets.textures.forEach(t=>{var r;(r=t.url)!=null&&r.startsWith("blob:")&&URL.revokeObjectURL(t.url)}),Object.values(J.assets).forEach(t=>{t.clear()}),J.metadata.loaded.clear(),J.metadata.errors.clear(),J.cache.currentSize=0},evictAssets:t=>{const r=[];switch(J.metadata.loaded.forEach((n,o)=>{r.push({id:o,...n})}),J.cache.strategy){case"lru":r.sort((n,o)=>n.lastAccessed-o.lastAccessed);break;case"lfu":r.sort((n,o)=>n.accessCount-o.accessCount);break;case"fifo":r.sort((n,o)=>n.loadedAt-o.loadedAt);break}let a=0;for(const n of r){if(a>=t)break;a+=n.size||0,de.unloadAsset(n.id)}},checkCacheSize:()=>{if(J.cache.currentSize>J.cache.maxSize){const t=J.cache.currentSize-J.cache.maxSize;de.evictAssets(t)}},updateProgress:()=>{const t=J.metadata.loaded.size,r=t+J.loading.active.size;J.loading.progress.loaded=t,J.loading.progress.total=Math.max(r,J.loading.progress.total),J.loading.progress.percentage=J.loading.progress.total>0?t/J.loading.progress.total*100:0},isLoading:t=>J.loading.active.has(t),hasError:t=>J.metadata.errors.has(t),isLoaded:t=>J.metadata.loaded.has(t),_topologicalSort:(t,r)=>{const a=new Set,n=[],o=new Set,l=i=>{if(o.has(i.id))throw new Error(`Circular dependency detected: ${i.id}`);if(a.has(i.id))return;o.add(i.id);const d=r.get(i.id)||[];for(const c of d){const f=t.find(p=>p.id===c);f&&l(f)}o.delete(i.id),a.add(i.id),n.push(i)};return t.forEach(l),n}};typeof window<"u"&&setInterval(()=>{J.cache.enabled&&de.checkCacheSize()},3e4);function or(){const{checkCacheSize:t}=de;return _(()=>{const r=setInterval(()=>{t()},3e4);return()=>{clearInterval(r)}},[t]),_(()=>{const r=()=>{const{clearCache:a}=de;a()};return window.addEventListener("beforeunload",r),()=>{window.removeEventListener("beforeunload",r)}},[]),null}const it=({type:t,isResizing:r,onResizeStart:a,onResizeEnd:n,onResize:o,position:l,className:i=""})=>{_(()=>{if(!r)return;const p=w=>{w.preventDefault(),o(w)},x=()=>{n()};return document.addEventListener("mousemove",p),document.addEventListener("mouseup",x),()=>{document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",x)}},[r,o,n]);const d=p=>{p.preventDefault(),a()};return e("div",{className:`absolute pointer-events-auto z-50 ${t==="bottom"?"cursor-row-resize":"cursor-col-resize"} ${t==="bottom"?"h-1":"w-1"} ${r?"bg-blue-500/75 opacity-100 transition-none":"bg-slate-700/50 opacity-0 hover:opacity-100 hover:bg-blue-500/75 transition-all duration-200"} ${i}`,style:l,onMouseDown:d,suppressHydrationWarning:!0})},h={Cube3D:({isHovered:t=!1,...r})=>s("svg",{viewBox:"0 0 24 24",fill:"none",...r,children:[e("path",{d:"M12 2L2 7v10l10 5 10-5V7l-10-5z",fill:"#60A5FA",stroke:t?"#2563eb":"#1E40AF",strokeWidth:t?"2":"1",strokeLinejoin:"round"}),e("path",{d:"M2 7l10 5 10-5",stroke:"#1E40AF",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"}),e("path",{d:"M12 12v10",stroke:"#1E40AF",strokeWidth:"1",strokeLinecap:"round"})]}),Mesh:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",...t,children:[e("defs",{children:s("linearGradient",{id:"mesh-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e("stop",{offset:"0%",stopColor:"#F59E0B"}),e("stop",{offset:"100%",stopColor:"#D97706"})]})}),e("path",{d:"M4 4h16v16H4z",fill:"url(#mesh-gradient)",stroke:"#92400E",strokeWidth:"1",opacity:"0.3"}),e("path",{d:"M4 8h16M4 12h16M4 16h16",stroke:"#92400E",strokeWidth:"1"}),e("path",{d:"M8 4v16M12 4v16M16 4v16",stroke:"#92400E",strokeWidth:"1"}),e("circle",{cx:"4",cy:"4",r:"1.5",fill:"#FCD34D"}),e("circle",{cx:"20",cy:"4",r:"1.5",fill:"#FCD34D"}),e("circle",{cx:"4",cy:"20",r:"1.5",fill:"#FCD34D"}),e("circle",{cx:"20",cy:"20",r:"1.5",fill:"#FCD34D"})]}),Select:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",...t,children:[e("path",{d:"M3 3L9.5 20.5L12 13L20.5 9.5L3 3Z",strokeLinejoin:"round"}),e("path",{d:"M13 13L21 21",strokeLinecap:"round"})]}),Camera:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",...t,children:[e("rect",{x:"2",y:"8",width:"20",height:"12",rx:"2",strokeLinejoin:"round"}),e("path",{d:"M7 8L9 5H15L17 8",strokeLinejoin:"round"}),e("circle",{cx:"12",cy:"14",r:"3"}),e("circle",{cx:"12",cy:"14",r:"1.5",fill:"currentColor"})]}),Paint:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",...t,children:[e("path",{d:"M18 3A2.5 2.5 0 0 0 15.5 5.5L7 14L2 22L10 17L18.5 8.5A2.5 2.5 0 0 0 18 3Z",strokeLinejoin:"round"}),e("path",{d:"M15 6L18 9",strokeLinecap:"round"}),e("circle",{cx:"8",cy:"16",r:"1",fill:"currentColor"})]}),Sculpt:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",...t,children:[e("path",{d:"M12 3C8 3 5 6 5 10C5 14 8 17 12 21C16 17 19 14 19 10C19 6 16 3 12 3Z",strokeLinejoin:"round"}),e("path",{d:"M9 10C9 12 10.5 13.5 12 13.5C13.5 13.5 15 12 15 10",strokeLinecap:"round"}),e("circle",{cx:"12",cy:"8",r:"1.5",fill:"currentColor"})]}),Undo:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M3 7v6h6"}),e("path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"})]}),Redo:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M21 7v6h-6"}),e("path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7"})]}),Move:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",...t,children:[e("path",{d:"M12 3L12 21M3 12L21 12",strokeLinecap:"round"}),e("path",{d:"M8 7L12 3L16 7",strokeLinecap:"round",strokeLinejoin:"round"}),e("path",{d:"M16 17L12 21L8 17",strokeLinecap:"round",strokeLinejoin:"round"}),e("path",{d:"M7 8L3 12L7 16",strokeLinecap:"round",strokeLinejoin:"round"}),e("path",{d:"M17 16L21 12L17 8",strokeLinecap:"round",strokeLinejoin:"round"})]}),Rotate:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",...t,children:[e("path",{d:"M12 3v6l4-4-4-4",strokeLinecap:"round",strokeLinejoin:"round"}),e("path",{d:"M21 12a9 9 0 1 1-9-9",strokeLinecap:"round"})]}),Scale:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",...t,children:[e("path",{d:"M21 3L15 9",strokeLinecap:"round"}),e("path",{d:"M21 3H15",strokeLinecap:"round"}),e("path",{d:"M21 3V9",strokeLinecap:"round"}),e("path",{d:"M3 21L9 15",strokeLinecap:"round"}),e("path",{d:"M3 21H9",strokeLinecap:"round"}),e("path",{d:"M3 21V15",strokeLinecap:"round"}),e("rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",fill:"none",opacity:"0.3"})]}),Scene:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:[e("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),e("path",{d:"M3.29 7 12 12l8.71-5"}),e("path",{d:"M12 22V12"})]}),Light:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:[e("path",{d:"M15 9A6 6 0 1 1 9 9C9 10.5 9.5 12 10 13H14C14.5 12 15 10.5 15 9Z",strokeLinejoin:"round"}),e("rect",{x:"10",y:"18",width:"4",height:"4",rx:"0.5",strokeLinejoin:"round"}),e("line",{x1:"9",y1:"18",x2:"15",y2:"18"}),e("line",{x1:"9",y1:"19.5",x2:"15",y2:"19.5"}),e("line",{x1:"9",y1:"21",x2:"15",y2:"21"}),e("circle",{cx:"12",cy:"8",r:"0.5",fill:"currentColor"}),e("circle",{cx:"10.5",cy:"9.5",r:"0.3",fill:"currentColor"}),e("circle",{cx:"13.5",cy:"9.5",r:"0.3",fill:"currentColor"}),e("circle",{cx:"12",cy:"11",r:"0.3",fill:"currentColor"})]}),Effects:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:[e("path",{d:"M13 2L3 14H12L11 22L21 10H12L13 2Z",strokeLinejoin:"round"}),e("path",{d:"M6 6L7 7L6 8L5 7L6 6Z",fill:"currentColor"}),e("path",{d:"M19 4L20 5L19 6L18 5L19 4Z",fill:"currentColor"}),e("path",{d:"M18 16L19 17L18 18L17 17L18 16Z",fill:"currentColor"}),e("path",{d:"M4 15L5 16L4 17L3 16L4 15Z",fill:"currentColor"}),e("circle",{cx:"20",cy:"8",r:"0.5",fill:"currentColor"}),e("circle",{cx:"4",cy:"10",r:"0.5",fill:"currentColor"})]}),Code:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:[e("path",{d:"M16 18L22 12L16 6"}),e("path",{d:"M8 6L2 12L8 18"}),e("path",{d:"M10 20L14 4"})]}),FolderOpen:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:e("path",{d:"M22 19A2 2 0 0 1 20 21H4A2 2 0 0 1 2 19V5A2 2 0 0 1 4 3H9L11 6H20A2 2 0 0 1 22 8Z"})}),Star:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:e("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"})}),Wifi:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:[e("path",{d:"M5 12.55A11 11 0 0 1 19 12.55"}),e("path",{d:"M1.42 9A16 16 0 0 1 22.58 9"}),e("path",{d:"M8.53 16.11A6 6 0 0 1 15.47 16.11"}),e("circle",{cx:"12",cy:"20",r:"1"})]}),Cloud:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:e("path",{d:"M18 10H20A4 4 0 0 1 20 18H6A6 6 0 0 1 6 6C6 4.5 7 3.1 8.5 2.4A8 8 0 0 1 18 10Z"})}),PlusCircle:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:[e("circle",{cx:"12",cy:"12",r:"10"}),e("path",{d:"M8 12H16"}),e("path",{d:"M12 8V16"})]}),Monitor:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:[e("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),e("path",{d:"M8 21H16"}),e("path",{d:"M12 17V21"})]}),MenuBars:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:[e("path",{d:"M3 12H15"}),e("path",{d:"M3 6H21"}),e("path",{d:"M3 18H21"})]}),Settings:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",...t,children:[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),ChevronDown:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:e("path",{d:"m6 9 6 6 6-6"})}),ChevronRight:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:e("path",{d:"m9 18 6-6-6-6"})}),ChevronUp:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:e("path",{d:"m18 15-6-6-6 6"})}),Eye:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"}),e("circle",{cx:"12",cy:"12",r:"3"})]}),EyeSlash:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24"}),e("path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"}),e("path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"}),e("path",{d:"m2 2 20 20"})]}),XMark:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"m18 6-12 12"}),e("path",{d:"m6 6 12 12"})]}),Menu:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",...t,children:[e("line",{x1:"4",y1:"6",x2:"20",y2:"6",strokeLinecap:"round"}),e("line",{x1:"4",y1:"12",x2:"20",y2:"12",strokeLinecap:"round"}),e("line",{x1:"4",y1:"18",x2:"20",y2:"18",strokeLinecap:"round"})]}),Plus:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",...t,children:[e("path",{d:"M5 12h14",strokeLinecap:"round"}),e("path",{d:"M12 5v14",strokeLinecap:"round"})]}),Save:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",...t,children:[e("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",strokeLinejoin:"round"}),e("path",{d:"M17 21V13H7V21",strokeLinejoin:"round"}),e("path",{d:"M7 3V8H15",strokeLinejoin:"round"})]}),Upload:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"7,10 12,5 17,10"}),e("line",{x1:"12",y1:"5",x2:"12",y2:"15"})]}),Download:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"7,10 12,15 17,10"}),e("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),Folder:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:e("path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"})}),Cog:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),QuestionMark:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("circle",{cx:"12",cy:"12",r:"10"}),e("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),e("point",{cx:"12",cy:"17"})]}),MagnifyingGlass:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("circle",{cx:"11",cy:"11",r:"8"}),e("path",{d:"m21 21-4.35-4.35"})]}),Models:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),e("polyline",{points:"3.29,7 12,12 20.71,7"}),e("line",{x1:"12",y1:"22",x2:"12",y2:"12"})]}),Materials:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("circle",{cx:"12",cy:"12",r:"10"}),e("circle",{cx:"12",cy:"12",r:"6"}),e("circle",{cx:"12",cy:"12",r:"2"})]}),Textures:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e("polyline",{points:"21,15 16,10 5,21"})]}),Scripts:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("polyline",{points:"16,18 22,12 16,6"}),e("polyline",{points:"8,6 2,12 8,18"})]}),Audio:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("polygon",{points:"11,5 6,9 2,9 2,15 6,15 11,19 11,5"}),e("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"})]}),Prefabs:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M12 2L2 7l10 5 10-5-10-5z"}),e("path",{d:"M2 17l10 5 10-5"}),e("path",{d:"M2 12l10 5 10-5"})]}),Character:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e("circle",{cx:"12",cy:"7",r:"4"})]}),Terrain:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M3 20h18L12 4 3 20z"}),e("path",{d:"M8 20h8"})]}),CodeBracket:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"m16 18 6-6-6-6"}),e("path",{d:"m8 6-6 6 6 6"})]}),Play:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:e("polygon",{points:"5,3 19,12 5,21"})}),AdjustmentsHorizontal:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M8 12H2"}),e("path",{d:"M22 12h-6"}),e("path",{d:"M12 8V2"}),e("path",{d:"M12 22v-6"})]}),Clock:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("circle",{cx:"12",cy:"12",r:"10"}),e("polyline",{points:"12,6 12,12 16,14"})]}),CommandLine:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"m7 8 3 3-3 3"}),e("path",{d:"M14 16h6"}),e("rect",{x:"2",y:"3",width:"20",height:"18",rx:"2"})]}),CursorArrowRays:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:e("path",{d:"M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z"})}),ArrowsPointingOut:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M16 8L8 16"}),e("path",{d:"M16 16L8 8"}),e("path",{d:"M16 8h-8v8"})]}),Sun:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("circle",{cx:"12",cy:"12",r:"4"}),e("path",{d:"M12 2v2"}),e("path",{d:"M12 20v2"}),e("path",{d:"m4.93 4.93 1.41 1.41"}),e("path",{d:"m17.66 17.66 1.41 1.41"}),e("path",{d:"M2 12h2"}),e("path",{d:"M20 12h2"}),e("path",{d:"m6.34 17.66-1.41 1.41"}),e("path",{d:"m19.07 4.93-1.41 1.41"})]}),ArrowUturnLeft:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M9 14L4 9l5-5"}),e("path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11"})]}),Pencil:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"}),e("path",{d:"m15 5 4 4"})]}),Cube:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),e("path",{d:"M3.29 7 12 12l8.71-5"}),e("path",{d:"M12 22V12"})]}),Trash:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M3 6h18"}),e("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),e("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),e("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),e("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),Circle:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:e("circle",{cx:"12",cy:"12",r:"10"})}),Square:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:e("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"})}),LightBulb:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"}),e("path",{d:"M9 18h6"}),e("path",{d:"M10 22h4"})]}),Flashlight:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M3 11l18-5V5L3 11v5l7-2v-4z"}),e("path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6"})]}),Capsule:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M8.5 2.5a5.5 5.5 0 0 0 0 11h7a5.5 5.5 0 0 0 0-11h-7z"}),e("path",{d:"M8.5 10.5a5.5 5.5 0 0 0 0 11h7a5.5 5.5 0 0 0 0-11h-7z"})]}),Sparkles:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:e("path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.582a.5.5 0 0 1 0 .962L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z"})}),Water:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M12 22c5.523 0 10-4.477 10-10 0-5.4-4.4-9.8-9.8-10a9.8 9.8 0 0 0 0 20z"}),e("path",{d:"M8 14s1.5-2 4-2 4 2 4 2"}),e("path",{d:"M8 18s1.5-2 4-2 4 2 4 2"})]}),AdjustmentsVertical:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M12 8V2"}),e("path",{d:"M12 22v-6"}),e("path",{d:"M8 12H2"}),e("path",{d:"M22 12h-6"})]}),PaintBrush:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M18.37 2.63 14 7l-1.59-1.59a2 2 0 0 0-2.82 0L8 7l9 9 1.59-1.59a2 2 0 0 0 0-2.82L17 10l4.37-4.37a2.12 2.12 0 1 0-3-3Z"}),e("path",{d:"M9 8c-2 3-4 3.5-7 4l8 10c2-1 6-5 6-7"}),e("path",{d:"M14.5 17.5 4.5 15"})]}),ColorSwatch:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),e("path",{d:"M12 4c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"})]}),Clipboard:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),e("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"})]}),Copy:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),e("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]}),DocumentDuplicate:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),e("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"}),e("path",{d:"M9 13h6"}),e("path",{d:"M9 16h6"})]}),Lightning:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:e("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"})}),Mountain:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M8 21l5.5-11.5L19 21"}),e("path",{d:"M2 21h20"}),e("path",{d:"M12 9L8 21l4-12z"})]}),Rectangle:t=>e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:e("rect",{x:"3",y:"6",width:"18",height:"12",rx:"2",ry:"2"})}),Square2Stack:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M5 8a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V8z"}),e("path",{d:"M3 12a2 2 0 0 1 2-2h1"}),e("path",{d:"M3 16h1a2 2 0 0 1 2 2v1"})]}),ArrowPath:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M4 12a8 8 0 0 1 8-8V2.5"}),e("path",{d:"M12 4L9 7l3 3"}),e("path",{d:"M20 12a8 8 0 0 1-8 8v1.5"}),e("path",{d:"M12 20l3-3-3-3"})]}),ArrowUp:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M12 19V5"}),e("path",{d:"M5 12l7-7 7 7"})]}),ArrowDown:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M12 5v14"}),e("path",{d:"M19 12l-7 7-7-7"})]}),ArrowRight:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M5 12h14"}),e("path",{d:"M12 5l7 7-7 7"})]}),MinusCircle:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("circle",{cx:"12",cy:"12",r:"10"}),e("path",{d:"M8 12h8"})]}),Fullscreen:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("path",{d:"M8 3H3v5"}),e("path",{d:"M3 3l5 5"}),e("path",{d:"M16 3h5v5"}),e("path",{d:"M21 3l-5 5"}),e("path",{d:"M8 21H3v-5"}),e("path",{d:"M3 21l5-5"}),e("path",{d:"M16 21h5v-5"}),e("path",{d:"M21 21l-5-5"})]}),Image:t=>s("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",...t,children:[e("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e("circle",{cx:"9",cy:"9",r:"2"}),e("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]})},Ke=[{id:"scene",icon:h.Scene,title:"Scene"},{id:"light",icon:h.Light,title:"Light"},{id:"effects",icon:h.Effects,title:"Effects"},{id:"folder",icon:h.FolderOpen,title:"Folder"},{id:"star",icon:h.Star,title:"Favorites"},{id:"wifi",icon:h.Wifi,title:"Network"},{id:"cloud",icon:h.Cloud,title:"Cloud"},{id:"monitor",icon:h.Monitor,title:"Display"}],ze=[{id:"add",icon:h.PlusCircle,title:"Add"},{id:"settings",icon:h.Settings,title:"Settings"},{id:"fullscreen",icon:h.Fullscreen,title:"Fullscreen"}];function ir({selectedTool:t,onToolSelect:r,scenePanelOpen:a,onScenePanelToggle:n}){const{ui:o}=me(D),{toolbarTabOrder:l,toolbarBottomTabOrder:i}=o,d=()=>{if(!l||!Array.isArray(l))return Ke;const y=Ke.reduce((A,M)=>(A[M.id]=M,A),{});return l.map(A=>y[A]).filter(Boolean)},c=()=>{if(!i||!Array.isArray(i))return ze;const y=ze.reduce((W,R)=>(W[R.id]=R,W),{}),A=i.map(W=>y[W]).filter(Boolean),M=new Set(i),L=ze.filter(W=>!M.has(W.id));return[...A,...L]},[f,p]=C(()=>d()),[x,w]=C(()=>c());_(()=>{const y=Ke.reduce((M,L)=>(M[L.id]=L,M),{}),A=l.map(M=>y[M]).filter(Boolean);p(A)},[l]),_(()=>{const y=ze.reduce((W,R)=>(W[R.id]=R,W),{}),A=i.map(W=>y[W]).filter(Boolean),M=new Set(i),L=ze.filter(W=>!M.has(W.id));w([...A,...L])},[i]);const[b,m]=C({isDragging:!1,draggedTool:null,dragOverTool:null,draggedFromBottom:!1}),S=(y,A,M=!1)=>{y.dataTransfer.effectAllowed="move",y.dataTransfer.setData("text/html","");const L=y.currentTarget.cloneNode(!0);L.style.position="absolute",L.style.top="-1000px",L.style.left="-1000px",L.style.background="linear-gradient(to bottom, rgb(51 65 85 / 0.95), rgb(15 23 42 / 0.98))",L.style.border="1px solid rgb(148 163 184 / 0.5)",L.style.borderRadius="8px",L.style.padding="8px",L.style.boxShadow="0 25px 50px -12px rgb(0 0 0 / 0.5)",L.style.transform="scale(1.1)",L.style.pointerEvents="none",L.style.zIndex="9999";const W=L.querySelector("svg");W&&(W.style.color="#e2e8f0"),document.body.appendChild(L),y.dataTransfer.setDragImage(L,24,24),setTimeout(()=>{document.body.contains(L)&&document.body.removeChild(L)},100),m({isDragging:!0,draggedTool:A,dragOverTool:null,draggedFromBottom:M})},H=(y,A,M=!1)=>{y.preventDefault(),y.dataTransfer.dropEffect="move",b.draggedTool&&b.draggedTool.id!==A.id&&m(L=>({...L,dragOverTool:A}))},v=y=>{const A=y.currentTarget.getBoundingClientRect(),{clientX:M,clientY:L}=y;(M<A.left||M>A.right||L<A.top||L>A.bottom)&&m(W=>({...W,dragOverTool:null}))},j=(y,A,M=!1)=>{if(y.preventDefault(),y.stopPropagation(),!b.draggedTool||b.draggedTool.id===A.id){m({isDragging:!1,draggedTool:null,dragOverTool:null,draggedFromBottom:!1});return}const L=b.draggedFromBottom?x:f,W=M?x:f,R=b.draggedFromBottom?w:p,Q=M?w:p;if(b.draggedFromBottom!==M){const T=L.filter(N=>N.id!==b.draggedTool.id);R(T);const te=W.findIndex(N=>N.id===A.id),se=[...W];se.splice(te,0,b.draggedTool),Q(se),b.draggedFromBottom?(ne.setToolbarBottomTabOrder(T.map(N=>N.id)),ne.setToolbarTabOrder(se.map(N=>N.id))):(ne.setToolbarTabOrder(T.map(N=>N.id)),ne.setToolbarBottomTabOrder(se.map(N=>N.id)))}else{const T=L.findIndex(se=>se.id===b.draggedTool.id),te=L.findIndex(se=>se.id===A.id);if(T!==-1&&te!==-1&&T!==te){const se=[...L],[N]=se.splice(T,1);se.splice(te,0,N),R(se);const Y=se.map(K=>K.id);M?ne.setToolbarBottomTabOrder(Y):ne.setToolbarTabOrder(Y)}}m({isDragging:!1,draggedTool:null,dragOverTool:null,draggedFromBottom:!1})},O=()=>{m({isDragging:!1,draggedTool:null,dragOverTool:null,draggedFromBottom:!1})},z=y=>{if(!b.isDragging){if(y.id==="fullscreen"){q();return}a||n(),r(y.id)}},q=()=>{document.fullscreenElement?document.exitFullscreen().catch(y=>{console.warn("Error attempting to exit fullscreen:",y)}):document.documentElement.requestFullscreen().catch(y=>{console.warn("Error attempting to enable fullscreen:",y)})};return s("div",{className:"relative w-12 h-full bg-gradient-to-b from-slate-800/95 to-slate-900/98 backdrop-blur-md border-l border-slate-700/80 shadow-2xl shadow-black/30 flex flex-col py-2 pointer-events-auto no-select",children:[e("div",{className:"flex flex-col space-y-1 px-1",children:f.map(y=>{var L,W;const A=((L=b.draggedTool)==null?void 0:L.id)===y.id,M=((W=b.dragOverTool)==null?void 0:W.id)===y.id;return s("button",{draggable:!0,onClick:()=>z(y),onDragStart:R=>S(R,y,!1),onDragOver:R=>H(R,y,!1),onDragLeave:v,onDrop:R=>j(R,y,!1),onDragEnd:O,className:`p-2 rounded-lg transition-all duration-200 group relative select-none ${A?"opacity-50 cursor-grabbing scale-95":t===y.id?"bg-gradient-to-b from-blue-500 to-blue-700 text-white shadow-lg shadow-blue-600/40 scale-105 cursor-grab":"text-slate-400 hover:text-white hover:bg-gradient-to-b hover:from-slate-700/80 hover:to-slate-800/90 hover:shadow-md hover:shadow-black/30 hover:scale-102 cursor-grab"}`,title:y.title,children:[e(y.icon,{className:"w-6 h-6"}),M&&e("div",{className:"absolute inset-x-0 top-0 h-0.5 bg-blue-500 rounded-full"}),!b.isDragging&&s("div",{className:"absolute right-full mr-2 top-1/2 -translate-y-1/2 bg-slate-900 border border-slate-700 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-[60] shadow-2xl",children:[y.title,e("div",{className:"absolute left-full top-1/2 -translate-y-1/2 w-0 h-0 border-l-4 border-l-slate-900 border-t-4 border-t-transparent border-b-4 border-b-transparent"})]})]},y.id)})}),e("div",{className:"flex-1 flex items-center justify-center",onDragOver:y=>{y.preventDefault(),b.draggedTool&&(y.dataTransfer.dropEffect="move")},onDrop:y=>{if(y.preventDefault(),y.stopPropagation(),b.draggedTool){const A=b.draggedFromBottom?x:f,M=b.draggedFromBottom?w:p,L=b.draggedFromBottom?f:x,W=b.draggedFromBottom?p:w,R=A.filter(T=>T.id!==b.draggedTool.id);M(R);const Q=[...L,b.draggedTool];W(Q),b.draggedFromBottom?(ne.setToolbarBottomTabOrder(R.map(T=>T.id)),ne.setToolbarTabOrder(Q.map(T=>T.id))):(ne.setToolbarTabOrder(R.map(T=>T.id)),ne.setToolbarBottomTabOrder(Q.map(T=>T.id))),m({isDragging:!1,draggedTool:null,dragOverTool:null,draggedFromBottom:!1})}},children:b.isDragging&&e("div",{className:"w-8 h-0.5 bg-blue-500/50 rounded-full opacity-50 transition-opacity"})}),e("div",{className:"flex flex-col space-y-1 px-1",children:x.map(y=>{var L,W;const A=((L=b.draggedTool)==null?void 0:L.id)===y.id,M=((W=b.dragOverTool)==null?void 0:W.id)===y.id;return s("button",{draggable:!0,onClick:()=>z(y),onDragStart:R=>S(R,y,!0),onDragOver:R=>H(R,y,!0),onDragLeave:v,onDrop:R=>j(R,y,!0),onDragEnd:O,className:`p-2 rounded-lg transition-all duration-200 group relative select-none ${A?"opacity-50 cursor-grabbing scale-95":t===y.id?"bg-gradient-to-b from-blue-500 to-blue-700 text-white shadow-lg shadow-blue-600/40 scale-105 cursor-grab":"text-slate-400 hover:text-white hover:bg-gradient-to-b hover:from-slate-700/80 hover:to-slate-800/90 hover:shadow-md hover:shadow-black/30 hover:scale-102 cursor-grab"}`,title:y.title,children:[e(y.icon,{className:"w-6 h-6"}),M&&e("div",{className:"absolute inset-x-0 top-0 h-0.5 bg-blue-500 rounded-full"}),!b.isDragging&&s("div",{className:"absolute right-full mr-2 top-1/2 -translate-y-1/2 bg-slate-900 border border-slate-700 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-[60] shadow-2xl",children:[y.title,e("div",{className:"absolute left-full top-1/2 -translate-y-1/2 w-0 h-0 border-l-4 border-l-slate-900 border-t-4 border-t-transparent border-b-4 border-b-transparent"})]})]},y.id)})})]})}const He=({label:t,min:r,max:a,step:n,defaultValue:o,onChange:l})=>{const[i,d]=C(o),[c,f]=C(!1),[p,x]=C(0),w=ge(null),b=j=>{const O=parseFloat(j.target.value);d(O),l&&l(O)},m=j=>{const O=parseFloat(j.target.value);d(O),l&&l(O),v(j.target)},S=()=>{f(!0)},H=()=>{f(!1)},v=j=>{if(j){const O=parseFloat(j.min),z=parseFloat(j.max),y=(parseFloat(j.value)-O)/(z-O),A=16,M=j.offsetWidth-A,L=y*M+A/2;x(L)}};return _(()=>{w.current&&v(w.current)},[i]),s("div",{className:"space-y-1 relative",children:[e("label",{className:"text-xs text-gray-400",children:t}),s("div",{className:"flex items-center space-x-2",children:[s("div",{className:"relative flex-1",children:[e("input",{type:"range",min:r,max:a,step:n,value:i,onChange:m,onMouseDown:S,onMouseUp:H,ref:w,className:"w-full h-1 bg-slate-700 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-4 [&::-webkit-slider-thumb]:w-4 [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-blue-500 [&::-webkit-slider-thumb]:shadow [&::-moz-range-thumb]:h-4 [&::-moz-range-thumb]:w-4 [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-blue-500 [&::-moz-range-thumb]:shadow"}),c&&s("div",{className:"absolute bg-blue-500 text-white text-xs rounded py-1 px-2 -mt-8 transform -translate-x-1/2 transition-opacity duration-100",style:{left:p,opacity:c?1:0},children:[i.toFixed(1),e("div",{className:"absolute left-1/2 transform -translate-x-1/2 border-t-4 border-t-blue-500 border-x-4 border-x-transparent bottom-[-4px]"})]})]}),e("input",{type:"number",min:r,max:a,step:n,value:i,onChange:b,className:"w-16 bg-slate-800 border border-slate-700 text-white text-xs p-1.5 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})},Le=({title:t,children:r,defaultOpen:a=!0,index:n=0})=>{const[o,l]=C(a),i=n%2===0;return s("div",{className:`${i?"bg-slate-800/20":"bg-slate-900/20"}`,children:[s("button",{onClick:()=>l(!o),className:`w-full flex items-center justify-between px-3 py-2.5 text-xs font-medium transition-all duration-200 group ${o?"bg-blue-600/20 text-blue-200 shadow-md shadow-blue-900/20 border-l-2 border-blue-500":"text-gray-300 hover:bg-slate-700/30 hover:text-gray-200 hover:border-l-2 hover:border-slate-400 border-l-2 border-transparent"}`,children:[e("span",{className:`transition-transform duration-200 ${o?"":"group-hover:translate-x-1"}`,children:t}),e(h.ChevronDown,{className:`w-3 h-3 transition-transform ${o?"":"-rotate-90"}`})]}),o&&e("div",{className:"px-3 pt-2 pb-3",children:r})]})},lr=({items:t,position:r,onClose:a})=>{const n=ge(null),o=ge(null),[l,i]=C({top:0,left:0}),[d,c]=C(null),[f,p]=C(null),[x,w]=C(null),b=ge(null);_(()=>{const v=j=>{const O=n.current&&n.current.contains(j.target),z=o.current&&o.current.contains(j.target);!O&&!z&&a()};return document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[a]),_(()=>{if(n.current){const{innerWidth:v,innerHeight:j}=window,{offsetWidth:O,offsetHeight:z}=n.current;let{x:q,y}=r;q+O>v&&(q=v-O),y+z>j&&(y=j-z),i({top:y,left:q})}},[r]);const m=(v,j,O)=>{if(c(v),b.current&&(clearTimeout(b.current),b.current=null),j.submenu&&j.submenu.length>0){const z=O.currentTarget.getBoundingClientRect(),{innerWidth:q,innerHeight:y}=window;let A=z.right+2,M=z.top;const L=180;A+L>q&&(A=z.left-L-2);const W=j.submenu.length*32;M+W>y&&(M=y-W-10),p({top:M,left:A}),w(j.submenu)}else p(null),w(null)},S=()=>{b.current=setTimeout(()=>{p(null),w(null)},300)},H=()=>{};return!t||t.length===0?null:s(we,{children:[e("div",{ref:n,className:"bg-slate-800/95 backdrop-blur-md border border-slate-700 rounded-md shadow-xl py-1 pointer-events-auto",style:{position:"fixed",top:l.top,left:l.left,zIndex:999998},onMouseLeave:()=>{c(null),S()},children:e("ul",{children:t.map((v,j)=>e("li",{children:v.separator?e("div",{className:"border-t border-slate-700 my-1"}):s("button",{onMouseEnter:O=>m(j,v,O),onMouseLeave:()=>H(),onClick:()=>{v.submenu||(v.action(),a())},className:`flex items-center w-full px-3 py-1.5 text-xs text-left transition-all duration-200 ${d===j?"bg-blue-600 text-white":"text-gray-300 hover:bg-blue-600/70 hover:text-white"}`,children:[v.color&&e("div",{className:"w-3 h-3 rounded-full mr-2 border border-gray-600",style:{backgroundColor:v.color}}),v.icon&&e("span",{className:"mr-2",children:v.icon}),e("span",{className:"flex-1",children:v.label}),v.shortcut&&e("span",{className:"text-gray-500 text-xs",children:v.shortcut}),v.submenu&&e(h.ChevronRight,{className:"w-3 h-3 ml-1"})]})},j))})}),x&&f&&e("div",{ref:o,className:"bg-slate-800/95 backdrop-blur-md border border-slate-700 rounded-md shadow-xl py-1 pointer-events-auto min-w-[180px]",style:{position:"fixed",top:f.top,left:f.left,zIndex:999999},onMouseEnter:()=>{b.current&&(clearTimeout(b.current),b.current=null)},onMouseLeave:()=>{S()},children:e("ul",{children:x.map((v,j)=>e("li",{children:v.separator?e("div",{className:"border-t border-slate-700 my-1"}):s("button",{onClick:O=>{O.preventDefault(),O.stopPropagation();try{v.action(),a()}catch(z){console.error("Error executing submenu action:",z),a()}},className:"flex items-center w-full px-3 py-1.5 text-xs text-left text-gray-300 transition-all duration-200 hover:bg-blue-600/70 hover:text-white",children:[v.color&&e("div",{className:"w-3 h-3 rounded-full mr-2 border border-gray-600",style:{backgroundColor:v.color}}),v.icon&&e("span",{className:"mr-2",children:v.icon}),e("span",{className:"flex-1",children:v.label})]})},j))})})]})},yt=[{id:"apartment",name:"Apartment",description:"Indoor apartment lighting",preset:"apartment"},{id:"city",name:"City Environment",description:"Urban setting with street lighting",preset:"city"},{id:"dawn",name:"Dawn",description:"Early morning natural lighting",preset:"dawn"},{id:"forest",name:"Forest Environment",description:"Natural outdoor forest setting",preset:"forest"},{id:"lobby",name:"Lobby",description:"Indoor lobby environment",preset:"lobby"},{id:"night",name:"Night",description:"Nighttime outdoor environment",preset:"night"},{id:"park",name:"Park",description:"Natural park environment",preset:"park"},{id:"studio",name:"Studio Environment",description:"Neutral studio lighting setup",preset:"studio"},{id:"sunset",name:"Sunset",description:"Warm evening lighting",preset:"sunset"},{id:"warehouse",name:"Warehouse",description:"Industrial warehouse lighting",preset:"warehouse"},{id:"room",name:"Room Environment",description:"Procedural room with realistic lighting",type:"room"}];function cr(t){const r=yt.find(a=>a.id===t);if(!r)throw new Error(`Environment ${t} not found`);return r}const lt=["Urban Landscape","Natural Environment","Indoor Setting","Sci-Fi Outpost","Fantasy Kingdom","Vehicle Garage","Character Assembly","Props Collection","Lighting Setup","Special Effects","UI Elements","Audio Sources","Camera Rigs","Animation Sequences","Particle Systems","Decal Placement","Water Bodies","Foliage Group","Rock Formations","Building Complex"],ct=["Street Level","Skyscrapers","Residential Area","Industrial Zone","Park","Forest","Mountains","River","Cave System","Beach","Living Room","Kitchen","Bedroom","Office","Basement","Corridors","Command Center","Hangar Bay","Living Quarters","Laboratory"],dt=["Lamp Post","Bench","Mailbox","Traffic Light","Fire Hydrant","Oak Tree","Pine Tree","Boulder","Shrub","Flower Bed","Sofa","Coffee Table","Television","Bookshelf","Dining Table","Computer Terminal","Holographic Display","Storage Crate","Power Conduit","Specimen Tank"];Array.from({length:20},(t,r)=>({id:`parent-${r}`,name:lt[r%lt.length],type:"model",visible:!0,children:Array.from({length:10},(a,n)=>({id:`child-${r}-${n}`,name:ct[n%ct.length],type:"model",visible:!0,children:Array.from({length:5},(o,l)=>({id:`grandchild-${r}-${n}-${l}`,name:dt[l%dt.length],type:"model",visible:!0,children:[]}))}))}));function dr({selectedObject:t,onObjectSelect:r,isOpen:a,onToggle:n,selectedTool:o,onToolSelect:l,onContextMenu:i}){const[d,c]=C(["scene"]),{ui:f}=me(D),{scenePropertiesHeight:p}=f,{setScenePropertiesHeight:x}=ne,[w,b]=C(!1),[m,S]=C(!1),[H,v]=C(.5),[j,O]=C(.5),[z,q]=C(1),[y,A]=C(.5),[M,L]=C({isDragging:!1,draggedItem:null,dragOverItem:null,dropPosition:null,dragStartDepth:0}),{sceneObjects:W,settings:R}=me(D),{grid:Q,viewport:T}=R,{removeSceneObject:te,setSelectedEntity:se,setTransformMode:N,updateSceneObject:Y,updateGridSettings:K,updateViewportSettings:g}=ne,P=W.find(u=>u.id===t),$=(u,E)=>{E.stopPropagation(),te(u),t===u&&(se(null),N("select"))},X=(u,E,G)=>{if(P){const ee=[...P[u]],Z=E==="x"?0:E==="y"?1:2;ee[Z]=parseFloat(G)||0,Y(t,{[u]:ee})}},re=u=>{P&&Y(t,{material:{...P.material,color:u}})},oe=u=>{const E=u.match(/hsl\((\d+),\s*(\d+)%,\s*(\d+)%\)/);if(!E)return"#ff0000";const G=parseInt(E[1])/360,ee=parseInt(E[2])/100,Z=parseInt(E[3])/100,le=(pe,ye,Me)=>(Me<0&&(Me+=1),Me>1&&(Me-=1),Me<1/6?pe+(ye-pe)*6*Me:Me<1/2?ye:Me<2/3?pe+(ye-pe)*(2/3-Me)*6:pe);let ue,ie,Oe;if(ee===0)ue=ie=Oe=Z;else{const pe=Z<.5?Z*(1+ee):Z+ee-Z*ee,ye=2*Z-pe;ue=le(ye,pe,G+1/3),ie=le(ye,pe,G),Oe=le(ye,pe,G-1/3)}const Ve=pe=>{const ye=Math.round(pe*255).toString(16);return ye.length===1?"0"+ye:ye};return`#${Ve(ue)}${Ve(ie)}${Ve(Oe)}`},be=()=>{var E;if(!((E=P==null?void 0:P.material)!=null&&E.color))return"#ff0000";const u=P.material.color;return typeof u=="string"&&u.startsWith("#")?u:typeof u=="string"&&u.startsWith("hsl")?oe(u):u||"#ff0000"},ve=[{id:"scene",name:"Scene",type:"scene",visible:!0,children:W.map(u=>({id:u.id,name:u.name,type:u.type,visible:u.visible,children:[]}))}],ke=ge(null),Re=ge(null),Ct=u=>{b(!0)};_(()=>{const u=()=>b(!1),E=G=>{if(w){const ee=ke.current,Z=Re.current;if(ee&&Z){const le=ee.getBoundingClientRect().bottom,ue=Z.offsetHeight;let ie=le-G.clientY;const Oe=100,pe=ee.clientHeight-ue-50;ie=Math.max(Oe,ie),ie=Math.min(pe,ie),x(ie)}}};return w?(document.body.style.cursor="row-resize",document.addEventListener("mousemove",E),document.addEventListener("mouseup",u)):document.body.style.cursor="default",()=>{document.body.style.cursor="default",document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",u)}},[w]);const St=u=>{c(E=>E.includes(u)?E.filter(G=>G!==u):[...E,u])},kt=(u,E,G)=>{u.dataTransfer.effectAllowed="move",u.dataTransfer.setData("text/html",""),L({isDragging:!0,draggedItem:E,dragOverItem:null,dropPosition:null,dragStartDepth:G})},Mt=(u,E,G)=>{const ee=u.currentTarget.getBoundingClientRect(),Z=u.clientY-ee.top,le=ee.height,ue=le/3;return Z<ue?"above":Z>le-ue&&E.children&&E.children.length>0?"inside":Z>le-ue?"below":"inside"},Pt=(u,E,G)=>{if(u.preventDefault(),u.dataTransfer.dropEffect="move",M.draggedItem&&M.draggedItem.id!==E.id){if(_e(M.draggedItem,E))return;const ee=Mt(u,E);L(Z=>({...Z,dragOverItem:E,dropPosition:ee}))}},Tt=u=>{const E=u.currentTarget.getBoundingClientRect(),{clientX:G,clientY:ee}=u;(G<E.left||G>E.right||ee<E.top||ee>E.bottom)&&L(Z=>({...Z,dragOverItem:null,dropPosition:null}))},_e=(u,E)=>{if(!u.children)return!1;for(const G of u.children)if(G.id===E.id||_e(G,E))return!0;return!1},et=(u,E)=>u.reduce((G,ee)=>{if(ee.id===E)return G;const Z={...ee};return ee.children&&(Z.children=et(ee.children,E)),G.push(Z),G},[]),tt=(u,E,G,ee)=>u.map(Z=>{if(Z.id===E){const le={...Z};return le.children=[...Z.children||[],G],le}if(Z.children){const le=tt(Z.children,E,G);return{...Z,children:le}}return Z}),Xe=(u,E,G,ee)=>{for(let Z=0;Z<u.length;Z++){if(u[Z].id===E){const le=[...u],ue=ee==="before"?Z:Z+1;return le.splice(ue,0,G),le}if(u[Z].children){const le=Xe(u[Z].children,E,G,ee);if(le!==u[Z].children){const ue=[...u];return ue[Z]={...u[Z],children:le},ue}}}return u},Lt=(u,E)=>{if(u.preventDefault(),u.stopPropagation(),!M.draggedItem||!M.dropPosition){We();return}if(M.draggedItem.id===E.id||_e(M.draggedItem,E)){We();return}let G=et(ve,M.draggedItem.id);M.dropPosition==="above"?G=Xe(G,E.id,M.draggedItem,"before"):M.dropPosition==="below"?G=Xe(G,E.id,M.draggedItem,"after"):M.dropPosition==="inside"&&(G=tt(G,E.id,M.draggedItem),c(ee=>[...new Set([...ee,E.id])])),setHierarchyData(G),We()},We=()=>{L({isDragging:!1,draggedItem:null,dragOverItem:null,dropPosition:null,dragStartDepth:0})},jt=()=>{We()},Et=u=>{switch(u){case"character":return e(h.Character,{className:"w-4 h-4 text-blue-400"});case"terrain":return e(h.Terrain,{className:"w-4 h-4 text-green-400"});case"model":return e(h.Cube,{className:"w-4 h-4 text-gray-400"});default:return e(h.Cube,{className:"w-4 h-4 text-gray-400"})}},rt=(u,E=0)=>{var le,ue;const G=u.children&&u.children.length>0,ee=d.includes(u.id),Z=t===u.id;return s("div",{className:`relative rounded-sm transition-all duration-100 ${M.isDragging&&((le=M.draggedItem)==null?void 0:le.id)===u.id?"opacity-50":""} ${((ue=M.dragOverItem)==null?void 0:ue.id)===u.id&&M.dropPosition?M.dropPosition==="above"?"border-t-2 border-blue-500":M.dropPosition==="below"?"border-b-2 border-blue-500":"bg-blue-800/30":""}`,onContextMenu:ie=>i(ie,u),children:[s("div",{draggable:"true",onDragStart:ie=>kt(ie,u,E),onDragOver:ie=>Pt(ie,u),onDragLeave:Tt,onDrop:ie=>Lt(ie,u),onDragEnd:jt,className:`flex items-center py-0.5 px-2 cursor-pointer transition-colors text-xs group ${Z?"bg-blue-800/60":"hover:bg-slate-700"}`,style:{paddingLeft:`${8+E*20}px`},onClick:()=>r(u.id),children:[G&&e("button",{onClick:ie=>{ie.stopPropagation(),St(u.id)},className:"mr-1 p-0.5 hover:bg-slate-600 rounded transition-colors",children:ee?e(h.ChevronDown,{className:"w-3 h-3 text-gray-300"}):e(h.ChevronRight,{className:"w-3 h-3 text-gray-300"})}),e("button",{className:"mr-1 p-0.5 rounded transition-colors opacity-70 hover:opacity-100",onClick:ie=>ie.stopPropagation(),children:u.visible?e(h.Eye,{className:"w-4 h-4 text-gray-300"}):e(h.EyeSlash,{className:"w-4 h-4 text-gray-500"})}),e("span",{className:"mr-2",children:Et(u.type)}),e("span",{className:"flex-1 text-gray-200 truncate",children:u.name}),e("button",{className:"ml-2 p-0.5 rounded transition-colors opacity-0 group-hover:opacity-70 hover:opacity-100",onClick:ie=>$(u.id,ie),title:"Delete object",children:e(h.Trash,{className:"w-4 h-4 text-gray-300 hover:text-red-400"})})]}),G&&ee&&u.children.map(ie=>rt(ie,E+1))]},u.id)};if(!a)return null;const st=()=>{switch(o){case"scene":return"Scene";case"light":return"Light";case"effects":return"Effects";case"folder":return"Files";case"star":return"Favorites";case"wifi":return"Network";case"cloud":return"Cloud";case"monitor":return"Display";case"settings":return"Settings";default:return"Properties"}},At=()=>{switch(o){case"scene":return s("div",{ref:ke,className:"flex flex-col flex-1 overflow-hidden",onContextMenu:u=>i(u,null),children:[e("div",{className:"flex-1 overflow-y-auto scrollbar-thin",onContextMenu:u=>i(u,null),children:ve.map(u=>rt(u))}),t&&s(we,{children:[e("div",{className:`h-1 cursor-row-resize transition-colors ${w?"bg-blue-500/75":"bg-slate-700/50 hover:bg-blue-500/75"}`,onMouseDown:Ct}),e("div",{className:"overflow-y-auto scrollbar-thin",style:{height:`${p}px`},children:s("div",{children:[e(Le,{title:"Transform",defaultOpen:!0,index:0,children:s("div",{className:"space-y-4",children:[s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Position"}),s("div",{className:"grid grid-cols-3 gap-2",children:[s("div",{className:"relative",children:[e("input",{type:"number",step:"0.1",value:P?P.position[0].toFixed(2):"0",onChange:u=>X("position","x",u.target.value),className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}),e("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"X"})]}),s("div",{className:"relative",children:[e("input",{type:"number",step:"0.1",value:P?P.position[1].toFixed(2):"0",onChange:u=>X("position","y",u.target.value),className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}),e("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"Y"})]}),s("div",{className:"relative",children:[e("input",{type:"number",step:"0.1",value:P?P.position[2].toFixed(2):"0",onChange:u=>X("position","z",u.target.value),className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}),e("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"Z"})]})]})]}),s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Rotation"}),s("div",{className:"grid grid-cols-3 gap-2",children:[s("div",{className:"relative",children:[e("input",{type:"number",step:"0.1",value:P?(P.rotation[0]*180/Math.PI).toFixed(1):"0",onChange:u=>X("rotation","x",(parseFloat(u.target.value)||0)*Math.PI/180),className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}),e("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"X"})]}),s("div",{className:"relative",children:[e("input",{type:"number",step:"0.1",value:P?(P.rotation[1]*180/Math.PI).toFixed(1):"0",onChange:u=>X("rotation","y",(parseFloat(u.target.value)||0)*Math.PI/180),className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}),e("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"Y"})]}),s("div",{className:"relative",children:[e("input",{type:"number",step:"0.1",value:P?(P.rotation[2]*180/Math.PI).toFixed(1):"0",onChange:u=>X("rotation","z",(parseFloat(u.target.value)||0)*Math.PI/180),className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}),e("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"Z"})]})]})]}),s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Scale"}),s("div",{className:"grid grid-cols-3 gap-2",children:[s("div",{className:"relative",children:[e("input",{type:"number",step:"0.1",value:P?P.scale[0].toFixed(2):"1",onChange:u=>X("scale","x",u.target.value),className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}),e("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"X"})]}),s("div",{className:"relative",children:[e("input",{type:"number",step:"0.1",value:P?P.scale[1].toFixed(2):"1",onChange:u=>X("scale","y",u.target.value),className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}),e("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"Y"})]}),s("div",{className:"relative",children:[e("input",{type:"number",step:"0.1",value:P?P.scale[2].toFixed(2):"1",onChange:u=>X("scale","z",u.target.value),className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}),e("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"Z"})]})]})]})]})}),e(Le,{title:"Material",defaultOpen:!0,index:1,children:s("div",{className:"space-y-4",children:[s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Material Type"}),s("select",{className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all cursor-pointer",children:[e("option",{children:"Standard"}),e("option",{children:"Toon"}),e("option",{children:"Glass"}),e("option",{children:"Emissive"}),e("option",{children:"Metallic"})]})]}),s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Base Color"}),s("div",{className:"flex items-center gap-2",children:[e("input",{type:"color",value:be(),onChange:u=>re(u.target.value),className:"w-10 h-10 rounded-lg border border-slate-600 bg-slate-800 cursor-pointer"}),e("div",{className:"flex-1 bg-slate-800/80 border border-slate-600 rounded-lg p-2",children:e("div",{className:"text-xs text-gray-300",children:be().toUpperCase()})})]})]}),s("div",{className:"space-y-3",children:[e(He,{label:"Roughness",min:0,max:1,step:.1,defaultValue:H,onChange:v}),e(He,{label:"Metalness",min:0,max:1,step:.1,defaultValue:j,onChange:O})]})]})}),e(Le,{title:"Scripts",index:2,children:s("div",{className:"space-y-3",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Attached Scripts"}),e("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/80 border-2 border-dashed border-slate-600 hover:border-blue-500/50 rounded-xl p-6 text-center transition-all duration-200 group",children:s("div",{className:"flex flex-col items-center gap-2",children:[e(h.CodeBracket,{className:"w-8 h-8 text-slate-500 group-hover:text-blue-400 transition-colors"}),e("p",{className:"text-xs text-gray-400 group-hover:text-gray-300 transition-colors",children:"Drag scripts here or click to browse"}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:"+ Add Script"})]})})]})}),e(Le,{title:"Custom Properties",index:3,children:s("div",{className:"space-y-4",children:[s("div",{className:"flex items-center justify-between p-3 bg-slate-800/40 rounded-lg border border-slate-700/50",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Enable Features"}),e("button",{onClick:()=>S(!m),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-200 ${m?"bg-blue-500 shadow-lg shadow-blue-500/30":"bg-slate-600"}`,children:e("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 shadow-sm ${m?"translate-x-6":"translate-x-1"}`})})]}),s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Object Name"}),e("input",{type:"text",className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all",placeholder:"Enter object name"})]}),s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Description"}),e("textarea",{className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all resize-none",rows:"3",placeholder:"Enter description"})]}),s("div",{className:"grid grid-cols-2 gap-3",children:[s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Category"}),s("select",{className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all cursor-pointer",children:[e("option",{children:"Environment"}),e("option",{children:"Character"}),e("option",{children:"Prop"}),e("option",{children:"Effect"})]})]}),s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Created"}),e("input",{type:"date",className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2.5 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"})]})]})]})})]})})]})]});case"light":return s("div",{className:"flex-1 p-3 space-y-4 overflow-y-auto scrollbar-thin",children:[s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Type"}),s("select",{className:"w-full bg-slate-900 border border-slate-600 text-white text-xs p-2 rounded",children:[e("option",{children:"Directional"}),e("option",{children:"Point"}),e("option",{children:"Spot"})]})]}),e("div",{className:"space-y-2",children:e(He,{label:"Intensity",min:0,max:10,step:.1,defaultValue:z,onChange:q})}),s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Color"}),e("input",{type:"color",defaultValue:"#ffffff",className:"w-full h-8 rounded"})]}),s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Shadow"}),s("label",{className:"flex items-center space-x-2",children:[e("input",{type:"checkbox",defaultChecked:!0,className:"text-blue-600"}),e("span",{className:"text-xs text-gray-300",children:"Cast Shadows"})]})]})]});case"effects":return s("div",{className:"flex-1 p-3 space-y-4 overflow-y-auto scrollbar-thin",children:[s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Post Processing"}),s("label",{className:"flex items-center space-x-2",children:[e("input",{type:"checkbox",defaultChecked:!0,className:"text-blue-600"}),e("span",{className:"text-xs text-gray-300",children:"Bloom"})]}),s("label",{className:"flex items-center space-x-2",children:[e("input",{type:"checkbox",className:"text-blue-600"}),e("span",{className:"text-xs text-gray-300",children:"Motion Blur"})]}),s("label",{className:"flex items-center space-x-2",children:[e("input",{type:"checkbox",className:"text-blue-600"}),e("span",{className:"text-xs text-gray-300",children:"Depth of Field"})]})]}),e("div",{className:"space-y-2",children:e(He,{label:"Ambient Occlusion",min:0,max:1,step:.1,defaultValue:y,onChange:A})})]});case"settings":return e("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:s("div",{children:[e(Le,{title:"Grid Helper",defaultOpen:!0,index:0,children:s("div",{className:"space-y-4",children:[s("div",{className:"flex items-center justify-between p-3 bg-slate-800/40 rounded-lg border border-slate-700/50",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Enable Grid"}),e("button",{onClick:()=>K({enabled:!Q.enabled}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-200 ${Q.enabled?"bg-blue-500 shadow-lg shadow-blue-500/30":"bg-slate-600"}`,children:e("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 shadow-sm ${Q.enabled?"translate-x-6":"translate-x-1"}`})})]}),e("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${Q.enabled?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"}`,children:s("div",{className:"space-y-4",children:[!Q.infiniteGrid&&s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Grid Size"}),e("input",{type:"number",step:"10",min:"10",max:"1000",value:Q.size,onChange:u=>K({size:parseInt(u.target.value)||100}),className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"})]}),s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Cell Size"}),e("input",{type:"number",step:"0.1",min:"0.1",max:"10",value:Q.cellSize,onChange:u=>K({cellSize:parseFloat(u.target.value)||1}),className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"})]}),s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Grid Position"}),s("div",{className:"grid grid-cols-3 gap-2",children:[s("div",{className:"relative",children:[e("input",{type:"number",step:"0.1",value:Q.position[0],onChange:u=>{const E=[...Q.position];E[0]=parseFloat(u.target.value)||0,K({position:E})},className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}),e("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"X"})]}),s("div",{className:"relative",children:[e("input",{type:"number",step:"0.1",value:Q.position[1],onChange:u=>{const E=[...Q.position];E[1]=parseFloat(u.target.value)||0,K({position:E})},className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}),e("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"Y"})]}),s("div",{className:"relative",children:[e("input",{type:"number",step:"0.1",value:Q.position[2],onChange:u=>{const E=[...Q.position];E[2]=parseFloat(u.target.value)||0,K({position:E})},className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"}),e("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-xs text-gray-400 pointer-events-none",children:"Z"})]})]})]}),s("div",{className:"space-y-3",children:[s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Cell Color"}),s("div",{className:"flex items-center gap-2",children:[e("input",{type:"color",value:Q.cellColor,onChange:u=>K({cellColor:u.target.value}),className:"w-10 h-10 rounded-lg border border-slate-600 bg-slate-800 cursor-pointer"}),e("div",{className:"flex-1 bg-slate-800/80 border border-slate-600 rounded-lg p-2",children:e("div",{className:"text-xs text-gray-300",children:Q.cellColor.toUpperCase()})})]})]}),s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Section Color"}),s("div",{className:"flex items-center gap-2",children:[e("input",{type:"color",value:Q.sectionColor,onChange:u=>K({sectionColor:u.target.value}),className:"w-10 h-10 rounded-lg border border-slate-600 bg-slate-800 cursor-pointer"}),e("div",{className:"flex-1 bg-slate-800/80 border border-slate-600 rounded-lg p-2",children:e("div",{className:"text-xs text-gray-300",children:Q.sectionColor.toUpperCase()})})]})]})]}),s("div",{className:"space-y-3",children:[s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Section Size"}),e("input",{type:"number",step:"1",min:"1",max:"50",value:Q.sectionSize,onChange:u=>K({sectionSize:parseInt(u.target.value)||10}),className:"w-full bg-slate-800/80 border border-slate-600 text-white text-xs p-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 transition-all"})]}),s("div",{className:"flex items-center justify-between p-3 bg-slate-800/40 rounded-lg border border-slate-700/50",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Infinite Grid"}),e("button",{onClick:()=>K({infiniteGrid:!Q.infiniteGrid}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-all duration-200 ${Q.infiniteGrid?"bg-blue-500 shadow-lg shadow-blue-500/30":"bg-slate-600"}`,children:e("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform duration-200 shadow-sm ${Q.infiniteGrid?"translate-x-6":"translate-x-1"}`})})]})]})]})})]})}),e(Le,{title:"Viewport",defaultOpen:!0,index:1,children:s("div",{className:"space-y-4",children:[s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Background Color"}),s("div",{className:"flex items-center gap-2",children:[e("input",{type:"color",value:T.backgroundColor,onChange:u=>g({backgroundColor:u.target.value}),className:"w-10 h-10 rounded-lg border border-slate-600 bg-slate-800 cursor-pointer"}),e("div",{className:"flex-1 bg-slate-800/80 border border-slate-600 rounded-lg p-2",children:e("div",{className:"text-xs text-gray-300",children:T.backgroundColor.toUpperCase()})})]})]}),s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Quick Presets"}),s("div",{className:"grid grid-cols-4 gap-2",children:[e("button",{onClick:()=>g({backgroundColor:"#1a202c"}),className:"h-8 rounded-lg border border-slate-600 transition-all hover:scale-105 hover:border-blue-500",style:{backgroundColor:"#1a202c"},title:"Dark Blue"}),e("button",{onClick:()=>g({backgroundColor:"#000000"}),className:"h-8 rounded-lg border border-slate-600 transition-all hover:scale-105 hover:border-blue-500",style:{backgroundColor:"#000000"},title:"Black"}),e("button",{onClick:()=>g({backgroundColor:"#374151"}),className:"h-8 rounded-lg border border-slate-600 transition-all hover:scale-105 hover:border-blue-500",style:{backgroundColor:"#374151"},title:"Gray"}),e("button",{onClick:()=>g({backgroundColor:"#ffffff"}),className:"h-8 rounded-lg border border-slate-600 transition-all hover:scale-105 hover:border-blue-500",style:{backgroundColor:"#ffffff"},title:"White"})]})]})]})}),e(Le,{title:"Skybox",defaultOpen:!1,index:2,children:s("div",{className:"space-y-4",children:[s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Environment"}),s("div",{className:"grid grid-cols-2 gap-2",children:[s("button",{onClick:()=>g({backgroundColor:"#87CEEB"}),className:"flex items-center p-2 bg-slate-800 border border-slate-600 rounded-lg hover:border-blue-500 transition-colors text-left",children:[e("div",{className:"w-4 h-4 rounded mr-2",style:{background:"linear-gradient(to bottom, #87CEEB, #E0F6FF)"}}),e("span",{className:"text-xs text-slate-300",children:"Blue Sky"})]}),s("button",{onClick:()=>g({backgroundColor:"#FF6B35"}),className:"flex items-center p-2 bg-slate-800 border border-slate-600 rounded-lg hover:border-blue-500 transition-colors text-left",children:[e("div",{className:"w-4 h-4 rounded mr-2",style:{background:"linear-gradient(to bottom, #FF6B35, #FFD700)"}}),e("span",{className:"text-xs text-slate-300",children:"Sunset"})]}),s("button",{onClick:()=>g({backgroundColor:"#1a1a2e"}),className:"flex items-center p-2 bg-slate-800 border border-slate-600 rounded-lg hover:border-blue-500 transition-colors text-left",children:[e("div",{className:"w-4 h-4 rounded mr-2",style:{background:"linear-gradient(to bottom, #1a1a2e, #16213e)"}}),e("span",{className:"text-xs text-slate-300",children:"Night"})]}),s("button",{onClick:()=>g({backgroundColor:"#FFB6C1"}),className:"flex items-center p-2 bg-slate-800 border border-slate-600 rounded-lg hover:border-blue-500 transition-colors text-left",children:[e("div",{className:"w-4 h-4 rounded mr-2",style:{background:"linear-gradient(to bottom, #FFB6C1, #FF69B4)"}}),e("span",{className:"text-xs text-slate-300",children:"Dawn"})]})]})]}),s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"HDR Environments"}),s("div",{className:"space-y-1",children:[yt.map(u=>s("button",{onClick:()=>{try{const E=cr(u.id),{setEnvironment:G}=Ne;E.type==="room"?G(null,1,"hdr","room"):E.preset&&G(E.preset,1,"hdr","preset")}catch(E){console.error("Failed to set HDR environment:",E)}},className:"w-full flex items-center p-2 bg-slate-800 border border-slate-600 rounded-lg hover:border-blue-500 transition-colors text-left",children:[e(h.Image,{className:"w-4 h-4 mr-2 text-slate-400"}),s("div",{className:"flex flex-col",children:[e("span",{className:"text-xs text-slate-300",children:u.name}),e("span",{className:"text-xs text-slate-500",children:u.description})]})]},u.id)),s("button",{onClick:()=>{const{clearEnvironment:u}=Ne;u(),g({backgroundColor:"#1a202c"})},className:"w-full flex items-center p-2 bg-slate-800 border border-slate-600 rounded-lg hover:border-red-500 transition-colors text-left",children:[e(h.XMark,{className:"w-4 h-4 mr-2 text-red-400"}),e("span",{className:"text-xs text-slate-300",children:"Clear Environment"})]})]})]}),s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Environment Intensity"}),s("div",{className:"flex items-center space-x-2",children:[e("input",{type:"range",min:"0",max:"2",step:"0.1",defaultValue:"1",onChange:u=>{const E=parseFloat(u.target.value),{setEnvironmentIntensity:G}=Ne;G(E);const ee=u.target.parentElement.querySelector(".intensity-display");ee&&(ee.textContent=E.toFixed(1))},className:"flex-1 h-2 bg-slate-700 rounded-lg appearance-none slider"}),e("span",{className:"text-xs text-slate-400 w-8 intensity-display",children:"1.0"})]})]}),s("div",{className:"space-y-2",children:[e("label",{className:"text-xs font-medium text-gray-300 uppercase tracking-wide",children:"Custom Background"}),s("div",{className:"flex items-center gap-2",children:[e("input",{type:"color",value:T.backgroundColor,onChange:u=>g({backgroundColor:u.target.value}),className:"w-10 h-10 rounded-lg border border-slate-600 bg-slate-800 cursor-pointer"}),e("div",{className:"flex-1 bg-slate-800/80 border border-slate-600 rounded-lg p-2",children:e("div",{className:"text-xs text-gray-300",children:T.backgroundColor.toUpperCase()})})]})]})]})})]})});default:return e("div",{className:"flex-1 p-3 overflow-y-auto scrollbar-thin",children:s("div",{className:"text-center text-gray-500 mt-8",children:[s("p",{className:"text-sm",children:[st()," panel"]}),e("p",{className:"text-xs mt-1",children:"Content coming soon..."})]})})}};return s("div",{className:"relative w-full h-full bg-gradient-to-b from-slate-800/95 to-slate-900/98 backdrop-blur-md border-l border-slate-700/80 shadow-2xl shadow-black/30 flex flex-col pointer-events-auto no-select",children:[s("div",{ref:Re,className:"px-3 py-2 border-b border-slate-700/60",children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("h2",{className:"text-sm font-medium text-white",children:st()}),e("button",{onClick:()=>{n(),l("select")},className:"p-1 hover:bg-slate-700/50 rounded transition-colors",children:e(h.ChevronRight,{className:"w-3 h-3 text-gray-400"})})]}),o==="scene"&&e("div",{className:"text-xs text-gray-400 uppercase tracking-wide",children:"SCENE OBJECTS (39)"})]}),At()]})}const ur=({isScenePanelOpen:t,rightPanelWidth:r,bottomPanelHeight:a,isAssetPanelOpen:n,selectedRightTool:o,selectedObject:l,onToolSelect:i,onScenePanelToggle:d,onObjectSelect:c,onContextMenu:f,style:p={}})=>s("div",{className:"absolute right-0 top-0 bottom-0 pointer-events-auto no-select z-20",style:{width:t?r:48,height:"100vh",...p},suppressHydrationWarning:!0,children:[e("div",{className:`absolute top-0 bottom-0 w-12 ${t?"left-1":"left-0"}`,children:e(ir,{selectedTool:o,onToolSelect:i,scenePanelOpen:t,onScenePanelToggle:d})}),t&&e("div",{className:"absolute left-13 right-0 top-0 bottom-0",children:e(dr,{selectedObject:l,onObjectSelect:c,isOpen:t,onToggle:d,selectedTool:o,onToolSelect:i,onContextMenu:f})})]}),hr=[{id:"assets",label:"Assets",icon:h.Cube},{id:"scripts",label:"Scripts",icon:h.CodeBracket},{id:"animation",label:"Animation",icon:h.Play},{id:"node-editor",label:"Node Editor",icon:h.AdjustmentsHorizontal},{id:"timeline",label:"Timeline",icon:h.Clock},{id:"console",label:"Console",icon:h.CommandLine},{id:"materials",label:"Materials",icon:h.Materials},{id:"terrain",label:"Terrain",icon:h.Terrain},{id:"lighting",label:"Lighting",icon:h.Sun},{id:"physics",label:"Physics",icon:h.Cube},{id:"audio",label:"Audio",icon:h.Audio},{id:"effects",label:"Effects",icon:h.Effects}];function mr({activeTab:t,onTabChange:r,isAssetPanelOpen:a,onToggleAssetPanel:n,rightPanelWidth:o,isScenePanelOpen:l}){const{ui:i}=me(D),{bottomTabOrder:d}=i,{setBottomTabOrder:c}=ne,f=()=>{const g=hr.reduce((P,$)=>(P[$.id]=$,P),{});return d.map(P=>g[P]).filter(Boolean)},[p,x]=C(f()),[w,b]=C(f()),[m,S]=C([]),[H,v]=C(!1),[j,O]=C({x:0,y:0}),[z,q]=C({isDragging:!1,draggedTab:null,dragOverTab:null,dragStartX:0,dragOffsetX:0}),[y,A]=C(!1),M=ge(null),L=ge(null),W=ge(null),R=ge(null);_(()=>{const g=f();x(g)},[d]),_(()=>{const g=()=>{if(!L.current||!W.current)return;const P=L.current.offsetWidth,$=40,X=40,re=P-$;let oe=0,be=0;for(let ve=0;ve<p.length;ve++){const ke=p[ve].label.length*7+50;if(oe+ke<=re)oe+=ke,be++;else break}if(be<p.length){oe=0,be=0;const ve=re-X;for(let ke=0;ke<p.length;ke++){const Re=p[ke].label.length*7+50;if(oe+Re<=ve)oe+=Re,be++;else break}b(p.slice(0,Math.max(1,be))),S(p.slice(Math.max(1,be)))}else b(p),S([])};return g(),window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[p,o,l]),_(()=>{const g=()=>{if(H&&R.current){const $=R.current.getBoundingClientRect();O({x:$.right,y:$.top-8})}},P=$=>{if(R.current&&!R.current.contains($.target)){const X=document.querySelector('[data-dropdown="true"]');(!X||!X.contains($.target))&&v(!1)}};if(H)return window.addEventListener("resize",g),window.addEventListener("scroll",g),document.addEventListener("mousedown",P),()=>{window.removeEventListener("resize",g),window.removeEventListener("scroll",g),document.removeEventListener("mousedown",P)}},[H]);const Q=g=>{z.isDragging||(r(g),v(!1))},T=()=>{if(!H&&R.current){const g=R.current.getBoundingClientRect();O({x:g.right,y:g.top-8})}v(!H)},te=(g,P)=>{g.dataTransfer.effectAllowed="move",g.dataTransfer.setData("text/html","");const $=g.currentTarget.getBoundingClientRect(),X=g.clientX-$.left;q({isDragging:!0,draggedTab:P,dragOverTab:null,dragStartX:g.clientX,dragOffsetX:X})},se=(g,P)=>{g.preventDefault(),g.dataTransfer.dropEffect="move",z.draggedTab&&z.draggedTab.id!==P.id&&q($=>({...$,dragOverTab:P}))},N=g=>{const P=g.currentTarget.getBoundingClientRect(),{clientX:$,clientY:X}=g;($<P.left||$>P.right||X<P.top||X>P.bottom)&&q(re=>({...re,dragOverTab:null}))},Y=(g,P)=>{if(g.preventDefault(),g.stopPropagation(),!z.draggedTab||z.draggedTab.id===P.id){q({isDragging:!1,draggedTab:null,dragOverTab:null,dragStartX:0,dragOffsetX:0});return}const $=p.findIndex(re=>re.id===z.draggedTab.id),X=p.findIndex(re=>re.id===P.id);if($!==-1&&X!==-1&&$!==X){const re=[...p],[oe]=re.splice($,1);re.splice(X,0,oe),x(re);const be=re.map(ve=>ve.id);c(be)}q({isDragging:!1,draggedTab:null,dragOverTab:null,dragStartX:0,dragOffsetX:0})},K=()=>{q({isDragging:!1,draggedTab:null,dragOverTab:null,dragStartX:0,dragOffsetX:0}),A(!1),M.current&&(clearTimeout(M.current),M.current=null)};return _(()=>()=>{M.current&&clearTimeout(M.current)},[]),s("div",{ref:L,className:"h-10 bg-slate-900 border-t border-slate-700 border-b border-slate-700 flex items-center relative z-50",suppressHydrationWarning:!0,children:[s("div",{ref:W,className:"flex flex-1 overflow-hidden",children:[w.map(g=>{var X,re;const P=((X=z.draggedTab)==null?void 0:X.id)===g.id,$=((re=z.dragOverTab)==null?void 0:re.id)===g.id;return s("button",{draggable:!0,onClick:()=>Q(g.id),onDragStart:oe=>te(oe,g),onDragOver:oe=>se(oe,g),onDragLeave:N,onDrop:oe=>Y(oe,g),onDragEnd:K,className:`relative flex items-center px-4 py-2.5 text-sm font-medium transition-all whitespace-nowrap select-none ${P?"opacity-50 cursor-grabbing":"hover:bg-slate-800 cursor-grab"} ${t===g.id?"text-blue-400":"text-gray-400 hover:text-gray-200"}`,style:{transform:P?"scale(0.95)":"scale(1)"},children:[e(g.icon,{className:"w-4 h-4 mr-2"}),g.label,t===g.id&&e("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-500",suppressHydrationWarning:!0}),$&&e("div",{className:"absolute inset-y-0 left-0 w-0.5 bg-blue-500 z-10"})]},g.id)}),m.length>0&&e("div",{onDragOver:g=>{g.preventDefault(),z.draggedTab&&m.some(P=>P.id===z.draggedTab.id)&&(g.dataTransfer.dropEffect="move")},onDrop:g=>{if(g.preventDefault(),z.draggedTab&&m.some(P=>P.id===z.draggedTab.id)){const P=p.findIndex(re=>re.id===z.draggedTab.id),$=w.length-1,X=p.findIndex(re=>re.id===w[$].id);if(P!==-1&&X!==-1){const re=[...p],[oe]=re.splice(P,1);re.splice(X+1,0,oe),x(re);const be=re.map(ve=>ve.id);c(be)}q({isDragging:!1,draggedTab:null,dragOverTab:null,dragStartX:0,dragOffsetX:0})}},className:"w-4 h-full flex items-center justify-center",children:z.draggedTab&&m.some(g=>g.id===z.draggedTab.id)&&e("div",{className:"w-0.5 h-6 bg-blue-500 opacity-50"})}),m.length>0&&e("div",{className:"relative",children:s("button",{ref:R,onClick:T,onDragEnter:g=>{g.preventDefault(),z.draggedTab&&(A(!0),M.current&&clearTimeout(M.current),M.current=setTimeout(()=>{var P;if(!H){const $=(P=R.current)==null?void 0:P.getBoundingClientRect();$&&(O({x:$.right,y:$.top-8}),v(!0))}},500))},onDragLeave:g=>{const P=g.currentTarget.getBoundingClientRect(),{clientX:$,clientY:X}=g;($<P.left||$>P.right||X<P.top||X>P.bottom)&&(A(!1),M.current&&(clearTimeout(M.current),M.current=null))},onDragOver:g=>{g.preventDefault(),z.draggedTab&&(g.dataTransfer.dropEffect="move")},onDrop:g=>{if(g.preventDefault(),A(!1),M.current&&(clearTimeout(M.current),M.current=null),z.draggedTab&&w.some(P=>P.id===z.draggedTab.id)){const P=p.findIndex($=>$.id===z.draggedTab.id);if(P!==-1){const $=[...p],[X]=$.splice(P,1);$.push(X),x($);const re=$.map(oe=>oe.id);c(re)}q({isDragging:!1,draggedTab:null,dragOverTab:null,dragStartX:0,dragOffsetX:0})}},className:`relative flex items-center px-3 py-2.5 text-sm font-medium transition-colors ${y?"bg-blue-600/20 border border-blue-500":"hover:bg-slate-800"} ${m.some(g=>g.id===t)?"text-blue-400":"text-gray-400 hover:text-gray-200"}`,children:[e(h.MenuBars,{className:"w-4 h-4"}),m.some(g=>g.id===t)&&e("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-500"})]})})]}),e("div",{className:"flex items-center pr-1",children:e("button",{onClick:n,className:"p-1.5 hover:bg-slate-800 rounded transition-colors text-gray-400 hover:text-white",title:a?"Hide panel":"Show panel",children:a?e(h.ChevronDown,{className:"w-4 h-4"}):e(h.ChevronUp,{className:"w-4 h-4"})})}),H&&m.length>0&&e("div",{className:"fixed bg-slate-800 border border-slate-700 rounded-lg shadow-2xl shadow-black/50 min-w-48 pointer-events-auto","data-dropdown":"true",style:{left:`${j.x}px`,top:`${j.y}px`,transform:"translate(-100%, -100%)",zIndex:9999},children:m.map(g=>{var X,re;const P=((X=z.draggedTab)==null?void 0:X.id)===g.id,$=((re=z.dragOverTab)==null?void 0:re.id)===g.id;return s("button",{draggable:!0,onClick:()=>Q(g.id),onDragStart:oe=>te(oe,g),onDragOver:oe=>se(oe,g),onDragLeave:N,onDrop:oe=>Y(oe,g),onDragEnd:K,className:`w-full flex items-center px-3 py-2 text-sm font-medium transition-all first:rounded-t-lg last:rounded-b-lg select-none ${P?"opacity-50 cursor-grabbing":"hover:bg-slate-700 cursor-grab"} ${t===g.id?"text-blue-400 bg-slate-700/50":"text-gray-300 hover:text-gray-200"}`,style:{transform:P?"scale(0.95)":"scale(1)"},children:[e(g.icon,{className:"w-4 h-4 mr-2"}),g.label,$&&e("div",{className:"absolute inset-y-0 left-0 w-0.5 bg-blue-500 z-10"})]},g.id)})})]})}const gr="1.0.0",pr="0.1.0",Ze="renzora-current-project",Fe="UntitledProject";let fr=class{constructor(){this.currentProjectPath=null,this.currentProjectName=null,this.initialized=!1,this.loadingCallbacks=[],this.isCurrentlyLoading=!1,this.eventSource=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3,this.fileChangeCallbacks=[],Se.setProjectManager(this)}addLoadingListener(r){this.loadingCallbacks.push(r)}removeLoadingListener(r){this.loadingCallbacks=this.loadingCallbacks.filter(a=>a!==r)}emitLoadingProgress(r,a="",n="loading"){this.loadingCallbacks.forEach(o=>{try{o({progress:r,asset:a,operation:n,isLoading:this.isCurrentlyLoading})}catch(l){console.warn("Loading callback error:",l)}})}startLoading(r="loading"){console.log("üö® startLoading called with operation:",r),console.trace("Loading triggered from:"),this.isCurrentlyLoading=!0,this.emitLoadingProgress(0,"",r)}updateLoadingProgress(r,a=""){this.emitLoadingProgress(r,a)}finishLoading(){this.emitLoadingProgress(100),setTimeout(()=>{this.isCurrentlyLoading=!1,this.emitLoadingProgress(0,"","")},300)}addFileChangeListener(r){this.fileChangeCallbacks.push(r)}removeFileChangeListener(r){this.fileChangeCallbacks=this.fileChangeCallbacks.filter(a=>a!==r)}emitFileChange(r){this.fileChangeCallbacks.forEach(a=>{try{a(r)}catch(n){console.warn("File change callback error:",n)}})}connectEventSource(r){this.eventSource&&this.eventSource.close();const a=`/api/projects/${r}/watch`;console.log(`Connecting to SSE: ${a}`),this.eventSource=new EventSource(a),this.eventSource.onopen=()=>{console.log(`SSE connected for project: ${r}`),this.reconnectAttempts=0},this.eventSource.onmessage=n=>{try{const o=JSON.parse(n.data);switch(console.log("File change detected:",o),o.type){case"connected":console.log(`SSE connection confirmed for project: ${o.project}`);break;case"file_added":case"file_changed":case"file_deleted":case"directory_added":case"directory_deleted":case"assets_directory_recreated":this.emitFileChange(o);break;default:console.log("Unknown SSE message:",o)}}catch(o){console.error("Error parsing SSE message:",o)}},this.eventSource.onerror=n=>{console.error(`SSE error for project ${r}:`,n),this.eventSource.readyState===EventSource.CLOSED&&(console.log(`SSE connection closed for project: ${r}`),this.eventSource=null,this.reconnectAttempts<this.maxReconnectAttempts&&setTimeout(()=>{console.log(`Attempting to reconnect SSE (${this.reconnectAttempts+1}/${this.maxReconnectAttempts})`),this.reconnectAttempts++,this.connectEventSource(r)},this.reconnectDelay*Math.pow(2,this.reconnectAttempts)))}}disconnectEventSource(){this.eventSource&&(this.eventSource.close(),this.eventSource=null)}async extractProject(r,a){this.startLoading("importing");try{this.updateLoadingProgress(10,"Reading .ren file");const n=await this.readFile(r);this.updateLoadingProgress(20,"Parsing project data");const o=JSON.parse(n);if(this.updateLoadingProgress(30,"Validating project"),!this.validateProjectData(o))throw new Error("Invalid .ren project file");this.updateLoadingProgress(40,"Creating project structure");const l=await fetch("/api/projects/import",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectName:a,renData:o})});if(!l.ok){const d=await l.json();throw new Error(d.error||"Failed to import project")}this.updateLoadingProgress(60,"Extracting assets");const i=await l.json();return await new Promise(d=>setTimeout(d,500)),this.updateLoadingProgress(80,"Loading scene data"),this.loadSceneData(o.scene),this.updateLoadingProgress(90,"Loading editor settings"),o.editor&&this.loadEditorSettings(o.editor),this.currentProjectPath=i.projectPath,this.currentProjectName=a,this.saveCurrentProjectToStorage(),this.connectEventSource(i.projectPath),this.updateLoadingProgress(100,"Project imported successfully"),console.log(`Project "${a}" extracted successfully`),this.finishLoading(),i.projectPath}catch(n){throw console.error("Failed to extract project:",n),this.finishLoading(),n}}async packageProject(r,a){this.startLoading("exporting");try{if(!r||!a)throw new Error("Project path and output name are required");this.updateLoadingProgress(20,"Collecting project data");const n=await fetch(`/api/projects/${r}/export`);if(!n.ok){const i=await n.json();throw new Error(i.error||"Failed to export project")}this.updateLoadingProgress(60,"Packaging assets");const o=await n.text(),l=Math.min(1e3,o.length/1e3);return await new Promise(i=>setTimeout(i,l)),this.updateLoadingProgress(90,"Preparing download"),await this.downloadFile(`${a}.ren`,o),this.updateLoadingProgress(100,"Export complete"),console.log(`Project packaged as "${a}.ren"`),this.finishLoading(),JSON.parse(o)}catch(n){throw console.error("Failed to package project:",n),this.finishLoading(),n}}async createNewProject(r,a=!1){this.startLoading("creating");try{if(!a)try{if(console.log(`Checking if project "${r}" already exists`),(await fetch(`/api/projects/${r}`)).ok){console.log(`Project "${r}" already exists, loading instead of creating`);const i=await this.loadProject(r);return this.finishLoading(),i}}catch(l){console.log("Project doesn't exist or check failed, proceeding with creation:",l.message)}this.updateLoadingProgress(20,"Creating project structure");const n=await fetch("/api/projects/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectName:r})});if(!n.ok){const l=await n.json();throw new Error(l.error||"Failed to create project")}this.updateLoadingProgress(50,"Setting up directories");const o=await n.json();if(await new Promise(l=>setTimeout(l,300)),this.updateLoadingProgress(80,"Setting up project"),a||B.entities.size===0){console.log("Initializing with default scene"),ce.clear();const l=ce.createEntity("Scene");ce.setSceneRoot(l)}else console.log("Preserving existing scene data");return this.updateLoadingProgress(90,"Finalizing project"),this.currentProjectPath=o.projectPath,this.currentProjectName=r,this.saveCurrentProjectToStorage(),this.connectEventSource(o.projectPath),this.updateLoadingProgress(100,"Project created successfully"),console.log(`New project "${r}" created`),this.finishLoading(),o.projectPath}catch(n){throw console.error("Failed to create new project:",n),this.finishLoading(),n}}async createProjectStructure(r){const a=[`${r}`,`${r}/assets`,`${r}/assets/textures`,`${r}/assets/models`,`${r}/assets/audio`,`${r}/assets/scripts`,`${r}/scenes`];console.log("Creating directories:",a)}async extractAssets(r,a){for(const[n,o]of Object.entries(r)){const l=`${a}/${n}`;if(o.startsWith("data:")){const i=o.split(",")[1],d=atob(i);await this.saveBinaryFile(l,d)}else await this.saveFile(l,o)}}async collectAssets(){return{}}loadSceneData(r){if(r){if(ce.clear(),r.entities){B.entityCounter=r.entityCounter||0;for(const[a,n]of Object.entries(r.entities))B.entities.set(parseInt(a),n)}if(r.components){for(const[a,n]of Object.entries(r.components))if(B.components[a])for(const[o,l]of Object.entries(n))B.components[a].set(parseInt(o),l)}r.sceneObjects&&(D.sceneObjects=r.sceneObjects),r.sceneRoot&&ce.setSceneRoot(r.sceneRoot)}}collectSceneData(){const r={};B.entities.forEach((n,o)=>{r[o]={...n,components:Array.from(n.components)}});const a={};for(const[n,o]of Object.entries(B.components))a[n]={},o.forEach((l,i)=>{a[n][i]=l});return{entities:r,components:a,sceneObjects:D.sceneObjects,entityCounter:B.entityCounter,sceneRoot:B.sceneRoot}}loadEditorSettings(r){r.settings&&r.settings.editor&&Object.assign(D.settings.editor,r.settings.editor),console.log("üìã Project settings loaded, UI preferences preserved in localStorage")}collectEditorSettings(){return{settings:{editor:{...D.settings.editor}}}}validateProjectData(r){return r&&typeof r=="object"&&(r.project||r.scene||r.editor)}async readProjectInfo(r){try{const a=await this.readFile(r);return JSON.parse(a)}catch{return{name:"Untitled Project",version:gr,engineVersion:pr,created:new Date().toISOString()}}}async readFile(r){if(r instanceof File)return await r.text();throw new Error("File reading not implemented for paths")}async saveFile(r,a){console.log(`Saving file: ${r}`),console.log(`Content length: ${a.length}`)}async saveBinaryFile(r,a){console.log(`Saving binary file: ${r}`),console.log(`Data length: ${a.length}`)}async downloadFile(r,a){const n=new Blob([a],{type:"application/json"}),o=URL.createObjectURL(n),l=document.createElement("a");l.href=o,l.download=r,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(o)}async loadProject(r){this.startLoading("loading");try{console.log(`Loading project from server: ${r}`),this.updateLoadingProgress(10,"Connecting to server");const a=await fetch(`/api/projects/${r}`);if(!a.ok){const o=await a.json();throw console.error("Server error loading project:",o),new Error(o.error||"Failed to load project")}this.updateLoadingProgress(40,"Loading project data");const n=await a.json();return console.log("Project data loaded:",n),await new Promise(o=>setTimeout(o,300)),this.updateLoadingProgress(70,"Loading project state"),console.log("üîÑ Loading project data into stores:",n),Se.loadFromProject(n),console.log("‚úÖ Project data loaded into stores"),this.updateLoadingProgress(95,"Finalizing"),this.currentProjectPath=n.projectPath,this.currentProjectName=n.project.name,this.saveCurrentProjectToStorage(),this.connectEventSource(n.projectPath),this.updateLoadingProgress(100,"Project loaded successfully"),console.log(`Project "${r}" loaded successfully`),this.finishLoading(),n.projectPath}catch(a){throw console.error("Failed to load project:",a),this.finishLoading(),a}}async initializeDefaultProject(){if(!this.initialized)try{const r=this.getCurrentProjectFromStorage();if(r&&r.name&&r.path){console.log(`Reloading project: ${r.name} from path: ${r.path}`);try{const a=r.path.includes("/")?r.path.split("/").pop():r.path;await this.loadProject(a)}catch(a){console.warn("Failed to reload stored project:",a),console.warn("Stored project data:",r);try{console.log("Attempting to load existing default project instead of creating new"),await this.loadProject(Fe)}catch(n){console.warn("Default project also failed to load, creating new:",n),this.clearCurrentProjectFromStorage(),await this.createNewProject(Fe)}}}else{console.log("No stored project found, attempting to load default project"),console.log("Stored project data:",r);try{await this.loadProject(Fe),console.log("Default project loaded successfully")}catch(a){console.log("Default project does not exist, creating new:",a.message),await this.createNewProject(Fe)}}this.initialized=!0}catch(r){console.error("Failed to initialize default project:",r),this.currentProjectName=Fe,this.currentProjectPath=Fe,B.entities.size===0?(console.log("No scene data found, setting up default scene"),this.setupDefaultScene()):console.log("Preserving existing scene data in fallback"),this.saveCurrentProjectToStorage(),this.initialized=!0}}setupDefaultScene(){ce.clear();const r=ce.createEntity("Scene");ce.setSceneRoot(r),D.sceneObjects&&D.sceneObjects.length===0&&(D.sceneObjects=[{id:"cube-1",name:"Cube",type:"mesh",position:[0,0,0],rotation:[0,0,0],scale:[1,1,1],geometry:"box",material:{color:"orange"},visible:!0}])}saveCurrentProjectToStorage(){try{const r={name:this.currentProjectName,path:this.currentProjectPath,lastAccessed:new Date().toISOString()};localStorage.setItem(Ze,JSON.stringify(r))}catch(r){console.warn("Failed to save current project to localStorage:",r)}}getCurrentProjectFromStorage(){try{const r=localStorage.getItem(Ze);return r?JSON.parse(r):null}catch(r){return console.warn("Failed to load current project from localStorage:",r),null}}clearCurrentProjectFromStorage(){try{localStorage.removeItem(Ze)}catch(r){console.warn("Failed to clear current project from localStorage:",r)}}async autoSaveCurrentProject(){if(!(!this.currentProjectName||!this.currentProjectPath))try{console.log(`Auto-saving project: ${this.currentProjectName}`);const r=Se.getAllStoreData(),a=await fetch(`/api/projects/${this.currentProjectPath}/save`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!a.ok){const n=await a.json();throw new Error(n.error||"Failed to auto-save project")}this.saveCurrentProjectToStorage(),console.log(`‚úÖ Auto-saved project: ${this.currentProjectName}`)}catch(r){console.warn("‚ö†Ô∏è Auto-save failed:",r)}}getCurrentProject(){return{path:this.currentProjectPath,name:this.currentProjectName}}hasCurrentProject(){return!!(this.currentProjectName&&this.currentProjectPath)}clearAllStorageData(){console.log("Clearing all project localStorage data..."),this.clearCurrentProjectFromStorage(),localStorage.removeItem("engine-ui-settings"),console.log("All storage data cleared")}};const ae=new fr;class br{constructor(){this.renderer=new fe.WebGLRenderer({alpha:!0,antialias:!0,preserveDrawingBuffer:!0}),this.renderer.setSize(128,128),this.renderer.setClearColor(0,0),this.scene=new fe.Scene,this.camera=new fe.PerspectiveCamera(45,1,.1,1e3),this.camera.position.set(2,1.5,2),this.camera.lookAt(0,0,0);const r=new fe.AmbientLight(16777215,.5);this.scene.add(r);const a=new fe.DirectionalLight(16777215,.8);a.position.set(3,3,3),this.scene.add(a);const n=new fe.DirectionalLight(16777215,.3);n.position.set(-2,-2,-2),this.scene.add(n),this.thumbnailCache=new Map}async generateThumbnail(r,a){return this.thumbnailCache.has(r)?this.thumbnailCache.get(r):new Promise((n,o)=>{let l;const i=a.toLowerCase();if(i===".gltf"||i===".glb")l=new Ut;else if(i===".obj")l=new _t;else if(i===".fbx")l=new Xt;else{o(new Error(`Unsupported model format: ${a}`));return}l.load(r,d=>{try{let c;d.scene?c=d.scene:c=d,this.scene.clear(),this.scene.add(new fe.AmbientLight(16777215,.5)),this.scene.add(new fe.DirectionalLight(16777215,.8)).position.set(3,3,3),this.scene.add(new fe.DirectionalLight(16777215,.3)).position.set(-2,-2,-2);const f=new fe.Box3().setFromObject(c),p=f.getCenter(new fe.Vector3),x=f.getSize(new fe.Vector3),w=Math.max(x.x,x.y,x.z),b=w>0?1/w:1;c.scale.setScalar(b*.8),c.position.sub(p.multiplyScalar(b)),this.scene.add(c),this.renderer.render(this.scene,this.camera);const m=this.renderer.domElement.toDataURL("image/png");this.thumbnailCache.set(r,m),n(m)}catch(c){o(c)}},void 0,d=>{o(d)})})}}let qe=null;function xr(){return!qe&&typeof window<"u"&&(qe=new br),qe}function vr({asset:t,className:r,isHovered:a}){const[n,o]=C(null),[l,i]=C("idle"),[d,c]=C(!1);_(()=>{c(!0)},[]),_(()=>{d&&t.category==="3d-models"&&f()},[t,d]);const f=async()=>{if(d){i("loading");try{const p=xr();if(!p)throw new Error("Thumbnail generator not available (SSR)");const w=`/api/projects/${ae.getCurrentProject().name}/assets/file/${t.path}`,b=await p.generateThumbnail(w,t.extension);o(b),i("loaded")}catch(p){console.warn(`Failed to generate thumbnail for ${t.name}:`,p),i("error")}}};if(t.category!=="3d-models"){let p=h.Cube3D;switch(t.category){case"textures":p=h.Textures;break;case"audio":p=h.Audio;break;case"scripts":p=h.Scripts;break;default:p=h.Cube3D}return e(p,{className:r,isHovered:a})}return l==="error"||!n?s("div",{className:`${r} relative`,children:[e(h.Cube3D,{className:r,isHovered:a}),l==="loading"&&e("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-700 bg-opacity-75 rounded",children:e("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})})]}):s("div",{className:`${r} relative overflow-hidden rounded bg-slate-700`,children:[e("img",{src:n,alt:`Preview of ${t.name}`,className:"w-full h-full object-cover",style:{imageRendering:"crisp-edges",filter:"contrast(1.1) brightness(1.1)"}}),l==="loading"&&e("div",{className:"absolute inset-0 flex items-center justify-center bg-slate-700 bg-opacity-75 rounded",children:e("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"})})]})}function yr(){var se;const[t,r]=C("3d-models"),[a,n]=C(""),[o,l]=C(null),[i,d]=C(!1),[c,f]=C([]),[p,x]=C(!0),[w,b]=C(null),[m,S]=C(new Set),[H,v]=C(new Set),[j,O]=C(new Set),[z,q]=C(!0),{ui:y}=me(D),{assetsLibraryWidth:A}=y,{setAssetsLibraryWidth:M}=ne;_(()=>{const N=ae.getCurrentProject();if(!N.name){b("No project loaded");return}async function Y(){try{x(!0),b(null);const g=await fetch(`/api/projects/${N.name}/assets`);if(!g.ok)throw new Error("Failed to fetch assets");const $=(await g.json()).assets||[];console.log("üìÅ Assets loaded:",$.length,"items"),f($),x(!1)}catch(g){console.error("Error fetching assets:",g),b(g.message),f([]),x(!1)}}const K=g=>{console.log("üìÅ File change detected in assets:",g),(g.path.startsWith("assets/")||g.type==="assets_directory_recreated")&&(console.log("üîÑ Refreshing assets due to change:",g.path),Y())};return ae.addFileChangeListener(K),Y(),()=>{ae.removeFileChangeListener(K)}},[]);const L=async N=>{if(!(m.has(N.id)||H.has(N.id)||j.has(N.id))){v(Y=>new Set([...Y,N.id]));try{const K=`/api/projects/${ae.getCurrentProject().name}/assets/file/${N.path}`;if(N.category==="textures"){const g=new Image;await new Promise((P,$)=>{const X=setTimeout(()=>$(new Error("Image load timeout")),1e4);g.onload=()=>{clearTimeout(X),P()},g.onerror=()=>{clearTimeout(X),$(new Error("Image load failed"))},g.src=K})}else if(N.category==="audio"){const g=new Audio;await new Promise((P,$)=>{const X=setTimeout(()=>$(new Error("Audio load timeout")),1e4);g.oncanplaythrough=()=>{clearTimeout(X),P()},g.onerror=()=>{clearTimeout(X),$(new Error("Audio load failed"))},g.src=K})}else{const g=await fetch(K);if(!g.ok)throw new Error(`HTTP ${g.status}: ${g.statusText}`);N.size<1024*1024&&await g.blob()}S(g=>new Set([...g,N.id])),console.log(`‚úÖ Preloaded asset: ${N.name}`)}catch(Y){console.warn(`‚ùå Failed to preload asset ${N.name}:`,Y.message),O(K=>new Set([...K,N.id]))}finally{v(Y=>{const K=new Set(Y);return K.delete(N.id),K})}}};_(()=>{if(c.length===0)return;const N=async P=>{const $=P.map(X=>L(X));await Promise.allSettled($)},Y=5;let K=0;(async()=>{for(;K*Y<c.length;){const P=c.slice(K*Y,(K+1)*Y);await N(P),K++,K*Y<c.length&&await new Promise($=>setTimeout($,100))}})()},[c]);const W=Ge.useMemo(()=>{const N=c.reduce((Y,K)=>(Y[K.category]=(Y[K.category]||0)+1,Y),{});return[{id:"3d-models",label:"3D Models",count:N["3d-models"]||0,icon:h.Models},{id:"textures",label:"Textures",count:N.textures||0,icon:h.Textures},{id:"audio",label:"Audio",count:N.audio||0,icon:h.Audio},{id:"scripts",label:"Scripts",count:N.scripts||0,icon:h.Scripts},{id:"data",label:"Data",count:N.data||0,icon:h.Scripts},{id:"misc",label:"Misc",count:N.misc||0,icon:h.Prefabs}]},[c]),R=Ge.useMemo(()=>c.filter(N=>{const Y=t==="all"||N.category===t,K=N.name.toLowerCase().includes(a.toLowerCase())||N.fileName.toLowerCase().includes(a.toLowerCase());return Y&&K}),[c,t,a]);_(()=>{if(R.length===0)return;const N=R.length,Y=R.filter(g=>m.has(g.id)||j.has(g.id)).length,K=H.size>0;if(Y===N&&!K&&z){const g=setTimeout(()=>{q(!1)},1e3);return()=>clearTimeout(g)}},[R,m,j,H,z]),_(()=>{R.length>0&&q(!0)},[R]);const Q=N=>{d(!0),document.body.classList.add("dragging-horizontal"),N.preventDefault()},T=N=>{if(!i)return;const Y=N.clientX;M(Math.max(120,Math.min(300,Y)))},te=()=>{d(!1),document.body.classList.remove("dragging-horizontal")};return Ge.useEffect(()=>{if(i)return document.addEventListener("mousemove",T),document.addEventListener("mouseup",te),()=>{document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",te)}},[i]),s("div",{className:"h-full flex bg-slate-800 no-select",children:[s("div",{className:"bg-slate-900 border-r border-slate-700 flex flex-col relative",style:{width:A},children:[e("div",{className:`absolute right-0 top-0 bottom-0 w-0.5 resize-handle cursor-col-resize ${i?"dragging":""}`,onMouseDown:Q}),e("div",{className:"px-2 py-2",children:s("div",{className:"relative mt-1",children:[e(h.MagnifyingGlass,{className:"w-3 h-3 absolute left-2 top-1.5 text-gray-400"}),e("input",{type:"text",placeholder:"Search...",value:a,onChange:N=>n(N.target.value),className:"w-full pl-6 pr-2 py-1 bg-slate-800 border border-slate-600 rounded text-xs text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 transition-colors"})]})}),e("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:e("div",{className:"space-y-0.5 p-1",children:W.map(N=>s("button",{onClick:()=>r(N.id),className:`w-full flex items-center justify-between px-2 py-1.5 text-left text-xs rounded hover:bg-slate-800 transition-colors ${t===N.id?"bg-blue-600 text-white":"text-gray-300 hover:text-white"}`,children:[s("span",{className:"flex items-center",children:[e(N.icon,{className:`w-3 h-3 mr-2 ${t===N.id?"text-white":"text-gray-400"}`}),N.label]}),e("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${t===N.id?"text-white bg-blue-500":"text-gray-400 bg-slate-700"}`,children:N.count})]},N.id))})})]}),s("div",{className:"flex-1 p-3 overflow-y-auto scrollbar-thin bg-slate-800",children:[s("div",{className:"flex items-center justify-between mb-3",children:[s("div",{className:"flex items-center gap-3",children:[e("h3",{className:"text-sm font-medium text-white",children:t==="3d-models"?"3D Models":((se=W.find(N=>N.id===t))==null?void 0:se.label)||"Assets"}),R.length>0&&s(we,{children:[s("div",{className:`flex items-center gap-2 transition-all duration-1000 ${z?"opacity-100":"opacity-0"}`,children:[e("div",{className:"w-20 h-1.5 bg-gray-700 rounded-full overflow-hidden",children:e("div",{className:"h-full bg-green-500 transition-all duration-300 rounded-full",style:{width:`${R.filter(N=>m.has(N.id)).length/R.length*100}%`}})}),s("span",{className:"text-xs text-gray-400",children:[R.filter(N=>m.has(N.id)).length,"/",R.length]})]}),!z&&R.filter(N=>m.has(N.id)).length===R.length&&s("div",{className:"flex items-center gap-1 text-green-400 animate-pulse",children:[e("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e("span",{className:"text-xs",children:"All loaded"})]})]})]}),s("span",{className:"text-xs text-gray-400",children:[R.length," items"]})]}),p&&e("div",{className:"text-center text-gray-400 mt-12",children:e("p",{className:"text-sm",children:"Loading assets..."})}),w&&e("div",{className:"text-center text-red-400 mt-12",children:s("p",{className:"text-sm",children:["Error: ",w]})}),!p&&!w&&e("div",{className:"grid grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-10 gap-3",children:R.map(N=>s("div",{className:"group cursor-pointer transition-all duration-200 p-2 rounded hover:bg-slate-700/30",draggable:!0,onMouseEnter:()=>l(N.id),onMouseLeave:()=>l(null),onClick:Y=>{j.has(N.id)&&(Y.preventDefault(),console.log(`üîÑ Retrying failed asset: ${N.name}`),O(K=>{const g=new Set(K);return g.delete(N.id),g}),L(N))},onDragStart:Y=>{Y.dataTransfer.setData("application/json",JSON.stringify({type:"asset",id:N.id,name:N.name,path:N.path,category:N.category}))},children:[e("div",{className:"relative",children:s("div",{className:"w-full h-16 mb-2 flex items-center justify-center relative",children:[e(vr,{asset:N,className:`w-14 h-14 transition-all group-hover:scale-110 ${m.has(N.id)?"opacity-100":j.has(N.id)?"opacity-40 grayscale":"opacity-60"}`,isHovered:o===N.id}),e("div",{className:"absolute top-0 right-0 bg-blue-600 text-white text-xs font-bold px-2 py-1 rounded-full text-center leading-none",children:N.extension.replace(".","").toUpperCase()}),e("div",{className:"absolute -bottom-1 -right-1",children:H.has(N.id)?e("div",{className:"w-6 h-6 bg-yellow-500 rounded-full flex items-center justify-center",children:e("div",{className:"w-3 h-3 border-2 border-white border-t-transparent rounded-full animate-spin"})}):j.has(N.id)?e("div",{className:"w-6 h-6 bg-red-500 rounded-full flex items-center justify-center",title:`Failed to load ${N.name}`,children:e("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})}):m.has(N.id)?e("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center",children:e("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}):e("div",{className:"w-6 h-6 bg-gray-500 rounded-full flex items-center justify-center",children:e("div",{className:"w-2 h-2 bg-gray-300 rounded-full"})})})]})}),e("div",{className:"text-xs text-gray-300 group-hover:text-white transition-colors truncate text-center",title:N.name,children:N.name})]},N.id))}),!p&&!w&&R.length===0&&a&&e("div",{className:"text-center text-gray-500 mt-12",children:s("p",{className:"text-sm",children:['No assets found matching "',a,'"']})})]})]})}const ut=[{id:"behavior",label:"Behavior Scripts",count:8,icon:h.Scripts},{id:"ui",label:"UI Scripts",count:3,icon:h.Code},{id:"system",label:"System Scripts",count:12,icon:h.Cog},{id:"custom",label:"Custom Scripts",count:5,icon:h.CodeBracket}],wr=[{id:"player-controller",name:"PlayerController.js",type:"behavior",size:"2.4 KB"},{id:"camera-follow",name:"CameraFollow.js",type:"behavior",size:"1.8 KB"},{id:"inventory-ui",name:"InventoryUI.js",type:"ui",size:"3.2 KB"},{id:"health-system",name:"HealthSystem.js",type:"system",size:"4.1 KB"},{id:"lighting-controller",name:"LightingController.js",type:"system",size:"2.7 KB"},{id:"menu-handler",name:"MenuHandler.js",type:"ui",size:"1.9 KB"}];function Nr(){var l;const[t,r]=C("behavior"),[a,n]=C(""),o=wr.filter(i=>i.type===t&&i.name.toLowerCase().includes(a.toLowerCase()));return s("div",{className:"h-full flex bg-slate-800",children:[s("div",{className:"w-48 bg-slate-900 border-r border-slate-700 flex flex-col",children:[e("div",{className:"p-3 border-b border-slate-700",children:s("div",{className:"relative",children:[e(h.MagnifyingGlass,{className:"w-3 h-3 absolute left-2 top-1.5 text-gray-400"}),e("input",{type:"text",placeholder:"Search scripts...",value:a,onChange:i=>n(i.target.value),className:"w-full pl-6 pr-2 py-1 bg-slate-800 border border-slate-600 rounded text-xs text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"})]})}),e("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:e("div",{className:"space-y-1 p-2",children:ut.map(i=>s("button",{onClick:()=>r(i.id),className:`w-full flex items-center justify-between px-2 py-2 text-left text-xs rounded hover:bg-slate-800 transition-colors ${t===i.id?"bg-blue-600 text-white":"text-gray-300 hover:text-white"}`,children:[s("span",{className:"flex items-center",children:[e(i.icon,{className:`w-3 h-3 mr-2 ${t===i.id?"text-white":"text-gray-400"}`}),i.label]}),e("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${t===i.id?"text-white bg-blue-500":"text-gray-400 bg-slate-700"}`,children:i.count})]},i.id))})})]}),s("div",{className:"flex-1 p-3 overflow-y-auto scrollbar-thin",children:[s("div",{className:"flex items-center justify-between mb-3",children:[e("h3",{className:"text-sm font-medium text-white",children:((l=ut.find(i=>i.id===t))==null?void 0:l.label)||"Scripts"}),s("div",{className:"flex items-center gap-2",children:[s("span",{className:"text-xs text-gray-400",children:[o.length," scripts"]}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:"+ New Script"})]})]}),e("div",{className:"space-y-2",children:o.map(i=>s("div",{className:"flex items-center justify-between p-3 bg-slate-700/30 hover:bg-slate-700/50 rounded-lg border border-slate-600/50 transition-colors cursor-pointer group",children:[s("div",{className:"flex items-center gap-3",children:[e(h.CodeBracket,{className:"w-4 h-4 text-blue-400"}),s("div",{children:[e("div",{className:"text-sm font-medium text-white group-hover:text-blue-200 transition-colors",children:i.name}),e("div",{className:"text-xs text-gray-400",children:i.size})]})]}),s("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e("button",{className:"p-1 hover:bg-slate-600 rounded text-gray-400 hover:text-white",children:e(h.Pencil,{className:"w-3 h-3"})}),e("button",{className:"p-1 hover:bg-slate-600 rounded text-gray-400 hover:text-red-400",children:e(h.Trash,{className:"w-3 h-3"})})]})]},i.id))}),o.length===0&&a&&e("div",{className:"text-center text-gray-500 mt-12",children:s("p",{className:"text-sm",children:['No scripts found matching "',a,'"']})})]})]})}const Ye=[{id:"idle",name:"Idle",duration:"2.5s",frames:60,status:"active"},{id:"walk",name:"Walk Cycle",duration:"1.2s",frames:30,status:"active"},{id:"run",name:"Run Cycle",duration:"0.8s",frames:24,status:"active"},{id:"jump",name:"Jump",duration:"1.8s",frames:45,status:"inactive"},{id:"attack",name:"Attack Combo",duration:"2.1s",frames:52,status:"inactive"}];function Cr(){var c,f;const[t,r]=C("idle"),[a,n]=C(!1),[o,l]=C(15),[i,d]=C(1);return s("div",{className:"h-full flex bg-slate-800",children:[s("div",{className:"w-64 bg-slate-900 border-r border-slate-700 flex flex-col",children:[e("div",{className:"p-3 border-b border-slate-700",children:s("div",{className:"flex items-center justify-between mb-2",children:[e("h3",{className:"text-sm font-medium text-white",children:"Animation Clips"}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300",children:"+ New"})]})}),e("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:e("div",{className:"space-y-1 p-2",children:Ye.map(p=>s("div",{onClick:()=>r(p.id),className:`p-2 rounded cursor-pointer transition-colors ${t===p.id?"bg-blue-600 text-white":"text-gray-300 hover:bg-slate-800 hover:text-white"}`,children:[s("div",{className:"flex items-center justify-between",children:[s("div",{className:"flex items-center gap-2",children:[e(h.Play,{className:"w-3 h-3"}),e("span",{className:"text-sm font-medium",children:p.name})]}),e("div",{className:`w-2 h-2 rounded-full ${p.status==="active"?"bg-green-400":"bg-gray-500"}`})]}),s("div",{className:"text-xs text-gray-400 mt-1",children:[p.duration," ‚Ä¢ ",p.frames," frames"]})]},p.id))})})]}),s("div",{className:"flex-1 flex flex-col",children:[e("div",{className:"p-3 border-b border-slate-700 bg-slate-900/50",children:s("div",{className:"flex items-center justify-between",children:[s("div",{className:"flex items-center gap-3",children:[e("button",{onClick:()=>n(!a),className:"flex items-center justify-center w-8 h-8 bg-blue-600 hover:bg-blue-700 rounded transition-colors",children:a?e("div",{className:"w-2 h-2 bg-white"}):e(h.Play,{className:"w-4 h-4 text-white ml-0.5"})}),e("button",{className:"p-2 text-gray-400 hover:text-white transition-colors",children:e(h.ArrowUturnLeft,{className:"w-4 h-4"})}),s("div",{className:"text-sm text-gray-300",children:["Frame: ",e("span",{className:"text-white font-mono",children:o})]})]}),e("div",{className:"flex items-center gap-3",children:s("div",{className:"flex items-center gap-2",children:[e("span",{className:"text-xs text-gray-400",children:"Speed:"}),s("select",{value:i,onChange:p=>d(Number(p.target.value)),className:"bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded",children:[e("option",{value:.25,children:"0.25x"}),e("option",{value:.5,children:"0.5x"}),e("option",{value:1,children:"1x"}),e("option",{value:2,children:"2x"})]})]})})]})}),e("div",{className:"flex-1 p-3",children:s("div",{className:"bg-slate-900/50 rounded-lg p-3 h-full",children:[s("div",{className:"flex items-center justify-between mb-3",children:[e("h4",{className:"text-sm font-medium text-white",children:(c=Ye.find(p=>p.id===t))==null?void 0:c.name}),s("div",{className:"text-xs text-gray-400",children:["Duration: ",(f=Ye.find(p=>p.id===t))==null?void 0:f.duration]})]}),s("div",{className:"relative",children:[e("div",{className:"h-1 bg-slate-700 rounded-full overflow-hidden",children:e("div",{className:"h-full bg-blue-500",style:{width:`${o/60*100}%`}})}),s("div",{className:"flex justify-between mt-2 text-xs text-gray-400",children:[e("span",{children:"0"}),e("span",{children:"15"}),e("span",{children:"30"}),e("span",{children:"45"}),e("span",{children:"60"})]})]}),s("div",{className:"mt-6",children:[e("h5",{className:"text-xs font-medium text-gray-300 mb-2",children:"Keyframes"}),s("div",{className:"space-y-2",children:[s("div",{className:"flex items-center gap-2 p-2 bg-slate-800/50 rounded",children:[e("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"}),e("span",{className:"text-xs text-gray-300",children:"Transform"}),e("span",{className:"text-xs text-gray-500 ml-auto",children:"Frame 0, 30, 60"})]}),s("div",{className:"flex items-center gap-2 p-2 bg-slate-800/50 rounded",children:[e("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),e("span",{className:"text-xs text-gray-300",children:"Rotation"}),e("span",{className:"text-xs text-gray-500 ml-auto",children:"Frame 15, 45"})]})]})]})]})})]})]})}const Sr=()=>e("div",{className:"absolute inset-0 bg-gray-900",children:s("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",children:[e("defs",{children:e("pattern",{id:"dot-grid",width:"20",height:"20",patternUnits:"userSpaceOnUse",children:e("circle",{cx:"2",cy:"2",r:"1",fill:"#2D3748"})})}),e("rect",{width:"100%",height:"100%",fill:"url(#dot-grid)"})]})}),kr=()=>s("div",{className:"relative w-full h-full overflow-hidden",children:[e(Sr,{}),e("div",{className:"relative z-10 p-4 text-gray-400",children:"Node editor content will go here."})]}),Ie=[{id:"intro",name:"Scene Intro",start:0,duration:5,type:"camera",color:"bg-blue-500"},{id:"dialogue1",name:"Character Dialogue",start:3,duration:8,type:"audio",color:"bg-green-500"},{id:"action1",name:"Action Sequence",start:10,duration:12,type:"animation",color:"bg-red-500"},{id:"transition",name:"Scene Transition",start:20,duration:3,type:"effect",color:"bg-purple-500"},{id:"outro",name:"Scene Outro",start:23,duration:7,type:"camera",color:"bg-blue-500"}];function Mr(){var f,p,x,w;const[t,r]=C(0),[a,n]=C(!1),[o,l]=C(1),[i,d]=C(null),c=30;return s("div",{className:"h-full flex flex-col bg-slate-800",children:[e("div",{className:"p-3 border-b border-slate-700 bg-slate-900/50",children:s("div",{className:"flex items-center justify-between",children:[s("div",{className:"flex items-center gap-3",children:[e("button",{onClick:()=>n(!a),className:"flex items-center justify-center w-8 h-8 bg-blue-600 hover:bg-blue-700 rounded transition-colors",children:a?e("div",{className:"w-2 h-2 bg-white"}):e(h.Play,{className:"w-4 h-4 text-white ml-0.5"})}),e("button",{className:"p-2 text-gray-400 hover:text-white transition-colors",children:e(h.ArrowUturnLeft,{className:"w-4 h-4"})}),s("div",{className:"text-sm text-gray-300 font-mono",children:[Math.floor(t/60),":",(t%60).toString().padStart(2,"0")]})]}),s("div",{className:"flex items-center gap-3",children:[s("div",{className:"flex items-center gap-2",children:[e("span",{className:"text-xs text-gray-400",children:"Zoom:"}),e("input",{type:"range",min:"0.5",max:"3",step:"0.1",value:o,onChange:b=>l(Number(b.target.value)),className:"w-16"}),s("span",{className:"text-xs text-gray-300 w-8",children:[o.toFixed(1),"x"]})]}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:"+ Add Event"})]})]})}),e("div",{className:"flex-1 overflow-auto scrollbar-thin",children:s("div",{className:"p-3",children:[e("div",{className:"relative mb-4",style:{width:`${c*o*20}px`},children:s("div",{className:"h-6 border-b border-slate-600 relative",children:[Array.from({length:c+1},(b,m)=>s("div",{className:"absolute top-0 h-full flex flex-col justify-between",style:{left:`${m*o*20}px`},children:[e("div",{className:"w-px h-2 bg-slate-600"}),s("span",{className:"text-xs text-gray-400 -translate-x-1/2",children:[m,"s"]})]},m)),e("div",{className:"absolute top-0 w-0.5 h-full bg-red-500 z-10",style:{left:`${t*o*20}px`},children:e("div",{className:"w-3 h-3 bg-red-500 -translate-x-1/2 -translate-y-1 rounded-full"})})]})}),e("div",{className:"space-y-2",children:["Camera","Audio","Animation","Effects"].map((b,m)=>s("div",{className:"flex items-center gap-3",children:[e("div",{className:"w-20 text-xs text-gray-300 font-medium",children:b}),e("div",{className:"relative h-8 bg-slate-700/30 rounded border border-slate-600/50 flex-1",style:{width:`${c*o*20}px`},children:Ie.filter(S=>b==="Camera"&&S.type==="camera"||b==="Audio"&&S.type==="audio"||b==="Animation"&&S.type==="animation"||b==="Effects"&&S.type==="effect").map(S=>e("div",{onClick:()=>d(S.id),className:`absolute top-1 h-6 ${S.color} rounded text-white text-xs flex items-center px-2 cursor-pointer transition-all hover:opacity-80 ${i===S.id?"ring-2 ring-white":""}`,style:{left:`${S.start*o*20}px`,width:`${S.duration*o*20}px`,minWidth:"40px"},children:e("span",{className:"truncate",children:S.name})},S.id))})]},b))})]})}),i&&s("div",{className:"border-t border-slate-700 bg-slate-900/50 p-3",children:[s("div",{className:"flex items-center justify-between",children:[e("h4",{className:"text-sm font-medium text-white",children:(f=Ie.find(b=>b.id===i))==null?void 0:f.name}),e("button",{onClick:()=>d(null),className:"text-gray-400 hover:text-white",children:e(h.XMark,{className:"w-4 h-4"})})]}),s("div",{className:"mt-2 grid grid-cols-3 gap-3 text-xs",children:[s("div",{children:[e("span",{className:"text-gray-400",children:"Start:"}),s("span",{className:"text-white ml-1",children:[(p=Ie.find(b=>b.id===i))==null?void 0:p.start,"s"]})]}),s("div",{children:[e("span",{className:"text-gray-400",children:"Duration:"}),s("span",{className:"text-white ml-1",children:[(x=Ie.find(b=>b.id===i))==null?void 0:x.duration,"s"]})]}),s("div",{children:[e("span",{className:"text-gray-400",children:"Type:"}),e("span",{className:"text-white ml-1 capitalize",children:(w=Ie.find(b=>b.id===i))==null?void 0:w.type})]})]})]})]})}const Pr=[{id:1,type:"info",timestamp:"14:32:01",message:"Engine initialized successfully",source:"Core"},{id:2,type:"info",timestamp:"14:32:02",message:"Scene loaded: MainScene.unity",source:"SceneManager"},{id:3,type:"warning",timestamp:"14:32:05",message:"Texture compression quality reduced for mobile",source:"Renderer"},{id:4,type:"info",timestamp:"14:32:08",message:"Player spawned at position (0, 0, 0)",source:"GameManager"},{id:5,type:"error",timestamp:"14:32:12",message:"Failed to load audio file: missing.ogg",source:"AudioManager"},{id:6,type:"info",timestamp:"14:32:15",message:"Physics simulation started",source:"Physics"},{id:7,type:"warning",timestamp:"14:32:18",message:"Memory usage: 78% of allocated heap",source:"Memory"},{id:8,type:"info",timestamp:"14:32:20",message:"Frame rate: 60 FPS (target: 60)",source:"Renderer"}];function Tr(){const[t,r]=C(Pr),[a,n]=C("all"),[o,l]=C(""),[i,d]=C(""),c=ge(null);_(()=>{const m=S=>{const H=new Date().toLocaleTimeString("en-US",{hour12:!1});let v="",j="info";switch(S.type){case"file_added":v=`File added: ${S.path}`,j="info";break;case"file_changed":v=`File modified: ${S.path}`,j="info";break;case"file_deleted":v=`File deleted: ${S.path}`,j="warning";break;case"directory_added":v=`Directory created: ${S.path}`,j="info";break;case"directory_deleted":v=`Directory deleted: ${S.path}`,j="warning";break;case"assets_directory_recreated":v=`Assets directory automatically recreated: ${S.path}`,j="info";break;default:v=`File system change: ${S.path} (${S.type})`,j="info"}const O={id:Date.now()+Math.random(),type:j,timestamp:H,message:v,source:"FileWatcher"};r(z=>[...z,O])};return ae.addFileChangeListener(m),()=>{ae.removeFileChangeListener(m)}},[]);const f=t.filter(m=>{const S=a==="all"||m.type===a,H=m.message.toLowerCase().includes(o.toLowerCase())||m.source.toLowerCase().includes(o.toLowerCase());return S&&H}),p=()=>{if(!i.trim())return;const m={id:t.length+1,type:"command",timestamp:new Date().toLocaleTimeString("en-US",{hour12:!1}),message:`> ${i}`,source:"Console"};r(S=>[...S,m]),d("")},x=()=>{r([])};_(()=>{var m;(m=c.current)==null||m.scrollIntoView({behavior:"smooth"})},[t]);const w=m=>{switch(m){case"error":return e(h.XMark,{className:"w-3 h-3 text-red-400"});case"warning":return e("div",{className:"w-3 h-3 bg-yellow-400 rounded-full"});case"command":return e(h.CommandLine,{className:"w-3 h-3 text-blue-400"});default:return e(h.Circle,{className:"w-3 h-3 text-green-400"})}},b=m=>{switch(m){case"error":return"text-red-300";case"warning":return"text-yellow-300";case"command":return"text-blue-300";default:return"text-gray-300"}};return s("div",{className:"h-full flex flex-col bg-slate-800",children:[e("div",{className:"p-3 border-b border-slate-700 bg-slate-900/50",children:s("div",{className:"flex items-center justify-between",children:[s("div",{className:"flex items-center gap-3",children:[e("h3",{className:"text-sm font-medium text-white",children:"Console"}),e("div",{className:"flex items-center gap-1",children:["all","info","warning","error"].map(m=>s("button",{onClick:()=>n(m),className:`px-2 py-1 text-xs rounded transition-colors ${a===m?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-slate-700"}`,children:[m==="all"?"All":m.charAt(0).toUpperCase()+m.slice(1),m!=="all"&&s("span",{className:"ml-1 text-xs",children:["(",t.filter(S=>S.type===m).length,")"]})]},m))})]}),s("div",{className:"flex items-center gap-2",children:[s("div",{className:"relative",children:[e(h.MagnifyingGlass,{className:"w-3 h-3 absolute left-2 top-1.5 text-gray-400"}),e("input",{type:"text",placeholder:"Search logs...",value:o,onChange:m=>l(m.target.value),className:"pl-6 pr-2 py-1 bg-slate-800 border border-slate-600 rounded text-xs text-white placeholder-gray-400 focus:outline-none focus:border-blue-500 w-32"})]}),e("button",{onClick:x,className:"text-xs text-gray-400 hover:text-white transition-colors",children:"Clear"})]})]})}),e("div",{className:"flex-1 overflow-y-auto scrollbar-thin font-mono",children:s("div",{className:"p-2 space-y-1",children:[f.map(m=>s("div",{className:`flex items-start gap-2 px-2 py-1 text-xs hover:bg-slate-700/30 rounded transition-colors ${b(m.type)}`,children:[e("span",{className:"text-gray-500 shrink-0",children:m.timestamp}),e("div",{className:"shrink-0 mt-0.5",children:w(m.type)}),s("span",{className:"text-gray-400 shrink-0 min-w-[80px]",children:["[",m.source,"]"]}),e("span",{className:"break-all",children:m.message})]},m.id)),e("div",{ref:c})]})}),e("div",{className:"border-t border-slate-700 p-2 bg-slate-900/50",children:s("div",{className:"flex items-center gap-2",children:[e("span",{className:"text-gray-400 text-sm",children:">"}),e("input",{type:"text",value:i,onChange:m=>d(m.target.value),onKeyPress:m=>m.key==="Enter"&&p(),placeholder:"Enter command...",className:"flex-1 bg-transparent text-white text-sm font-mono focus:outline-none placeholder-gray-500"}),e("button",{onClick:p,disabled:!i.trim(),className:"text-xs text-blue-400 hover:text-blue-300 disabled:text-gray-600 disabled:cursor-not-allowed transition-colors",children:"Execute"})]})})]})}const $e=[{id:"pbr-metal",name:"Brushed Metal",type:"PBR",preview:"bg-gradient-to-br from-gray-300 to-gray-600"},{id:"pbr-wood",name:"Oak Wood",type:"PBR",preview:"bg-gradient-to-br from-amber-700 to-amber-900"},{id:"pbr-concrete",name:"Concrete",type:"PBR",preview:"bg-gradient-to-br from-gray-400 to-gray-700"},{id:"pbr-fabric",name:"Canvas Fabric",type:"PBR",preview:"bg-gradient-to-br from-yellow-100 to-yellow-300"},{id:"unlit-glow",name:"Neon Glow",type:"Unlit",preview:"bg-gradient-to-br from-blue-400 to-purple-600"},{id:"transparent-glass",name:"Clear Glass",type:"Transparent",preview:"bg-gradient-to-br from-blue-100 to-blue-200"}],ht=[{id:"all",label:"All Materials",count:$e.length},{id:"PBR",label:"PBR Materials",count:$e.filter(t=>t.type==="PBR").length},{id:"Unlit",label:"Unlit Materials",count:$e.filter(t=>t.type==="Unlit").length},{id:"Transparent",label:"Transparent",count:$e.filter(t=>t.type==="Transparent").length}];function Lr(){var d;const[t,r]=C("all"),[a,n]=C(null),[o,l]=C(""),i=$e.filter(c=>{const f=t==="all"||c.type===t,p=c.name.toLowerCase().includes(o.toLowerCase());return f&&p});return s("div",{className:"h-full flex bg-slate-800",children:[s("div",{className:"w-48 bg-slate-900 border-r border-slate-700 flex flex-col",children:[e("div",{className:"p-3 border-b border-slate-700",children:s("div",{className:"relative",children:[e(h.MagnifyingGlass,{className:"w-3 h-3 absolute left-2 top-1.5 text-gray-400"}),e("input",{type:"text",placeholder:"Search materials...",value:o,onChange:c=>l(c.target.value),className:"w-full pl-6 pr-2 py-1 bg-slate-800 border border-slate-600 rounded text-xs text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"})]})}),e("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:e("div",{className:"space-y-1 p-2",children:ht.map(c=>s("button",{onClick:()=>r(c.id),className:`w-full flex items-center justify-between px-2 py-2 text-left text-xs rounded hover:bg-slate-800 transition-colors ${t===c.id?"bg-blue-600 text-white":"text-gray-300 hover:text-white"}`,children:[e("span",{children:c.label}),e("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${t===c.id?"text-white bg-blue-500":"text-gray-400 bg-slate-700"}`,children:c.count})]},c.id))})})]}),s("div",{className:"flex-1 flex flex-col",children:[e("div",{className:"p-3 border-b border-slate-700 bg-slate-900/50",children:s("div",{className:"flex items-center justify-between",children:[e("h3",{className:"text-sm font-medium text-white",children:((d=ht.find(c=>c.id===t))==null?void 0:d.label)||"Materials"}),s("div",{className:"flex items-center gap-2",children:[s("span",{className:"text-xs text-gray-400",children:[i.length," materials"]}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:"+ Import Material"})]})]})}),s("div",{className:"flex-1 overflow-y-auto scrollbar-thin p-3",children:[e("div",{className:"grid grid-cols-3 gap-3",children:i.map(c=>s("div",{onClick:()=>n(c.id),className:`group cursor-pointer rounded-lg overflow-hidden border transition-all ${a===c.id?"border-blue-500 ring-2 ring-blue-500/30":"border-slate-600 hover:border-slate-500"}`,children:[s("div",{className:`h-20 ${c.preview} relative`,children:[e("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent"}),e("div",{className:"absolute top-2 right-2",children:e("span",{className:"text-xs bg-black/70 text-white px-1.5 py-0.5 rounded",children:c.type})})]}),e("div",{className:"p-2 bg-slate-900/50",children:e("div",{className:"text-xs font-medium text-white group-hover:text-blue-200 transition-colors",children:c.name})})]},c.id))}),i.length===0&&o&&e("div",{className:"text-center text-gray-500 mt-12",children:s("p",{className:"text-sm",children:['No materials found matching "',o,'"']})})]})]}),a&&s("div",{className:"w-64 bg-slate-900 border-l border-slate-700 flex flex-col",children:[e("div",{className:"p-3 border-b border-slate-700",children:s("div",{className:"flex items-center justify-between",children:[e("h4",{className:"text-sm font-medium text-white",children:"Material Properties"}),e("button",{onClick:()=>n(null),className:"text-gray-400 hover:text-white",children:e(h.XMark,{className:"w-4 h-4"})})]})}),s("div",{className:"flex-1 overflow-y-auto scrollbar-thin p-3 space-y-4",children:[s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Albedo"}),s("div",{className:"flex items-center gap-2",children:[e("div",{className:"w-8 h-8 bg-white border border-slate-600 rounded cursor-pointer"}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300",children:"Browse"})]})]}),s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Metallic"}),e("input",{type:"range",min:"0",max:"1",step:"0.01",defaultValue:"0.5",className:"w-full"})]}),s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Roughness"}),e("input",{type:"range",min:"0",max:"1",step:"0.01",defaultValue:"0.5",className:"w-full"})]}),s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Normal Map"}),s("div",{className:"flex items-center gap-2",children:[e("div",{className:"w-8 h-8 bg-blue-300 border border-slate-600 rounded cursor-pointer"}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300",children:"Browse"})]})]}),s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Emission"}),s("div",{className:"flex items-center gap-2",children:[e("div",{className:"w-8 h-8 bg-black border border-slate-600 rounded cursor-pointer"}),e("input",{type:"range",min:"0",max:"2",step:"0.1",defaultValue:"0",className:"flex-1"})]})]})]}),e("div",{className:"p-3 border-t border-slate-700",children:e("button",{className:"w-full bg-blue-600 hover:bg-blue-700 text-white text-xs py-2 rounded transition-colors",children:"Apply to Selection"})})]})]})}const jr=[{id:"grass",name:"Grass",texture:"grass_diffuse.jpg",active:!0},{id:"dirt",name:"Dirt Path",texture:"dirt_diffuse.jpg",active:!0},{id:"rock",name:"Rocky Stone",texture:"rock_diffuse.jpg",active:!0},{id:"sand",name:"Beach Sand",texture:"sand_diffuse.jpg",active:!1}],Er=[{id:"height",name:"Height",icon:h.AdjustmentsVertical,active:!0},{id:"smooth",name:"Smooth",icon:h.AdjustmentsHorizontal,active:!1},{id:"texture",name:"Paint Texture",icon:h.PaintBrush,active:!1},{id:"details",name:"Place Details",icon:h.Sparkles,active:!1}];function Ar(){const[t,r]=C("height"),[a,n]=C(15),[o,l]=C(.5),[i,d]=C("grass");return s("div",{className:"h-full flex bg-slate-800",children:[s("div",{className:"w-56 bg-slate-900 border-r border-slate-700 flex flex-col",children:[s("div",{className:"p-3 border-b border-slate-700",children:[e("h3",{className:"text-sm font-medium text-white mb-3",children:"Terrain Tools"}),e("div",{className:"grid grid-cols-2 gap-2",children:Er.map(c=>s("button",{onClick:()=>r(c.id),className:`flex flex-col items-center p-2 rounded text-xs transition-colors ${t===c.id?"bg-blue-600 text-white":"text-gray-400 hover:text-white hover:bg-slate-800"}`,children:[e(c.icon,{className:"w-5 h-5 mb-1"}),c.name]},c.id))})]}),s("div",{className:"p-3 border-b border-slate-700",children:[e("h4",{className:"text-xs font-medium text-gray-300 mb-2",children:"Brush Settings"}),s("div",{className:"space-y-3",children:[s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs text-gray-400",children:"Size"}),e("span",{className:"text-xs text-white",children:a})]}),e("input",{type:"range",min:"1",max:"50",value:a,onChange:c=>n(Number(c.target.value)),className:"w-full"})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs text-gray-400",children:"Strength"}),s("span",{className:"text-xs text-white",children:[(o*100).toFixed(0),"%"]})]}),e("input",{type:"range",min:"0",max:"1",step:"0.01",value:o,onChange:c=>l(Number(c.target.value)),className:"w-full"})]}),s("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"falloff",className:"text-blue-600"}),e("label",{htmlFor:"falloff",className:"text-xs text-gray-300",children:"Smooth Falloff"})]})]})]}),t==="texture"&&e("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:s("div",{className:"p-3",children:[s("div",{className:"flex items-center justify-between mb-2",children:[e("h4",{className:"text-xs font-medium text-gray-300",children:"Texture Layers"}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300",children:"+ Add"})]}),e("div",{className:"space-y-2",children:jr.map(c=>s("div",{onClick:()=>d(c.id),className:`flex items-center gap-2 p-2 rounded cursor-pointer transition-colors ${i===c.id?"bg-blue-600 text-white":"text-gray-300 hover:bg-slate-800 hover:text-white"}`,children:[e("div",{className:`w-3 h-3 rounded border-2 ${c.active?"bg-green-500 border-green-500":"border-gray-500"}`}),e("div",{className:"w-8 h-8 bg-gradient-to-br from-green-600 to-green-800 rounded border border-slate-600"}),s("div",{className:"flex-1",children:[e("div",{className:"text-xs font-medium",children:c.name}),e("div",{className:"text-xs text-gray-400",children:c.texture})]})]},c.id))})]})})]}),s("div",{className:"flex-1 flex flex-col",children:[e("div",{className:"p-3 border-b border-slate-700 bg-slate-900/50",children:s("div",{className:"flex items-center justify-between",children:[e("h3",{className:"text-sm font-medium text-white",children:"Terrain Properties"}),s("div",{className:"flex items-center gap-2",children:[e("button",{className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:"Generate Terrain"}),e("button",{className:"text-xs text-red-400 hover:text-red-300 transition-colors",children:"Clear All"})]})]})}),s("div",{className:"flex-1 overflow-y-auto scrollbar-thin p-3",children:[s("div",{className:"grid grid-cols-2 gap-6",children:[s("div",{className:"space-y-4",children:[e("h4",{className:"text-sm font-medium text-white",children:"Heightmap"}),s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Resolution"}),s("select",{className:"w-full bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded",children:[e("option",{children:"512x512"}),e("option",{children:"1024x1024"}),e("option",{children:"2048x2048"})]})]}),s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Height Scale"}),e("input",{type:"number",defaultValue:"100",className:"w-full bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"})]}),s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Import Heightmap"}),s("div",{className:"flex gap-2",children:[e("input",{type:"file",accept:"image/*",className:"hidden",id:"heightmap-upload"}),e("label",{htmlFor:"heightmap-upload",className:"flex-1 bg-slate-800 border border-slate-600 text-gray-400 text-xs p-1 rounded cursor-pointer hover:border-slate-500",children:"Choose file..."}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300",children:"Browse"})]})]})]}),s("div",{className:"space-y-4",children:[e("h4",{className:"text-sm font-medium text-white",children:"Procedural Generation"}),s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Noise Type"}),s("select",{className:"w-full bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded",children:[e("option",{children:"Perlin Noise"}),e("option",{children:"Simplex Noise"}),e("option",{children:"Ridged Noise"})]})]}),s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Octaves"}),e("input",{type:"range",min:"1",max:"8",defaultValue:"4",className:"w-full"})]}),s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Frequency"}),e("input",{type:"range",min:"0.001",max:"0.1",step:"0.001",defaultValue:"0.01",className:"w-full"})]}),s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Amplitude"}),e("input",{type:"range",min:"0.1",max:"2",step:"0.1",defaultValue:"1",className:"w-full"})]}),e("button",{className:"w-full bg-green-600 hover:bg-green-700 text-white text-xs py-2 rounded transition-colors",children:"Generate Terrain"})]})]}),s("div",{className:"mt-6 p-3 bg-slate-900/50 rounded-lg",children:[e("h4",{className:"text-sm font-medium text-white mb-2",children:"Terrain Statistics"}),s("div",{className:"grid grid-cols-3 gap-4 text-xs",children:[s("div",{children:[e("span",{className:"text-gray-400",children:"Vertices:"}),e("span",{className:"text-white ml-1",children:"262,144"})]}),s("div",{children:[e("span",{className:"text-gray-400",children:"Triangles:"}),e("span",{className:"text-white ml-1",children:"524,288"})]}),s("div",{children:[e("span",{className:"text-gray-400",children:"Size:"}),e("span",{className:"text-white ml-1",children:"1000x1000m"})]})]})]})]})]})]})}const Dr=[{id:"directional",name:"Directional Light",icon:h.Sun,description:"Sun-like infinite light"},{id:"point",name:"Point Light",icon:h.LightBulb,description:"Omnidirectional light source"},{id:"spot",name:"Spot Light",icon:h.Flashlight,description:"Cone-shaped light beam"},{id:"area",name:"Area Light",icon:h.Square,description:"Rectangular light source"}],mt=[{id:"sun",name:"Main Sun",type:"directional",intensity:1,color:"#ffffff",enabled:!0},{id:"fill",name:"Fill Light",type:"directional",intensity:.3,color:"#87ceeb",enabled:!0},{id:"street1",name:"Street Lamp 1",type:"point",intensity:2,color:"#ffaa44",enabled:!0},{id:"street2",name:"Street Lamp 2",type:"point",intensity:2,color:"#ffaa44",enabled:!1},{id:"spotlight1",name:"Security Light",type:"spot",intensity:5,color:"#ffffff",enabled:!0}];function Fr(){const[t,r]=C("sun"),[a,n]=C("realtime"),[o,l]=C(!0),i=mt.find(d=>d.id===t);return s("div",{className:"h-full flex bg-slate-800",children:[s("div",{className:"w-64 bg-slate-900 border-r border-slate-700 flex flex-col",children:[s("div",{className:"p-3 border-b border-slate-700",children:[s("div",{className:"flex items-center justify-between mb-3",children:[e("h3",{className:"text-sm font-medium text-white",children:"Scene Lights"}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300",children:"+ Add Light"})]}),e("div",{className:"grid grid-cols-2 gap-1 mb-3",children:Dr.map(d=>s("button",{className:"flex flex-col items-center p-2 bg-slate-800 hover:bg-slate-700 rounded text-xs text-gray-300 hover:text-white transition-colors",title:d.description,children:[e(d.icon,{className:"w-4 h-4 mb-1"}),d.name.split(" ")[0]]},d.id))})]}),e("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:e("div",{className:"space-y-1 p-2",children:mt.map(d=>s("div",{onClick:()=>r(d.id),className:`flex items-center gap-2 p-2 rounded cursor-pointer transition-colors ${t===d.id?"bg-blue-600 text-white":"text-gray-300 hover:bg-slate-800 hover:text-white"}`,children:[e("div",{className:`w-3 h-3 rounded border-2 ${d.enabled?"bg-yellow-500 border-yellow-500":"border-gray-500"}`}),s("div",{className:"flex-1",children:[e("div",{className:"text-sm font-medium",children:d.name}),e("div",{className:"text-xs text-gray-400 capitalize",children:d.type})]}),e("div",{className:"w-4 h-4 rounded border border-gray-600",style:{backgroundColor:d.color}})]},d.id))})})]}),s("div",{className:"flex-1 flex flex-col",children:[e("div",{className:"p-3 border-b border-slate-700 bg-slate-900/50",children:s("div",{className:"flex items-center justify-between",children:[e("h3",{className:"text-sm font-medium text-white",children:i?`${i.name} Properties`:"Lighting Properties"}),e("div",{className:"flex items-center gap-2",children:s("select",{value:a,onChange:d=>n(d.target.value),className:"bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded",children:[e("option",{value:"realtime",children:"Realtime"}),e("option",{value:"baked",children:"Baked"}),e("option",{value:"mixed",children:"Mixed"})]})})]})}),s("div",{className:"flex-1 overflow-y-auto scrollbar-thin p-3",children:[i?s("div",{className:"space-y-6",children:[s("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Basic Properties"}),s("div",{className:"space-y-3",children:[s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Light Type"}),s("select",{className:"w-full bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded",children:[e("option",{value:"directional",children:"Directional"}),e("option",{value:"point",children:"Point"}),e("option",{value:"spot",children:"Spot"}),e("option",{value:"area",children:"Area"})]})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Intensity"}),e("span",{className:"text-xs text-white",children:i.intensity})]}),e("input",{type:"range",min:"0",max:"10",step:"0.1",defaultValue:i.intensity,className:"w-full"})]}),s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Color"}),s("div",{className:"flex items-center gap-2",children:[e("input",{type:"color",defaultValue:i.color,className:"w-8 h-8 border border-slate-600 rounded cursor-pointer"}),e("input",{type:"text",defaultValue:i.color,className:"flex-1 bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"})]})]})]})]}),s("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Shadows"}),s("div",{className:"space-y-3",children:[s("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"cast-shadows",defaultChecked:!0,className:"text-blue-600"}),e("label",{htmlFor:"cast-shadows",className:"text-xs text-gray-300",children:"Cast Shadows"})]}),s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Shadow Resolution"}),s("select",{className:"w-full bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded",children:[e("option",{children:"512"}),e("option",{children:"1024"}),e("option",{children:"2048"}),e("option",{children:"4096"})]})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Shadow Bias"}),e("span",{className:"text-xs text-white",children:"0.001"})]}),e("input",{type:"range",min:"0",max:"0.01",step:"0.0001",defaultValue:"0.001",className:"w-full"})]})]})]}),i.type==="spot"&&s("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Spot Light"}),s("div",{className:"space-y-3",children:[s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Spot Angle"}),e("span",{className:"text-xs text-white",children:"30¬∞"})]}),e("input",{type:"range",min:"1",max:"179",defaultValue:"30",className:"w-full"})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Inner Cone"}),e("span",{className:"text-xs text-white",children:"25¬∞"})]}),e("input",{type:"range",min:"0",max:"30",defaultValue:"25",className:"w-full"})]})]})]})]}):e("div",{className:"text-center text-gray-500 mt-12",children:e("p",{className:"text-sm",children:"Select a light to edit its properties"})}),s("div",{className:"mt-6 p-3 bg-slate-900/50 rounded-lg",children:[s("div",{className:"flex items-center justify-between mb-3",children:[e("h4",{className:"text-sm font-medium text-white",children:"Environment"}),s("label",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",checked:o,onChange:d=>l(d.target.checked),className:"text-blue-600"}),e("span",{className:"text-xs text-gray-300",children:"Enable"})]})]}),o&&s("div",{className:"space-y-3",children:[s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Sky Material"}),s("select",{className:"w-full bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded",children:[e("option",{children:"Procedural Sky"}),e("option",{children:"HDRI Skybox"}),e("option",{children:"Gradient Sky"})]})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Ambient Intensity"}),e("span",{className:"text-xs text-white",children:"0.2"})]}),e("input",{type:"range",min:"0",max:"2",step:"0.1",defaultValue:"0.2",className:"w-full"})]})]})]})]})]})]})}const gt=[{id:"player",name:"Player Character",type:"rigidbody",mass:70,enabled:!0},{id:"crate1",name:"Wooden Crate",type:"rigidbody",mass:15,enabled:!0},{id:"floor",name:"Ground Plane",type:"static",mass:0,enabled:!0},{id:"platform",name:"Moving Platform",type:"kinematic",mass:50,enabled:!0},{id:"trigger1",name:"Door Trigger",type:"trigger",mass:0,enabled:!0}],Br=[{id:"box",name:"Box Collider",icon:h.Square},{id:"sphere",name:"Sphere Collider",icon:h.Circle},{id:"capsule",name:"Capsule Collider",icon:h.Capsule},{id:"mesh",name:"Mesh Collider",icon:h.Mesh}],Rr=[{id:"default",name:"Default",friction:.6,restitution:0},{id:"ice",name:"Ice",friction:.05,restitution:.1},{id:"rubber",name:"Rubber",friction:.8,restitution:.9},{id:"metal",name:"Metal",friction:.3,restitution:.2}];function Or(){const[t,r]=C("player"),[a,n]=C(!1),[o,l]=C("box"),[i,d]=C(60),c=gt.find(f=>f.id===t);return s("div",{className:"h-full flex bg-slate-800",children:[s("div",{className:"w-64 bg-slate-900 border-r border-slate-700 flex flex-col",children:[s("div",{className:"p-3 border-b border-slate-700",children:[s("div",{className:"flex items-center justify-between mb-3",children:[e("h3",{className:"text-sm font-medium text-white",children:"Physics Objects"}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300",children:"+ Add"})]}),s("div",{className:"flex items-center gap-2 mb-3",children:[e("button",{onClick:()=>n(!a),className:`flex items-center gap-1 px-2 py-1 text-xs rounded transition-colors ${a?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:a?s(we,{children:[e("div",{className:"w-2 h-2 bg-white"}),"Stop"]}):s(we,{children:[e(h.Play,{className:"w-3 h-3"}),"Play"]})}),e("button",{className:"px-2 py-1 bg-slate-700 hover:bg-slate-600 text-white text-xs rounded transition-colors",children:"Reset"})]})]}),e("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:e("div",{className:"space-y-1 p-2",children:gt.map(f=>s("div",{onClick:()=>r(f.id),className:`flex items-center gap-2 p-2 rounded cursor-pointer transition-colors ${t===f.id?"bg-blue-600 text-white":"text-gray-300 hover:bg-slate-800 hover:text-white"}`,children:[e("div",{className:`w-3 h-3 rounded border-2 ${f.enabled?"bg-green-500 border-green-500":"border-gray-500"}`}),s("div",{className:"flex-1",children:[e("div",{className:"text-sm font-medium",children:f.name}),s("div",{className:"text-xs text-gray-400 capitalize",children:[f.type," ",f.mass>0&&`‚Ä¢ ${f.mass}kg`]})]}),e("div",{className:`w-2 h-2 rounded-full ${f.type==="rigidbody"?"bg-red-400":f.type==="kinematic"?"bg-yellow-400":f.type==="trigger"?"bg-purple-400":"bg-gray-400"}`})]},f.id))})})]}),s("div",{className:"flex-1 flex flex-col",children:[e("div",{className:"p-3 border-b border-slate-700 bg-slate-900/50",children:s("div",{className:"flex items-center justify-between",children:[e("h3",{className:"text-sm font-medium text-white",children:c?`${c.name} Properties`:"Physics Properties"}),s("div",{className:"flex items-center gap-2",children:[e("span",{className:"text-xs text-gray-400",children:"Step Rate:"}),s("select",{value:i,onChange:f=>d(Number(f.target.value)),className:"bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded",children:[e("option",{value:30,children:"30 Hz"}),e("option",{value:60,children:"60 Hz"}),e("option",{value:120,children:"120 Hz"})]})]})]})}),s("div",{className:"flex-1 overflow-y-auto scrollbar-thin p-3",children:[c?s("div",{className:"space-y-6",children:[s("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Rigidbody"}),s("div",{className:"space-y-3",children:[s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Body Type"}),s("select",{className:"w-full bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded",children:[e("option",{value:"rigidbody",children:"Dynamic"}),e("option",{value:"kinematic",children:"Kinematic"}),e("option",{value:"static",children:"Static"}),e("option",{value:"trigger",children:"Trigger"})]})]}),s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Mass (kg)"}),e("input",{type:"number",defaultValue:c.mass,min:"0.1",step:"0.1",className:"w-full bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Linear Drag"}),e("span",{className:"text-xs text-white",children:"0.1"})]}),e("input",{type:"range",min:"0",max:"10",step:"0.1",defaultValue:"0.1",className:"w-full"})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Angular Drag"}),e("span",{className:"text-xs text-white",children:"0.05"})]}),e("input",{type:"range",min:"0",max:"10",step:"0.01",defaultValue:"0.05",className:"w-full"})]}),s("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"gravity",defaultChecked:!0,className:"text-blue-600"}),e("label",{htmlFor:"gravity",className:"text-xs text-gray-300",children:"Use Gravity"})]}),s("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"freeze-rotation",className:"text-blue-600"}),e("label",{htmlFor:"freeze-rotation",className:"text-xs text-gray-300",children:"Freeze Rotation"})]})]})]}),s("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Collider"}),s("div",{className:"space-y-3",children:[s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Collider Type"}),e("div",{className:"grid grid-cols-2 gap-2",children:Br.map(f=>s("button",{onClick:()=>l(f.id),className:`flex items-center gap-2 p-2 rounded text-xs transition-colors ${o===f.id?"bg-blue-600 text-white":"bg-slate-800 text-gray-300 hover:bg-slate-700 hover:text-white"}`,children:[e(f.icon,{className:"w-3 h-3"}),f.name.split(" ")[0]]},f.id))})]}),s("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"is-trigger",className:"text-blue-600"}),e("label",{htmlFor:"is-trigger",className:"text-xs text-gray-300",children:"Is Trigger"})]}),s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Size"}),s("div",{className:"grid grid-cols-3 gap-2",children:[e("input",{type:"number",placeholder:"X",defaultValue:"1",step:"0.1",className:"bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"}),e("input",{type:"number",placeholder:"Y",defaultValue:"1",step:"0.1",className:"bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"}),e("input",{type:"number",placeholder:"Z",defaultValue:"1",step:"0.1",className:"bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"})]})]})]})]}),s("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Physics Material"}),s("div",{className:"space-y-3",children:[s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Material Preset"}),e("select",{className:"w-full bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded",children:Rr.map(f=>e("option",{value:f.id,children:f.name},f.id))})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Friction"}),e("span",{className:"text-xs text-white",children:"0.6"})]}),e("input",{type:"range",min:"0",max:"1",step:"0.01",defaultValue:"0.6",className:"w-full"})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Bounciness"}),e("span",{className:"text-xs text-white",children:"0.0"})]}),e("input",{type:"range",min:"0",max:"1",step:"0.01",defaultValue:"0",className:"w-full"})]})]})]})]}):e("div",{className:"text-center text-gray-500 mt-12",children:e("p",{className:"text-sm",children:"Select a physics object to edit its properties"})}),s("div",{className:"mt-6 p-3 bg-slate-900/50 rounded-lg",children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"World Settings"}),s("div",{className:"space-y-3",children:[s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Gravity"}),s("div",{className:"grid grid-cols-3 gap-2",children:[e("input",{type:"number",placeholder:"X",defaultValue:"0",className:"bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"}),e("input",{type:"number",placeholder:"Y",defaultValue:"-9.81",className:"bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"}),e("input",{type:"number",placeholder:"Z",defaultValue:"0",className:"bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"})]})]}),s("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"auto-sleep",defaultChecked:!0,className:"text-blue-600"}),e("label",{htmlFor:"auto-sleep",className:"text-xs text-gray-300",children:"Auto Sleep Objects"})]})]})]})]})]})]})}const Ae=[{id:"bgm",name:"Background Music",type:"music",file:"ambient_forest.ogg",playing:!0,volume:.6,loop:!0},{id:"footsteps",name:"Player Footsteps",type:"sfx",file:"footstep_grass.wav",playing:!1,volume:.8,loop:!1},{id:"wind",name:"Wind Ambience",type:"ambient",file:"wind_loop.ogg",playing:!0,volume:.3,loop:!0},{id:"ui-click",name:"UI Click Sound",type:"ui",file:"click_01.wav",playing:!1,volume:1,loop:!1},{id:"door-open",name:"Door Opening",type:"sfx",file:"door_creak.wav",playing:!1,volume:.7,loop:!1}],pt=[{id:"all",label:"All Audio",count:Ae.length},{id:"music",label:"Music",count:Ae.filter(t=>t.type==="music").length},{id:"sfx",label:"Sound Effects",count:Ae.filter(t=>t.type==="sfx").length},{id:"ambient",label:"Ambient",count:Ae.filter(t=>t.type==="ambient").length},{id:"ui",label:"UI Sounds",count:Ae.filter(t=>t.type==="ui").length}];function zr(){var p;const[t,r]=C("all"),[a,n]=C("bgm"),[o,l]=C(.8),[i,d]=C(""),c=Ae.filter(x=>{const w=t==="all"||x.type===t,b=x.name.toLowerCase().includes(i.toLowerCase());return w&&b}),f=Ae.find(x=>x.id===a);return s("div",{className:"h-full flex bg-slate-800",children:[s("div",{className:"w-48 bg-slate-900 border-r border-slate-700 flex flex-col",children:[s("div",{className:"p-3 border-b border-slate-700",children:[s("div",{className:"relative mb-3",children:[e(h.MagnifyingGlass,{className:"w-3 h-3 absolute left-2 top-1.5 text-gray-400"}),e("input",{type:"text",placeholder:"Search audio...",value:i,onChange:x=>d(x.target.value),className:"w-full pl-6 pr-2 py-1 bg-slate-800 border border-slate-600 rounded text-xs text-white placeholder-gray-400 focus:outline-none focus:border-blue-500"})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Master Volume"}),s("span",{className:"text-xs text-white",children:[Math.round(o*100),"%"]})]}),e("input",{type:"range",min:"0",max:"1",step:"0.01",value:o,onChange:x=>l(Number(x.target.value)),className:"w-full"})]})]}),e("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:e("div",{className:"space-y-1 p-2",children:pt.map(x=>s("button",{onClick:()=>r(x.id),className:`w-full flex items-center justify-between px-2 py-2 text-left text-xs rounded hover:bg-slate-800 transition-colors ${t===x.id?"bg-blue-600 text-white":"text-gray-300 hover:text-white"}`,children:[e("span",{children:x.label}),e("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${t===x.id?"text-white bg-blue-500":"text-gray-400 bg-slate-700"}`,children:x.count})]},x.id))})})]}),s("div",{className:"w-80 border-r border-slate-700 flex flex-col",children:[e("div",{className:"p-3 border-b border-slate-700 bg-slate-900/50",children:s("div",{className:"flex items-center justify-between",children:[e("h3",{className:"text-sm font-medium text-white",children:((p=pt.find(x=>x.id===t))==null?void 0:p.label)||"Audio Sources"}),s("div",{className:"flex items-center gap-2",children:[s("span",{className:"text-xs text-gray-400",children:[c.length," files"]}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:"+ Import"})]})]})}),s("div",{className:"flex-1 overflow-y-auto scrollbar-thin p-2",children:[e("div",{className:"space-y-2",children:c.map(x=>s("div",{onClick:()=>n(x.id),className:`p-3 rounded-lg border cursor-pointer transition-all group ${a===x.id?"border-blue-500 bg-blue-600/10":"border-slate-600/50 bg-slate-700/30 hover:border-slate-500 hover:bg-slate-700/50"}`,children:[s("div",{className:"flex items-center justify-between mb-2",children:[s("div",{className:"flex items-center gap-2",children:[e("div",{className:`w-2 h-2 rounded-full ${x.playing?"bg-green-500 animate-pulse":"bg-gray-500"}`}),e("span",{className:"text-sm font-medium text-white",children:x.name})]}),s("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e("button",{className:"p-1 hover:bg-slate-600 rounded text-gray-400 hover:text-white",children:e(h.Play,{className:"w-3 h-3"})}),e("button",{className:"p-1 hover:bg-slate-600 rounded text-gray-400 hover:text-white",children:e(h.Pencil,{className:"w-3 h-3"})})]})]}),s("div",{className:"text-xs text-gray-400 mb-2",children:[x.file," ‚Ä¢ ",x.type]}),s("div",{className:"flex items-center gap-2",children:[e("div",{className:"flex-1 h-1 bg-slate-600 rounded-full overflow-hidden",children:e("div",{className:"h-full bg-blue-500",style:{width:`${x.volume*100}%`}})}),s("span",{className:"text-xs text-gray-400 w-8",children:[Math.round(x.volume*100),"%"]})]})]},x.id))}),c.length===0&&i&&e("div",{className:"text-center text-gray-500 mt-12",children:s("p",{className:"text-sm",children:['No audio files found matching "',i,'"']})})]})]}),s("div",{className:"flex-1 flex flex-col",children:[e("div",{className:"p-3 border-b border-slate-700 bg-slate-900/50",children:s("div",{className:"flex items-center justify-between",children:[e("h3",{className:"text-sm font-medium text-white",children:f?`${f.name} Properties`:"Audio Properties"}),s("div",{className:"flex items-center gap-2",children:[e("button",{className:"p-1.5 hover:bg-slate-800 rounded text-gray-400 hover:text-green-400 transition-colors",children:e(h.Play,{className:"w-4 h-4"})}),e("button",{className:"p-1.5 hover:bg-slate-800 rounded text-gray-400 hover:text-red-400 transition-colors",children:e("div",{className:"w-4 h-4 bg-current"})})]})]})}),s("div",{className:"flex-1 overflow-y-auto scrollbar-thin p-3",children:[f?s("div",{className:"space-y-6",children:[s("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Basic Properties"}),s("div",{className:"space-y-3",children:[s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Audio Clip"}),s("div",{className:"flex items-center gap-2",children:[e("input",{type:"text",value:f.file,readOnly:!0,className:"flex-1 bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300",children:"Browse"})]})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Volume"}),s("span",{className:"text-xs text-white",children:[Math.round(f.volume*100),"%"]})]}),e("input",{type:"range",min:"0",max:"1",step:"0.01",defaultValue:f.volume,className:"w-full"})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Pitch"}),e("span",{className:"text-xs text-white",children:"1.0"})]}),e("input",{type:"range",min:"0.1",max:"3",step:"0.1",defaultValue:"1",className:"w-full"})]}),s("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"loop",defaultChecked:f.loop,className:"text-blue-600"}),e("label",{htmlFor:"loop",className:"text-xs text-gray-300",children:"Loop"})]}),s("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"play-on-awake",defaultChecked:f.playing,className:"text-blue-600"}),e("label",{htmlFor:"play-on-awake",className:"text-xs text-gray-300",children:"Play on Awake"})]})]})]}),s("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"3D Sound Settings"}),s("div",{className:"space-y-3",children:[s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Spatial Blend"}),e("input",{type:"range",min:"0",max:"1",step:"0.01",defaultValue:"1",className:"w-full"}),s("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e("span",{children:"2D"}),e("span",{children:"3D"})]})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Doppler Level"}),e("span",{className:"text-xs text-white",children:"1.0"})]}),e("input",{type:"range",min:"0",max:"5",step:"0.1",defaultValue:"1",className:"w-full"})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Min Distance"}),e("span",{className:"text-xs text-white",children:"1m"})]}),e("input",{type:"range",min:"0.1",max:"100",step:"0.1",defaultValue:"1",className:"w-full"})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Max Distance"}),e("span",{className:"text-xs text-white",children:"500m"})]}),e("input",{type:"range",min:"1",max:"1000",step:"1",defaultValue:"500",className:"w-full"})]}),s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Volume Rolloff"}),s("select",{className:"w-full bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded",children:[e("option",{children:"Logarithmic Rolloff"}),e("option",{children:"Linear Rolloff"}),e("option",{children:"Custom Rolloff"})]})]})]})]}),s("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Audio Effects"}),s("div",{className:"space-y-3",children:[s("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-xs text-gray-300",children:"Reverb Zone"}),e("input",{type:"checkbox",className:"text-blue-600"})]}),s("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-xs text-gray-300",children:"Low Pass Filter"}),e("input",{type:"checkbox",className:"text-blue-600"})]}),s("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-xs text-gray-300",children:"High Pass Filter"}),e("input",{type:"checkbox",className:"text-blue-600"})]}),s("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-xs text-gray-300",children:"Distortion"}),e("input",{type:"checkbox",className:"text-blue-600"})]})]})]})]}):e("div",{className:"text-center text-gray-500 mt-12",children:e("p",{className:"text-sm",children:"Select an audio source to edit its properties"})}),s("div",{className:"mt-6 p-3 bg-slate-900/50 rounded-lg",children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Audio Mixer Groups"}),s("div",{className:"space-y-2",children:[s("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-xs text-gray-300",children:"Master"}),e("span",{className:"text-xs text-white",children:"0 dB"})]}),s("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-xs text-gray-300",children:"Music"}),e("span",{className:"text-xs text-white",children:"-6 dB"})]}),s("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-xs text-gray-300",children:"SFX"}),e("span",{className:"text-xs text-white",children:"-3 dB"})]}),s("div",{className:"flex items-center justify-between",children:[e("span",{className:"text-xs text-gray-300",children:"Voice"}),e("span",{className:"text-xs text-white",children:"0 dB"})]})]})]})]})]})]})}const Ir=[{id:"particle",name:"Particle System",icon:h.Sparkles,description:"Fire, smoke, magic effects"},{id:"post-processing",name:"Post Processing",icon:h.AdjustmentsHorizontal,description:"Color grading, bloom, etc."},{id:"lighting",name:"Lighting Effects",icon:h.LightBulb,description:"Volumetric fog, god rays"},{id:"water",name:"Water Effects",icon:h.Water,description:"Rivers, oceans, waterfalls"}],Je=[{id:"fire1",name:"Campfire",type:"particle",enabled:!0,intensity:.8},{id:"smoke1",name:"Chimney Smoke",type:"particle",enabled:!0,intensity:.6},{id:"bloom",name:"Screen Bloom",type:"post-processing",enabled:!0,intensity:.4},{id:"fog",name:"Volumetric Fog",type:"lighting",enabled:!1,intensity:.3},{id:"water1",name:"Lake Surface",type:"water",enabled:!0,intensity:.7},{id:"rain",name:"Rain Particles",type:"particle",enabled:!1,intensity:1}],$r=[{id:"fire",name:"Fire",color:"#ff4400",icon:"üî•"},{id:"smoke",name:"Smoke",color:"#666666",icon:"üí®"},{id:"sparks",name:"Sparks",color:"#ffaa00",icon:"‚ú®"},{id:"snow",name:"Snow",color:"#ffffff",icon:"‚ùÑÔ∏è"},{id:"magic",name:"Magic",color:"#aa44ff",icon:"ü™Ñ"},{id:"explosion",name:"Explosion",color:"#ff6600",icon:"üí•"}];function Wr(){const[t,r]=C("fire1"),[a,n]=C("all"),[o,l]=C(!1),i=Je.find(c=>c.id===t),d=Je.filter(c=>a==="all"||c.type===a);return s("div",{className:"h-full flex bg-slate-800",children:[s("div",{className:"w-56 bg-slate-900 border-r border-slate-700 flex flex-col",children:[s("div",{className:"p-3 border-b border-slate-700",children:[e("h3",{className:"text-sm font-medium text-white mb-3",children:"Effect Types"}),s("div",{className:"space-y-1",children:[e("button",{onClick:()=>n("all"),className:`w-full text-left px-2 py-1 text-xs rounded transition-colors ${a==="all"?"bg-blue-600 text-white":"text-gray-300 hover:bg-slate-800 hover:text-white"}`,children:"All Effects"}),Ir.map(c=>s("button",{onClick:()=>n(c.id),className:`w-full flex items-center gap-2 px-2 py-1 text-xs rounded transition-colors ${a===c.id?"bg-blue-600 text-white":"text-gray-300 hover:bg-slate-800 hover:text-white"}`,title:c.description,children:[e(c.icon,{className:"w-3 h-3"}),c.name]},c.id))]})]}),a==="particle"&&s("div",{className:"p-3 border-b border-slate-700",children:[e("h4",{className:"text-xs font-medium text-gray-300 mb-2",children:"Quick Presets"}),e("div",{className:"grid grid-cols-2 gap-1",children:$r.map(c=>s("button",{className:"flex flex-col items-center p-2 bg-slate-800 hover:bg-slate-700 rounded text-xs text-gray-300 hover:text-white transition-colors",title:c.name,children:[e("span",{className:"text-base mb-1",children:c.icon}),e("span",{children:c.name})]},c.id))})]}),e("div",{className:"flex-1 overflow-y-auto scrollbar-thin",children:e("div",{className:"space-y-1 p-2",children:d.map(c=>s("div",{onClick:()=>r(c.id),className:`flex items-center gap-2 p-2 rounded cursor-pointer transition-colors ${t===c.id?"bg-blue-600 text-white":"text-gray-300 hover:bg-slate-800 hover:text-white"}`,children:[e("div",{className:`w-3 h-3 rounded border-2 ${c.enabled?"bg-green-500 border-green-500":"border-gray-500"}`}),s("div",{className:"flex-1",children:[e("div",{className:"text-sm font-medium",children:c.name}),e("div",{className:"text-xs text-gray-400 capitalize",children:c.type})]}),e("div",{className:`w-2 h-2 rounded-full ${c.type==="particle"?"bg-orange-400":c.type==="post-processing"?"bg-purple-400":c.type==="lighting"?"bg-yellow-400":"bg-blue-400"}`})]},c.id))})})]}),s("div",{className:"flex-1 flex flex-col",children:[e("div",{className:"p-3 border-b border-slate-700 bg-slate-900/50",children:s("div",{className:"flex items-center justify-between",children:[e("h3",{className:"text-sm font-medium text-white",children:i?`${i.name} Properties`:"Effects Properties"}),s("div",{className:"flex items-center gap-2",children:[e("button",{onClick:()=>l(!o),className:`flex items-center gap-1 px-2 py-1 text-xs rounded transition-colors ${o?"bg-red-600 hover:bg-red-700 text-white":"bg-green-600 hover:bg-green-700 text-white"}`,children:o?s(we,{children:[e("div",{className:"w-2 h-2 bg-white"}),"Stop"]}):s(we,{children:[e(h.Play,{className:"w-3 h-3"}),"Play"]})}),e("button",{className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:"+ Add Effect"})]})]})}),s("div",{className:"flex-1 overflow-y-auto scrollbar-thin p-3",children:[i?s("div",{className:"space-y-6",children:[s("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Basic Properties"}),s("div",{className:"space-y-3",children:[s("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"enabled",defaultChecked:i.enabled,className:"text-blue-600"}),e("label",{htmlFor:"enabled",className:"text-xs text-gray-300",children:"Enabled"})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Intensity"}),s("span",{className:"text-xs text-white",children:[(i.intensity*100).toFixed(0),"%"]})]}),e("input",{type:"range",min:"0",max:"1",step:"0.01",defaultValue:i.intensity,className:"w-full"})]})]})]}),i.type==="particle"&&s("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Particle System"}),s("div",{className:"space-y-3",children:[s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Max Particles"}),e("input",{type:"number",defaultValue:"1000",min:"1",max:"10000",className:"w-full bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Emission Rate"}),e("span",{className:"text-xs text-white",children:"50/sec"})]}),e("input",{type:"range",min:"1",max:"500",defaultValue:"50",className:"w-full"})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Lifetime"}),e("span",{className:"text-xs text-white",children:"5.0s"})]}),e("input",{type:"range",min:"0.1",max:"20",step:"0.1",defaultValue:"5",className:"w-full"})]}),s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Start Color"}),s("div",{className:"flex items-center gap-2",children:[e("input",{type:"color",defaultValue:"#ff4400",className:"w-8 h-8 border border-slate-600 rounded cursor-pointer"}),e("input",{type:"text",defaultValue:"#ff4400",className:"flex-1 bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"})]})]}),s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"End Color"}),s("div",{className:"flex items-center gap-2",children:[e("input",{type:"color",defaultValue:"#ff0000",className:"w-8 h-8 border border-slate-600 rounded cursor-pointer"}),e("input",{type:"text",defaultValue:"#ff0000",className:"flex-1 bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"})]})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Size"}),e("span",{className:"text-xs text-white",children:"1.0"})]}),e("input",{type:"range",min:"0.1",max:"10",step:"0.1",defaultValue:"1",className:"w-full"})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Speed"}),e("span",{className:"text-xs text-white",children:"2.0"})]}),e("input",{type:"range",min:"0",max:"20",step:"0.1",defaultValue:"2",className:"w-full"})]}),s("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"looping",defaultChecked:!0,className:"text-blue-600"}),e("label",{htmlFor:"looping",className:"text-xs text-gray-300",children:"Looping"})]})]})]}),i.type==="post-processing"&&s("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Post Processing"}),s("div",{className:"space-y-3",children:[s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Bloom Threshold"}),e("span",{className:"text-xs text-white",children:"1.0"})]}),e("input",{type:"range",min:"0",max:"5",step:"0.1",defaultValue:"1",className:"w-full"})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Bloom Intensity"}),e("span",{className:"text-xs text-white",children:"0.5"})]}),e("input",{type:"range",min:"0",max:"2",step:"0.1",defaultValue:"0.5",className:"w-full"})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Contrast"}),e("span",{className:"text-xs text-white",children:"1.0"})]}),e("input",{type:"range",min:"0",max:"2",step:"0.1",defaultValue:"1",className:"w-full"})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Saturation"}),e("span",{className:"text-xs text-white",children:"1.0"})]}),e("input",{type:"range",min:"0",max:"2",step:"0.1",defaultValue:"1",className:"w-full"})]}),s("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"vignette",className:"text-blue-600"}),e("label",{htmlFor:"vignette",className:"text-xs text-gray-300",children:"Vignette"})]}),s("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"chromatic-aberration",className:"text-blue-600"}),e("label",{htmlFor:"chromatic-aberration",className:"text-xs text-gray-300",children:"Chromatic Aberration"})]})]})]}),i.type==="lighting"&&s("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Lighting Effects"}),s("div",{className:"space-y-3",children:[s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Effect Type"}),s("select",{className:"w-full bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded",children:[e("option",{children:"Volumetric Fog"}),e("option",{children:"God Rays"}),e("option",{children:"Light Shafts"}),e("option",{children:"Atmospheric Scattering"})]})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Density"}),e("span",{className:"text-xs text-white",children:"0.3"})]}),e("input",{type:"range",min:"0",max:"1",step:"0.01",defaultValue:"0.3",className:"w-full"})]}),s("div",{children:[e("label",{className:"text-xs font-medium text-gray-300 block mb-1",children:"Color"}),s("div",{className:"flex items-center gap-2",children:[e("input",{type:"color",defaultValue:"#87ceeb",className:"w-8 h-8 border border-slate-600 rounded cursor-pointer"}),e("input",{type:"text",defaultValue:"#87ceeb",className:"flex-1 bg-slate-800 border border-slate-600 text-white text-xs p-1 rounded"})]})]})]})]}),i.type==="water"&&s("div",{children:[e("h4",{className:"text-sm font-medium text-white mb-3",children:"Water Effects"}),s("div",{className:"space-y-3",children:[s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Wave Height"}),e("span",{className:"text-xs text-white",children:"0.5"})]}),e("input",{type:"range",min:"0",max:"5",step:"0.1",defaultValue:"0.5",className:"w-full"})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Wave Speed"}),e("span",{className:"text-xs text-white",children:"1.0"})]}),e("input",{type:"range",min:"0",max:"5",step:"0.1",defaultValue:"1",className:"w-full"})]}),s("div",{children:[s("div",{className:"flex items-center justify-between mb-1",children:[e("label",{className:"text-xs font-medium text-gray-300",children:"Transparency"}),e("span",{className:"text-xs text-white",children:"0.8"})]}),e("input",{type:"range",min:"0",max:"1",step:"0.01",defaultValue:"0.8",className:"w-full"})]}),s("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"foam",defaultChecked:!0,className:"text-blue-600"}),e("label",{htmlFor:"foam",className:"text-xs text-gray-300",children:"Foam"})]}),s("div",{className:"flex items-center gap-2",children:[e("input",{type:"checkbox",id:"reflections",defaultChecked:!0,className:"text-blue-600"}),e("label",{htmlFor:"reflections",className:"text-xs text-gray-300",children:"Reflections"})]})]})]})]}):e("div",{className:"text-center text-gray-500 mt-12",children:e("p",{className:"text-sm",children:"Select an effect to edit its properties"})}),s("div",{className:"mt-6 p-3 bg-slate-900/50 rounded-lg",children:[e("h4",{className:"text-sm font-medium text-white mb-2",children:"Performance"}),s("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[s("div",{children:[e("span",{className:"text-gray-400",children:"Active Effects:"}),e("span",{className:"text-white ml-1",children:Je.filter(c=>c.enabled).length})]}),s("div",{children:[e("span",{className:"text-gray-400",children:"GPU Usage:"}),e("span",{className:"text-white ml-1",children:"45%"})]})]})]})]})]})]})}const Vr=({activeTab:t,isAssetPanelOpen:r,bottomPanelHeight:a,rightPanelWidth:n,isScenePanelOpen:o,onTabChange:l,onToggleAssetPanel:i,onContextMenu:d,style:c={}})=>{const f=()=>{if(!r)return null;switch(t){case"assets":return e(yr,{onContextMenu:d});case"scripts":return e(Nr,{});case"animation":return e(Cr,{});case"node-editor":return e(kr,{});case"timeline":return e(Mr,{});case"console":return e(Tr,{});case"materials":return e(Lr,{});case"terrain":return e(Ar,{});case"lighting":return e(Fr,{});case"physics":return e(Or,{});case"audio":return e(zr,{});case"effects":return e(Wr,{});default:return null}};return s("div",{className:"absolute bottom-0 left-0 pointer-events-auto no-select z-10",style:{right:o?n-4:48,height:r?a:40,...c},suppressHydrationWarning:!0,children:[e(mr,{activeTab:t,onTabChange:p=>{l(p),r||i(!0)},isAssetPanelOpen:r,onToggleAssetPanel:i,rightPanelWidth:n,isScenePanelOpen:o}),r&&e("div",{className:"flex-1 bg-gray-900 overflow-hidden",style:{height:a-40},children:f()})]})},Hr=({onClick:t,position:r,className:a=""})=>e("div",{className:`absolute top-1 w-6 pointer-events-auto z-50 ${a}`,style:r,children:e("button",{onClick:t,className:"w-6 h-8 text-gray-400 hover:text-blue-400 transition-colors flex items-center justify-center",style:{backgroundColor:"#1e293b",borderLeft:"1px solid #475569",borderTop:"1px solid #475569",borderBottom:"1px solid #475569",borderTopLeftRadius:"6px",borderBottomLeftRadius:"6px"},children:e("div",{className:"w-3 h-3 flex items-center justify-center",children:e("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"w-3 h-3",children:e("path",{d:"m15 18-6-6 6-6"})})})})});function wt({isVisible:t,progress:r,currentAsset:a,onComplete:n}){const[o,l]=C(0);return _(()=>{const i=setInterval(()=>{l(d=>{const c=r-d;return Math.abs(c)<.1?r:d+c*.3})},16);return()=>clearInterval(i)},[r]),_(()=>{if(r>=100){const i=setTimeout(()=>{n==null||n()},500);return()=>clearTimeout(i)}},[r,n]),!t&&r===0?null:e("div",{className:`fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 transition-opacity duration-300 ${t?"opacity-100":"opacity-0 pointer-events-none"}`,children:s("div",{className:"bg-gray-900/95 border border-gray-700 rounded-lg p-8 max-w-md w-full mx-4 shadow-2xl",children:[s("div",{className:"text-center mb-6",children:[e("h2",{className:"text-2xl font-bold text-white mb-2",children:"Renzora Engine"}),e("div",{className:"w-12 h-1 bg-gradient-to-r from-blue-500 to-purple-500 mx-auto rounded-full"})]}),s("div",{className:"mb-6",children:[s("div",{className:"flex justify-between items-center mb-2",children:[e("span",{className:"text-sm text-gray-300",children:"Loading Assets"}),s("span",{className:"text-sm text-blue-400 font-mono",children:[Math.round(o),"%"]})]}),e("div",{className:"w-full bg-gray-800 rounded-full h-2 overflow-hidden",children:e("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 rounded-full transition-all duration-300 ease-out relative",style:{width:`${o}%`},children:e("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-pulse"})})})]}),a&&s("div",{className:"text-center",children:[e("p",{className:"text-xs text-gray-400 mb-1",children:a.includes("Engine")||a.includes("System")?"Initializing:":"Loading:"}),e("p",{className:"text-sm text-gray-200 truncate font-mono bg-gray-800/50 px-3 py-1 rounded",children:a})]})]})})}function Gr({operation:t,progress:r}){return s("div",{className:"flex items-center gap-3 px-4 py-2 bg-gray-800/90 rounded-lg border border-gray-700",children:[e("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}),e("span",{className:"text-sm text-gray-200",children:(n=>{switch(n){case"creating":return"Creating Project";case"loading":return"Loading Project";case"saving":return"Saving Project";case"exporting":return"Exporting Project";case"importing":return"Importing Project";default:return"Processing"}})(t)}),r!==void 0&&s("div",{className:"flex items-center gap-2 ml-auto",children:[e("div",{className:"w-16 bg-gray-700 rounded-full h-1",children:e("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-300",style:{width:`${r}%`}})}),s("span",{className:"text-xs text-blue-400 font-mono min-w-[3ch]",children:[Math.round(r),"%"]})]})]})}const Nt=Ft();function Ur(){const t=Bt(Nt);if(!t)throw new Error("useLoading must be used within LoadingProvider");return t}function _r({children:t}){const[r,a]=C({isLoading:!1,progress:0,currentAsset:"",operation:""}),{panels:n}=me(D);_(()=>{const l=i=>{console.log("üîÑ LoadingProvider received event:",{isLoading:i.isLoading,operation:i.operation,progress:i.progress,asset:i.asset,panelsResizing:n.isResizingPanels});const d=i.isLoading&&i.operation!=="auto-saving";i.isLoading&&!d&&console.log("üö´ Suppressing loading screen for operation:",i.operation),d&&console.log("‚úÖ Showing loading screen for operation:",i.operation),a({isLoading:d,progress:i.progress,currentAsset:i.asset,operation:i.operation})};return ae.addLoadingListener(l),()=>{ae.removeLoadingListener(l)}},[n.isResizingPanels]);const o={...r,startLoading:l=>ae.startLoading(l),updateProgress:(l,i)=>ae.updateLoadingProgress(l,i),finishLoading:()=>ae.finishLoading()};return s(Nt.Provider,{value:o,children:[t,e(wt,{isVisible:r.isLoading,progress:r.progress,currentAsset:r.currentAsset,operation:r.operation,onComplete:()=>{}})]})}function Xr({onProjectLoad:t,onClose:r}){const[a,n]=C(!1),[o,l]=C(""),[i,d]=C(null),c=ge(null),{isLoading:f,operation:p,progress:x}=Ur(),w=async S=>{const H=S.target.files[0];if(H){if(!H.name.endsWith(".ren")){d("Please select a .ren project file");return}d(null);try{const v=H.name.replace(".ren",""),j=await ae.extractProject(H,v);t==null||t(v,j),r==null||r()}catch(v){d(`Failed to open project: ${v.message}`)}}},b=async()=>{if(!o.trim()){d("Please enter a project name");return}d(null);try{const S=await ae.createNewProject(o.trim());t==null||t(o.trim(),S),r==null||r()}catch(S){d(`Failed to create project: ${S.message}`)}};return e("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s("div",{className:"bg-gray-800 rounded-lg p-6 w-96 max-w-sm mx-4",children:[s("div",{className:"flex justify-between items-center mb-6",children:[e("h2",{className:"text-xl font-semibold text-white",children:"Renzora Projects"}),r&&e("button",{onClick:r,className:"text-gray-400 hover:text-white text-xl",children:"√ó"})]}),i&&e("div",{className:"bg-red-900 border border-red-600 text-red-200 px-3 py-2 rounded mb-4",children:i}),f&&e("div",{className:"mb-4",children:e(Gr,{operation:p,progress:x})}),s("div",{className:"space-y-4",children:[s("div",{children:[e("h3",{className:"text-sm font-medium text-gray-300 mb-2",children:"Open Project"}),e("input",{ref:c,type:"file",accept:".ren",onChange:w,className:"hidden"}),e("button",{onClick:()=>{var S;return(S=c.current)==null?void 0:S.click()},disabled:f,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 text-white py-2 px-4 rounded transition-colors",children:f&&p==="importing"?"Opening...":"Open .ren File"})]}),s("div",{children:[e("h3",{className:"text-sm font-medium text-gray-300 mb-2",children:"Create New Project"}),a?s("div",{className:"space-y-2",children:[e("input",{type:"text",value:o,onChange:S=>l(S.target.value),placeholder:"Project name",className:"w-full bg-gray-700 text-white border border-gray-600 rounded px-3 py-2 focus:outline-none focus:border-blue-500",onKeyPress:S=>S.key==="Enter"&&b()}),s("div",{className:"flex gap-2",children:[e("button",{onClick:b,disabled:f,className:"flex-1 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 text-white py-2 px-4 rounded transition-colors",children:f&&p==="creating"?"Creating...":"Create"}),e("button",{onClick:()=>{n(!1),l(""),d(null)},className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white py-2 px-4 rounded transition-colors",children:"Cancel"})]})]}):e("button",{onClick:()=>n(!0),disabled:f,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-600 text-white py-2 px-4 rounded transition-colors",children:"New Project"})]}),s("div",{children:[e("h3",{className:"text-sm font-medium text-gray-300 mb-2",children:"Export Project"}),e("button",{onClick:async()=>{const S=ae.getCurrentProject();if(!S.path){d("No project is currently open");return}d(null);try{await ae.packageProject(S.path,S.name)}catch(H){d(`Failed to export project: ${H.message}`)}},disabled:f||!ae.getCurrentProject().path,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:bg-gray-600 text-white py-2 px-4 rounded transition-colors",children:f&&p==="exporting"?"Exporting...":"Export as .ren"}),!ae.getCurrentProject().path&&e("p",{className:"text-xs text-gray-400 mt-1",children:"No project currently open"})]})]}),ae.getCurrentProject().name&&s("div",{className:"mt-6 pt-4 border-t border-gray-700",children:[e("h4",{className:"text-sm font-medium text-gray-300 mb-1",children:"Current Project"}),e("p",{className:"text-sm text-gray-400",children:ae.getCurrentProject().name}),e("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-saves every 30 seconds"})]}),!ae.getCurrentProject().name&&e("div",{className:"mt-6 pt-4 border-t border-gray-700",children:e("p",{className:"text-xs text-gray-500",children:"No project loaded"})})]})})}function Kr(){const[t,r]=C(!1),[a,n]=C(!1),[o,l]=C(!1),{ui:i}=me(D),{topLeftMenuSelected:d}=i,{setTopLeftMenuSelected:c}=ne,f=async()=>{if(!o)try{l(!0),console.log("üíæ Manual save triggered"),await Se.saveNow(),ne.addConsoleMessage("Project saved successfully","success")}catch(x){console.error("Save failed:",x),ne.addConsoleMessage("Failed to save project","error")}finally{l(!1)}};_(()=>{const x=w=>{w.ctrlKey&&w.key==="s"&&(w.preventDefault(),f())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[o]);const p=[{id:"new-project",label:"New Project",icon:h.Plus,shortcut:"Ctrl+N"},{id:"open-project",label:"Open Project",icon:h.Folder,shortcut:"Ctrl+O"},{id:"save-project",label:"Save Project",icon:h.Save,shortcut:"Ctrl+S"},{id:"export-project",label:"Export Project",icon:h.Download,shortcut:"Ctrl+E"},{divider:!0},{id:"import",label:"Import Model",icon:h.Upload,shortcut:"Ctrl+I"},{divider:!0},{id:"settings",label:"Settings",icon:h.Cog},{id:"help",label:"Help",icon:h.QuestionMark}];return s(we,{children:[e("div",{className:"absolute top-4 left-4 pointer-events-auto z-30 no-select",children:s("div",{className:"relative",children:[e("button",{onClick:()=>r(!t),className:`w-10 h-10 bg-gray-900/95 backdrop-blur-sm border border-gray-800 rounded-lg shadow-2xl hover:bg-gray-700/50 transition-colors flex items-center justify-center ${t?"bg-gray-700/50":""}`,children:e(h.Menu,{className:"w-5 h-5 text-gray-300"})}),t&&s(we,{children:[e("div",{className:"fixed inset-0 z-10",onClick:()=>r(!1)}),e("div",{className:"absolute top-full left-0 mt-1 w-56 bg-gradient-to-br from-gray-900/98 to-gray-950/98 backdrop-blur-sm rounded-lg shadow-[0_20px_25px_-5px_rgba(0,0,0,0.4),0_10px_10px_-5px_rgba(0,0,0,0.04)] overflow-hidden z-20 border border-gray-700/50",children:e("div",{className:"p-1.5",children:p.map((x,w)=>x.divider?e("div",{className:"border-t border-gray-700/50 my-2 mx-2"},w):s("button",{className:"w-full px-4 py-2.5 text-left text-sm text-gray-300 hover:bg-gradient-to-r hover:from-blue-600/90 hover:to-blue-500/90 hover:text-white flex items-center justify-between transition-all duration-150 group relative rounded-md hover:shadow-lg",onClick:()=>{r(!1),c(x.id),["new-project","open-project","export-project"].includes(x.id)?n(!0):x.id==="save-project"?f():console.log("Menu item clicked:",x.id)},title:x.label,children:[s("div",{className:"flex items-center gap-3",children:[e("span",{className:"w-5 h-5 flex items-center justify-center text-gray-400 hover:text-white",children:x.id==="save-project"&&o?e("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin"}):e(x.icon,{className:"w-4.5 h-4.5"})}),e("span",{className:"font-normal",children:x.id==="save-project"&&o?"Saving...":x.label})]}),x.shortcut&&e("span",{className:"text-xs text-gray-500",children:x.shortcut})]},x.id))})})]})]})}),a&&e(Xr,{onProjectLoad:(x,w)=>{console.log(`Project loaded: ${x} at ${w}`),ne.addConsoleMessage(`Project "${x}" loaded successfully`,"success")},onClose:()=>n(!1)})]})}const ft=[{id:"select",icon:h.Select,title:"Select"},{id:"camera",icon:h.Camera,title:"Camera"},{id:"paint",icon:h.Paint,title:"Paint"},{id:"sculpt",icon:h.Sculpt,title:"Sculpt"},{id:"move",icon:h.Move,title:"Move"},{id:"rotate",icon:h.Rotate,title:"Rotate"},{id:"scale",icon:h.Scale,title:"Scale"},{id:"undo",icon:h.Undo,title:"Undo"},{id:"redo",icon:h.Redo,title:"Redo"}];function Zr({selectedTool:t,onToolSelect:r}){const[a,n]=C({visible:!1,text:"",x:0,y:0}),[o,l]=C(null),{selection:i}=me(D),{transformMode:d}=i,{setTransformMode:c}=ne,f=()=>["select","move","rotate","scale"].includes(d)?d:t,p=(w,b)=>{const m=w.currentTarget.getBoundingClientRect();n({visible:!0,text:b,x:m.right+12,y:m.top+m.height/2})},x=()=>{n({visible:!1,text:"",x:0,y:0})};return s(we,{children:[e("div",{className:"absolute top-16 left-4 w-10 bg-gradient-to-b from-slate-800/95 to-slate-900/98 backdrop-blur-md border border-slate-700/80 rounded-xl shadow-2xl shadow-black/50 flex flex-col pointer-events-auto overflow-visible no-select",children:ft.map((w,b)=>{const S=f()===w.id;return s("div",{children:[(b===4||b===7)&&e("div",{className:"mx-2 my-1 h-px bg-slate-700/60"}),s("button",{onClick:()=>{w.id==="undo"||w.id==="redo"?(l(w.id),setTimeout(()=>l(null),200),console.log(`${w.id} action triggered`)):(r(w.id),c(w.id))},className:`w-full h-8 flex items-center justify-center transition-all duration-200 relative group ${S&&w.id!=="undo"&&w.id!=="redo"||o===w.id?"bg-gradient-to-b from-blue-500 to-blue-700 text-white shadow-lg shadow-blue-600/40":"text-slate-400 hover:text-white hover:bg-gradient-to-b hover:from-slate-700/80 hover:to-slate-800/90 hover:shadow-md hover:shadow-black/30"} ${b===0?"rounded-t-xl":""} ${b===ft.length-1?"rounded-b-xl":""} ${S&&w.id!=="undo"&&w.id!=="redo"||o===w.id?"scale-105":"hover:scale-102"}`,onMouseEnter:H=>p(H,w.title),onMouseLeave:x,children:[S&&w.id!=="undo"&&w.id!=="redo"&&e("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 bg-blue-400 rounded-r-full"}),e(w.icon,{className:`transition-all duration-200 ${S&&w.id!=="undo"&&w.id!=="redo"||o===w.id?"w-5 h-5":"w-4 h-4 group-hover:w-5 group-hover:h-5"}`})]})]},w.id)})}),a.visible&&s("div",{className:"fixed bg-slate-900 border border-slate-700 text-white text-xs px-2 py-1 rounded pointer-events-none whitespace-nowrap shadow-2xl",style:{left:a.x,top:a.y,transform:"translateY(-50%)",zIndex:9999},children:[e("div",{className:"absolute right-full top-1/2 -translate-y-1/2 border-4 border-transparent border-r-slate-900",style:{borderRightColor:"#0f172a"}}),a.text]})]})}function qr(){const t=ae.getCurrentProject(),{ui:r,panels:a}=me(D),{bottomPanelHeight:n}=r,{isAssetPanelOpen:o}=a,[l,i]=C(null),[d,c]=C(!1),[f,p]=C(!1);if(!t.name)return null;_(()=>{const m=ae.getCurrentProjectFromStorage();m!=null&&m.lastAccessed&&i(new Date(m.lastAccessed))},[]),_(()=>{const m=()=>{c(Se.hasUnsavedChanges())};m();const S=setInterval(m,1e3);return()=>clearInterval(S)},[]);const x=m=>{if(!m)return"Never synced";const H=new Date-m,v=Math.floor(H/6e4),j=Math.floor(H/36e5),O=Math.floor(H/864e5);return v<1?"Just now":v<60?`${v}m ago`:j<24?`${j}h ago`:`${O}d ago`},b=d?{color:"bg-yellow-500",tooltip:"Unsaved changes - will auto-save soon"}:{color:"bg-green-500",tooltip:`Last sync: ${x(l)}`};return e("div",{className:"absolute pointer-events-auto z-10 no-select",style:{left:8,bottom:o?n+8:48},children:e("div",{className:"bg-gray-900/80 backdrop-blur-sm border border-gray-700/50 rounded px-2 py-1",children:s("div",{className:"flex items-center gap-1.5",children:[e("div",{className:`w-1.5 h-1.5 ${b.color} rounded-full cursor-pointer relative`,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:f&&s("div",{className:"absolute bottom-full -left-2 mb-2 px-2 py-1 bg-gray-800 text-white text-xs rounded whitespace-nowrap z-50",children:[b.tooltip,e("div",{className:"absolute top-full left-2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-l-transparent border-r-transparent border-t-gray-800"})]})}),e("span",{className:"text-xs text-gray-400",children:t.name})]})})})}const Yr=t=>{const[r,a]=C(!1),[n,o]=C(!1),{setBottomPanelHeight:l,setRightPanelWidth:i,setIsAssetPanelOpen:d,setIsScenePanelOpen:c,setIsResizingPanels:f,setSelectedTool:p}=t,x=je(()=>{console.log("üîµ Bottom panel resize START"),a(!0),f(!0),document.body.classList.add("dragging-vertical"),Promise.resolve().then(()=>Qe).then(({autoSaveManager:v})=>{v.cancelPendingAutoSave()})},[f]),w=je((v,{isAssetPanelOpen:j})=>{if(!r)return;v.preventDefault();const O=window.innerHeight-v.clientY,z=window.innerHeight*.85,q=80;if(!j&&O>120)d(!0),l(Math.max(200,O));else if(j&&O<q)d(!1),a(!1);else if(j){const A=Math.max(40,Math.min(z,O));l(A)}},[r,d,l]),b=je(()=>{console.log("üî¥ Bottom panel resize END"),a(!1),f(!1),document.body.classList.remove("dragging-vertical")},[f]),m=je(()=>{console.log("üü° Right panel resize START"),o(!0),f(!0),document.body.classList.add("dragging-horizontal"),Promise.resolve().then(()=>Qe).then(({autoSaveManager:v})=>{v.cancelPendingAutoSave()})},[f]),S=je((v,{isScenePanelOpen:j})=>{if(!n)return;const O=window.innerWidth-v.clientX;!j&&O>150?(c(!0),i(Math.max(200,O)),p("scene")):j&&O<100?(c(!1),o(!1),p("select")):j&&i(Math.max(200,Math.min(600,O)))},[n,c,i,p]),H=je(()=>{console.log("üü† Right panel resize END"),o(!1),f(!1),document.body.classList.remove("dragging-horizontal")},[f]);return{isResizingBottom:r,isResizingRight:n,handleBottomResizeStart:x,handleBottomResizeMove:w,handleBottomResizeEnd:b,handleRightResizeStart:m,handleRightResizeMove:S,handleRightResizeEnd:H}},Jr=(t,r)=>{const{removeSceneObject:a,setSelectedEntity:n,setTransformMode:o}=r;_(()=>{const l=i=>{switch(i.key==="Delete"&&t&&(a(t),n(null),o("select")),i.key){case"Escape":t&&(n(null),o("select"));break;case"g":case"G":t&&!i.ctrlKey&&!i.metaKey&&o("move");break;case"r":case"R":t&&!i.ctrlKey&&!i.metaKey&&o("rotate");break;case"s":case"S":t&&!i.ctrlKey&&!i.metaKey&&o("scale");break}};return document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}},[t,a,n,o])},Qr=t=>{const{addSceneObject:r,removeSceneObject:a,setSelectedEntity:n,setTransformMode:o,setSelectedTool:l,setSelectedBottomTab:i}=t,d=(T,te)=>{if(T){const se=[{label:"Rename",action:()=>c(T.id),icon:e(h.Pencil,{className:"w-4 h-4"}),shortcut:"F2"},{separator:!0},{label:"Copy",action:()=>f(T.id),icon:e(h.Copy,{className:"w-4 h-4"}),shortcut:"Ctrl+C"},{label:"Duplicate",action:()=>p(T.id),icon:e(h.DocumentDuplicate,{className:"w-4 h-4"}),shortcut:"Ctrl+D"},{label:"Delete",action:()=>x(T.id),icon:e(h.Trash,{className:"w-4 h-4"}),shortcut:"Del"},{separator:!0}],N=[];(T.type==="model"||T.type==="mesh")&&N.push({label:"Add Material",action:()=>w(T.id),icon:e(h.Cube,{className:"w-4 h-4"})},{label:"Add Script",action:()=>b(T.id),icon:e(h.CodeBracket,{className:"w-4 h-4"})},{label:"Add Physics",action:()=>m(T.id),icon:e(h.Lightning,{className:"w-4 h-4"})}),T.type==="terrain"&&N.push({label:"Edit Terrain",action:()=>S(T.id),icon:e(h.Mountain,{className:"w-4 h-4"})},{label:"Paint Texture",action:()=>H(T.id),icon:e(h.PaintBrush,{className:"w-4 h-4"})});const Y=[{separator:!0},{label:"Color Code",action:()=>{},icon:e(h.ColorSwatch,{className:"w-4 h-4"}),submenu:[{label:"Red",action:()=>v(T.id,"red"),color:"#ef4444"},{label:"Orange",action:()=>v(T.id,"orange"),color:"#f97316"},{label:"Yellow",action:()=>v(T.id,"yellow"),color:"#eab308"},{label:"Green",action:()=>v(T.id,"green"),color:"#22c55e"},{label:"Blue",action:()=>v(T.id,"blue"),color:"#3b82f6"},{label:"Purple",action:()=>v(T.id,"purple"),color:"#a855f7"},{label:"Clear",action:()=>v(T.id,null),icon:e(h.XMark,{className:"w-3 h-3"})}]}];return[...se,...N,...Y]}else{const se=[{label:"Create Object",action:()=>{},icon:e(h.PlusCircle,{className:"w-4 h-4"}),submenu:[{label:"Cube",action:()=>j("cube"),icon:e(h.Cube,{className:"w-4 h-4"})},{label:"Sphere",action:()=>j("sphere"),icon:e(h.Circle,{className:"w-4 h-4"})},{label:"Cylinder",action:()=>j("cylinder"),icon:e(h.Rectangle,{className:"w-4 h-4"})},{label:"Plane",action:()=>j("plane"),icon:e(h.Square2Stack,{className:"w-4 h-4"})},{separator:!0},{label:"Light",action:()=>j("light"),icon:e(h.LightBulb,{className:"w-4 h-4"})},{label:"Camera",action:()=>j("camera"),icon:e(h.Camera,{className:"w-4 h-4"})}]},{separator:!0},{label:"Paste",action:()=>O(),icon:e(h.Clipboard,{className:"w-4 h-4"}),shortcut:"Ctrl+V"},{separator:!0},{label:"Undo",action:()=>z(),icon:e(h.Undo,{className:"w-4 h-4"}),shortcut:"Ctrl+Z"},{label:"Redo",action:()=>q(),icon:e(h.Redo,{className:"w-4 h-4"}),shortcut:"Ctrl+Y"}];return te==="viewport"?[...se,{separator:!0},{label:"Frame All",action:()=>M(),icon:e(h.ArrowsPointingOut,{className:"w-4 h-4"}),shortcut:"F"},{label:"Frame Selected",action:()=>A(),icon:e(h.MagnifyingGlass,{className:"w-4 h-4"}),shortcut:"Shift+F"},{separator:!0},{label:"Reset View",action:()=>L(),icon:e(h.ArrowPath,{className:"w-4 h-4"})},{label:"Top View",action:()=>W("top"),icon:e(h.ArrowUp,{className:"w-4 h-4"}),shortcut:"Numpad 7"},{label:"Front View",action:()=>W("front"),icon:e(h.ArrowRight,{className:"w-4 h-4"}),shortcut:"Numpad 1"},{label:"Right View",action:()=>W("right"),icon:e(h.ArrowDown,{className:"w-4 h-4"}),shortcut:"Numpad 3"}]:[...se,{separator:!0},{label:"Select All",action:()=>y(),icon:e(h.CursorArrowRays,{className:"w-4 h-4"}),shortcut:"Ctrl+A"},{label:"Expand All",action:()=>R(),icon:e(h.PlusCircle,{className:"w-4 h-4"})},{label:"Collapse All",action:()=>Q(),icon:e(h.MinusCircle,{className:"w-4 h-4"})}]}},c=T=>{console.log("Rename",T)},f=T=>{console.log("Copy",T)},p=T=>{console.log("Duplicate",T)},x=T=>{console.log("Delete",T),a(T)},w=T=>{console.log("Add Material",T),l("materials")},b=T=>{console.log("Add Script",T),i("scripts")},m=T=>{console.log("Add Physics",T),l("physics")},S=T=>{console.log("Edit Terrain",T),l("terrain")},H=T=>{console.log("Paint Texture",T)},v=(T,te)=>{console.log("Color Code",T,te)},j=T=>{const te={name:T.charAt(0).toUpperCase()+T.slice(1),type:"mesh",position:[Math.random()*4-2,0,Math.random()*4-2],rotation:[0,0,0],scale:[1,1,1],geometry:T==="cube"?"box":T,material:{color:`hsl(${Math.random()*360}, 70%, 50%)`},visible:!0},se=r(te);n(se.id),o("move"),setTimeout(()=>{const N=document.querySelector("canvas");N&&N.focus()},100)},O=()=>{console.log("Paste")},z=()=>{console.log("Undo")},q=()=>{console.log("Redo")},y=()=>{console.log("Select All")},A=()=>{console.log("Focus Selected")},M=()=>{console.log("Frame All")},L=()=>{console.log("Reset View")},W=T=>{console.log("Set View",T)},R=()=>{console.log("Expand All")},Q=()=>{console.log("Collapse All")};return{getContextMenuItems:d,handleCreateObject:j,handleDelete:x,handleRename:c,handleCopy:f,handleDuplicate:p,handleAddMaterial:w,handleAddScript:b,handleAddPhysics:m,handleEditTerrain:S,handlePaintTexture:H,handleColorCode:v,handlePaste:O,handleUndo:z,handleRedo:q,handleSelectAll:y,handleFocusSelected:A,handleFrameAll:M,handleResetView:L,handleSetView:W,handleExpandAll:R,handleCollapseAll:Q}},es=()=>{const[t,r]=C("select"),[a,n]=C(null),{selection:o,ui:l,panels:i}=me(D),{entity:d}=o,{selectedTool:c,selectedBottomTab:f,rightPanelWidth:p,bottomPanelHeight:x}=l,{isScenePanelOpen:w,isAssetPanelOpen:b}=i,{setSelectedEntity:m,setContextMenuHandler:S,setTransformMode:H,setSelectedTool:v,setSelectedBottomTab:j,setIsScenePanelOpen:O,setIsAssetPanelOpen:z}=ne,q=Yr(ne),y=Qr(ne);Jr(d,ne);const A=te=>{m(te),te&&H("move")},M=(te,se,N="scene")=>{te.preventDefault(),te.stopPropagation();const{clientX:Y,clientY:K}=te,g=y.getContextMenuItems(se,N);n({position:{x:Y,y:K},items:g})},L=()=>{n(null)};_(()=>{S(M)},[S]);const W=te=>{q.handleBottomResizeMove(te,{isAssetPanelOpen:b})},R=te=>{q.handleRightResizeMove(te,{isScenePanelOpen:w})},Q=()=>{O(!w),w&&v("select")},T=q.isResizingRight||q.isResizingBottom?"":"transition-all duration-300 ease-in-out";return s("div",{className:"fixed inset-0 pointer-events-none z-10",onContextMenu:te=>M(te,null,"viewport"),children:[e(Kr,{}),e(qr,{}),e(Zr,{selectedTool:t,onToolSelect:r}),e(ur,{isScenePanelOpen:w,rightPanelWidth:p,bottomPanelHeight:x,isAssetPanelOpen:b,selectedRightTool:c,selectedObject:d,onToolSelect:v,onScenePanelToggle:Q,onObjectSelect:A,onContextMenu:M,style:{className:T}}),e(it,{type:"right",isResizing:q.isResizingRight,onResizeStart:q.handleRightResizeStart,onResizeEnd:q.handleRightResizeEnd,onResize:R,position:{right:w?p-4:49,top:0,bottom:b?x:"40px",zIndex:30},className:"resize-handle"}),!w&&e(Hr,{onClick:()=>O(!0),position:{right:47}}),e(it,{type:"bottom",isResizing:q.isResizingBottom,onResizeStart:q.handleBottomResizeStart,onResizeEnd:q.handleBottomResizeEnd,onResize:W,position:{left:0,right:w?p-4:48,bottom:b?x:40}}),e(Vr,{activeTab:f,isAssetPanelOpen:b,bottomPanelHeight:x,rightPanelWidth:p,isScenePanelOpen:w,onTabChange:te=>{j(te),b||z(!0)},onToggleAssetPanel:()=>z(!b),onContextMenu:M,style:{className:T}}),a&&e(lr,{items:a.items,position:a.position,onClose:L})]})};function ts(){return e(es,{})}function rs(){return _(()=>{console.log("Projects plugin initialized"),typeof window<"u"&&(window.projectManager=ae,console.log("Project manager exposed globally: window.projectManager"),console.log("Debug commands:"),console.log("- window.projectManager.clearAllStorageData() - Clear localStorage"),console.log("- window.projectManager.getCurrentProjectFromStorage() - Check stored project"));const t=document.querySelector("[data-engine-loader]")!==null;let r=null;t||(r=setTimeout(async()=>{try{await ae.initializeDefaultProject(),console.log("Default project initialized successfully")}catch(d){console.error("Failed to initialize default project:",d)}},500));const a=i=>{if(i.ctrlKey||i.metaKey)switch(i.key.toLowerCase()){case"s":i.preventDefault(),n();break;case"o":i.preventDefault(),document.dispatchEvent(new CustomEvent("open-project-manager"));break;case"n":i.preventDefault(),document.dispatchEvent(new CustomEvent("new-project"));break;case"e":i.shiftKey&&(i.preventDefault(),o());break}},n=async()=>{if(ae.getCurrentProject().path)try{console.log("Auto-saving project...")}catch(d){console.error("Failed to save project:",d)}},o=async()=>{const i=ae.getCurrentProject();if(i.path)try{await ae.packageProject(i.path,i.name)}catch(d){console.error("Failed to export project:",d)}};window.addEventListener("keydown",a);const l=setInterval(()=>{Promise.resolve().then(()=>Qe).then(({autoSaveManager:i})=>{i.performAutoSave()})},3e4);return()=>{r&&clearTimeout(r),clearInterval(l),window.removeEventListener("keydown",a)}},[]),null}function ss({onReady:t}){const[r,a]=C(!0),[n,o]=C(!1);return _(()=>{const l=setTimeout(()=>{o(!0),setTimeout(()=>{a(!1),t==null||t()},300)},600);return()=>clearTimeout(l)},[t]),r?e("div",{className:`fixed inset-0 bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 flex items-center justify-center z-[100] transition-opacity duration-300 ${n?"opacity-0":"opacity-100"}`,children:s("div",{className:"text-center",children:[s("div",{className:"mb-8",children:[e("h1",{className:"text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 mb-4 animate-pulse",children:"RENZORA"}),e("p",{className:"text-xl text-gray-300 font-light tracking-wide",children:"Game Engine"})]}),e("div",{className:"flex justify-center space-x-2",children:[0,1,2].map(l=>e("div",{className:"w-3 h-3 bg-blue-400 rounded-full animate-bounce",style:{animationDelay:`${l*.2}s`,animationDuration:"1.4s"}},l))}),e("div",{className:"absolute bottom-8 left-0 right-0 text-center",children:e("p",{className:"text-sm text-gray-500",children:"Version 0.1.0"})})]})}):null}function as({children:t,onLoadComplete:r,showSplash:a=!1}){const[n,o]=C(a),[l,i]=C(!a),[d,c]=C(0),[f,p]=C(""),[x,w]=C(!1);return _(()=>{let b=!0;const m=async()=>{try{console.log("üöÄ Renzora Engine starting..."),i(!0),p("Initializing Project System"),c(10);try{await ae.initializeDefaultProject(),console.log("‚úÖ Project system initialized with default project")}catch(S){console.warn("‚ö†Ô∏è Project system initialization failed:",S)}if(!b)return;c(95),p("Engine Ready!"),console.log("üéâ Renzora Engine loaded successfully!"),setTimeout(()=>{b&&(c(100),w(!0),r==null||r(),setTimeout(()=>{b&&i(!1)},200))},100)}catch(S){console.error("‚ùå Engine initialization failed:",S),b&&(p(`Error: ${S.message}`),setTimeout(()=>{b&&(i(!1),r==null||r())},2e3))}};if(a)return window._initializeEngine=m,()=>{b=!1,delete window._initializeEngine};{const S=setTimeout(m,10);return()=>{b=!1,clearTimeout(S)}}},[r]),s("div",{"data-engine-loader":"true",children:[n&&a&&e(ss,{onReady:()=>{o(!1),i(!0),window._initializeEngine&&window._initializeEngine()}}),e(wt,{isVisible:l&&!n,progress:d,currentAsset:f,onComplete:()=>{}}),x&&t]})}function ns({sceneObj:t}){const r=ge(),{selection:a,sceneObjects:n}=me(D),{entity:o}=a,{setSelectedEntity:l,setTransformMode:i}=ne,d=o===t.id;_(()=>{r.current&&t.id&&(r.current.userData.sceneObjectId=t.id)},[t.id]);const c=p=>{p.stopPropagation(),l(t.id),i("move")},f=()=>{switch(t.geometry){case"box":return e("boxGeometry",{args:[1,1,1]});case"sphere":return e("sphereGeometry",{args:[.5,32,32]});case"cylinder":return e("cylinderGeometry",{args:[.5,.5,1,32]});case"plane":return e("planeGeometry",{args:[1,1]});default:return e("boxGeometry",{args:[1,1,1]})}};return t.visible?s("mesh",{ref:r,position:t.position,rotation:t.rotation,scale:t.scale,onClick:c,userData:{sceneObjectId:t.id},children:[f(),e("meshStandardMaterial",{color:d?"#4FC3F7":t.material.color,emissive:d?"#1E88E5":"#000000",emissiveIntensity:d?.2:0})]}):null}function os(){const{sceneObjects:t}=me(D);return e(we,{children:t.map(r=>e(ns,{sceneObj:r},r.id))})}function gs(){const{console:t,ui:r,panels:a}=me(D),{contextMenuHandler:n}=t,{rightPanelWidth:o,bottomPanelHeight:l}=r,{isScenePanelOpen:i,isAssetPanelOpen:d}=a;_(()=>{console.log("Engine starting...")},[]);const c=Rt(()=>({top:0,left:0,right:i?o-4:47,bottom:d?l-1:40}),[i,o,d,l]),f=je(()=>{console.log("üéÆ Renzora Engine UI ready!")},[]);return e(as,{showSplash:!1,onLoadComplete:f,children:s(_r,{children:[e(er,{}),e(tr,{}),e(rr,{}),e(ar,{}),e(nr,{}),e(or,{}),e(ts,{}),e(rs,{}),s(Qt,{onContextMenu:n,viewportBounds:c,children:[e(os,{}),s("mesh",{position:[0,-1,0],rotation:[-Math.PI/2,0,0],children:[e("planeGeometry",{args:[10,10]}),e("meshStandardMaterial",{color:"#666666"})]})]})]})})}export{gs as default};
